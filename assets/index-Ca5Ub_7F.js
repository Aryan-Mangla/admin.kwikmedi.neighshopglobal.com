(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))d(u);new MutationObserver(u=>{for(const p of u)if(p.type==="childList")for(const x of p.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&d(x)}).observe(document,{childList:!0,subtree:!0});function i(u){const p={};return u.integrity&&(p.integrity=u.integrity),u.referrerPolicy&&(p.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?p.credentials="include":u.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function d(u){if(u.ep)return;u.ep=!0;const p=i(u);fetch(u.href,p)}})();function Th(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Yo={exports:{}},$a={},Xo={exports:{}},et={};var xm;function zh(){if(xm)return et;xm=1;var r=Symbol.for("react.element"),l=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),x=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),y=Symbol.iterator;function _(M){return M===null||typeof M!="object"?null:(M=y&&M[y]||M["@@iterator"],typeof M=="function"?M:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,P={};function b(M,Y,je){this.props=M,this.context=Y,this.refs=P,this.updater=je||N}b.prototype.isReactComponent={},b.prototype.setState=function(M,Y){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Y,"setState")},b.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function k(){}k.prototype=b.prototype;function T(M,Y,je){this.props=M,this.context=Y,this.refs=P,this.updater=je||N}var U=T.prototype=new k;U.constructor=T,B(U,b.prototype),U.isPureReactComponent=!0;var O=Array.isArray,A=Object.prototype.hasOwnProperty,me={current:null},se={key:!0,ref:!0,__self:!0,__source:!0};function re(M,Y,je){var we,W={},ce=null,ue=null;if(Y!=null)for(we in Y.ref!==void 0&&(ue=Y.ref),Y.key!==void 0&&(ce=""+Y.key),Y)A.call(Y,we)&&!se.hasOwnProperty(we)&&(W[we]=Y[we]);var he=arguments.length-2;if(he===1)W.children=je;else if(1<he){for(var Ae=Array(he),w=0;w<he;w++)Ae[w]=arguments[w+2];W.children=Ae}if(M&&M.defaultProps)for(we in he=M.defaultProps,he)W[we]===void 0&&(W[we]=he[we]);return{$$typeof:r,type:M,key:ce,ref:ue,props:W,_owner:me.current}}function H(M,Y){return{$$typeof:r,type:M.type,key:Y,ref:M.ref,props:M.props,_owner:M._owner}}function K(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function I(M){var Y={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(je){return Y[je]})}var X=/\/+/g;function z(M,Y){return typeof M=="object"&&M!==null&&M.key!=null?I(""+M.key):Y.toString(36)}function E(M,Y,je,we,W){var ce=typeof M;(ce==="undefined"||ce==="boolean")&&(M=null);var ue=!1;if(M===null)ue=!0;else switch(ce){case"string":case"number":ue=!0;break;case"object":switch(M.$$typeof){case r:case l:ue=!0}}if(ue)return ue=M,W=W(ue),M=we===""?"."+z(ue,0):we,O(W)?(je="",M!=null&&(je=M.replace(X,"$&/")+"/"),E(W,Y,je,"",function(w){return w})):W!=null&&(K(W)&&(W=H(W,je+(!W.key||ue&&ue.key===W.key?"":(""+W.key).replace(X,"$&/")+"/")+M)),Y.push(W)),1;if(ue=0,we=we===""?".":we+":",O(M))for(var he=0;he<M.length;he++){ce=M[he];var Ae=we+z(ce,he);ue+=E(ce,Y,je,Ae,W)}else if(Ae=_(M),typeof Ae=="function")for(M=Ae.call(M),he=0;!(ce=M.next()).done;)ce=ce.value,Ae=we+z(ce,he++),ue+=E(ce,Y,je,Ae,W);else if(ce==="object")throw Y=String(M),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return ue}function Z(M,Y,je){if(M==null)return M;var we=[],W=0;return E(M,we,"","",function(ce){return Y.call(je,ce,W++)}),we}function ne(M){if(M._status===-1){var Y=M._result;Y=Y(),Y.then(function(je){(M._status===0||M._status===-1)&&(M._status=1,M._result=je)},function(je){(M._status===0||M._status===-1)&&(M._status=2,M._result=je)}),M._status===-1&&(M._status=0,M._result=Y)}if(M._status===1)return M._result.default;throw M._result}var ae={current:null},F={transition:null},ee={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:F,ReactCurrentOwner:me};function le(){throw Error("act(...) is not supported in production builds of React.")}return et.Children={map:Z,forEach:function(M,Y,je){Z(M,function(){Y.apply(this,arguments)},je)},count:function(M){var Y=0;return Z(M,function(){Y++}),Y},toArray:function(M){return Z(M,function(Y){return Y})||[]},only:function(M){if(!K(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},et.Component=b,et.Fragment=i,et.Profiler=u,et.PureComponent=T,et.StrictMode=d,et.Suspense=h,et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,et.act=le,et.cloneElement=function(M,Y,je){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var we=B({},M.props),W=M.key,ce=M.ref,ue=M._owner;if(Y!=null){if(Y.ref!==void 0&&(ce=Y.ref,ue=me.current),Y.key!==void 0&&(W=""+Y.key),M.type&&M.type.defaultProps)var he=M.type.defaultProps;for(Ae in Y)A.call(Y,Ae)&&!se.hasOwnProperty(Ae)&&(we[Ae]=Y[Ae]===void 0&&he!==void 0?he[Ae]:Y[Ae])}var Ae=arguments.length-2;if(Ae===1)we.children=je;else if(1<Ae){he=Array(Ae);for(var w=0;w<Ae;w++)he[w]=arguments[w+2];we.children=he}return{$$typeof:r,type:M.type,key:W,ref:ce,props:we,_owner:ue}},et.createContext=function(M){return M={$$typeof:x,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:p,_context:M},M.Consumer=M},et.createElement=re,et.createFactory=function(M){var Y=re.bind(null,M);return Y.type=M,Y},et.createRef=function(){return{current:null}},et.forwardRef=function(M){return{$$typeof:g,render:M}},et.isValidElement=K,et.lazy=function(M){return{$$typeof:j,_payload:{_status:-1,_result:M},_init:ne}},et.memo=function(M,Y){return{$$typeof:v,type:M,compare:Y===void 0?null:Y}},et.startTransition=function(M){var Y=F.transition;F.transition={};try{M()}finally{F.transition=Y}},et.unstable_act=le,et.useCallback=function(M,Y){return ae.current.useCallback(M,Y)},et.useContext=function(M){return ae.current.useContext(M)},et.useDebugValue=function(){},et.useDeferredValue=function(M){return ae.current.useDeferredValue(M)},et.useEffect=function(M,Y){return ae.current.useEffect(M,Y)},et.useId=function(){return ae.current.useId()},et.useImperativeHandle=function(M,Y,je){return ae.current.useImperativeHandle(M,Y,je)},et.useInsertionEffect=function(M,Y){return ae.current.useInsertionEffect(M,Y)},et.useLayoutEffect=function(M,Y){return ae.current.useLayoutEffect(M,Y)},et.useMemo=function(M,Y){return ae.current.useMemo(M,Y)},et.useReducer=function(M,Y,je){return ae.current.useReducer(M,Y,je)},et.useRef=function(M){return ae.current.useRef(M)},et.useState=function(M){return ae.current.useState(M)},et.useSyncExternalStore=function(M,Y,je){return ae.current.useSyncExternalStore(M,Y,je)},et.useTransition=function(){return ae.current.useTransition()},et.version="18.3.1",et}var hm;function yc(){return hm||(hm=1,Xo.exports=zh()),Xo.exports}var fm;function Lh(){if(fm)return $a;fm=1;var r=yc(),l=Symbol.for("react.element"),i=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function x(g,h,v){var j,y={},_=null,N=null;v!==void 0&&(_=""+v),h.key!==void 0&&(_=""+h.key),h.ref!==void 0&&(N=h.ref);for(j in h)d.call(h,j)&&!p.hasOwnProperty(j)&&(y[j]=h[j]);if(g&&g.defaultProps)for(j in h=g.defaultProps,h)y[j]===void 0&&(y[j]=h[j]);return{$$typeof:l,type:g,key:_,ref:N,props:y,_owner:u.current}}return $a.Fragment=i,$a.jsx=x,$a.jsxs=x,$a}var gm;function Mh(){return gm||(gm=1,Yo.exports=Lh()),Yo.exports}var e=Mh(),m=yc();const xs=Th(m);var Gi={},ec={exports:{}},ss={},tc={exports:{}},sc={};var ym;function $h(){return ym||(ym=1,(function(r){function l(F,ee){var le=F.length;F.push(ee);e:for(;0<le;){var M=le-1>>>1,Y=F[M];if(0<u(Y,ee))F[M]=ee,F[le]=Y,le=M;else break e}}function i(F){return F.length===0?null:F[0]}function d(F){if(F.length===0)return null;var ee=F[0],le=F.pop();if(le!==ee){F[0]=le;e:for(var M=0,Y=F.length,je=Y>>>1;M<je;){var we=2*(M+1)-1,W=F[we],ce=we+1,ue=F[ce];if(0>u(W,le))ce<Y&&0>u(ue,W)?(F[M]=ue,F[ce]=le,M=ce):(F[M]=W,F[we]=le,M=we);else if(ce<Y&&0>u(ue,le))F[M]=ue,F[ce]=le,M=ce;else break e}}return ee}function u(F,ee){var le=F.sortIndex-ee.sortIndex;return le!==0?le:F.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;r.unstable_now=function(){return p.now()}}else{var x=Date,g=x.now();r.unstable_now=function(){return x.now()-g}}var h=[],v=[],j=1,y=null,_=3,N=!1,B=!1,P=!1,b=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(F){for(var ee=i(v);ee!==null;){if(ee.callback===null)d(v);else if(ee.startTime<=F)d(v),ee.sortIndex=ee.expirationTime,l(h,ee);else break;ee=i(v)}}function O(F){if(P=!1,U(F),!B)if(i(h)!==null)B=!0,ne(A);else{var ee=i(v);ee!==null&&ae(O,ee.startTime-F)}}function A(F,ee){B=!1,P&&(P=!1,k(re),re=-1),N=!0;var le=_;try{for(U(ee),y=i(h);y!==null&&(!(y.expirationTime>ee)||F&&!I());){var M=y.callback;if(typeof M=="function"){y.callback=null,_=y.priorityLevel;var Y=M(y.expirationTime<=ee);ee=r.unstable_now(),typeof Y=="function"?y.callback=Y:y===i(h)&&d(h),U(ee)}else d(h);y=i(h)}if(y!==null)var je=!0;else{var we=i(v);we!==null&&ae(O,we.startTime-ee),je=!1}return je}finally{y=null,_=le,N=!1}}var me=!1,se=null,re=-1,H=5,K=-1;function I(){return!(r.unstable_now()-K<H)}function X(){if(se!==null){var F=r.unstable_now();K=F;var ee=!0;try{ee=se(!0,F)}finally{ee?z():(me=!1,se=null)}}else me=!1}var z;if(typeof T=="function")z=function(){T(X)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,Z=E.port2;E.port1.onmessage=X,z=function(){Z.postMessage(null)}}else z=function(){b(X,0)};function ne(F){se=F,me||(me=!0,z())}function ae(F,ee){re=b(function(){F(r.unstable_now())},ee)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(F){F.callback=null},r.unstable_continueExecution=function(){B||N||(B=!0,ne(A))},r.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<F?Math.floor(1e3/F):5},r.unstable_getCurrentPriorityLevel=function(){return _},r.unstable_getFirstCallbackNode=function(){return i(h)},r.unstable_next=function(F){switch(_){case 1:case 2:case 3:var ee=3;break;default:ee=_}var le=_;_=ee;try{return F()}finally{_=le}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(F,ee){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var le=_;_=F;try{return ee()}finally{_=le}},r.unstable_scheduleCallback=function(F,ee,le){var M=r.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?M+le:M):le=M,F){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=le+Y,F={id:j++,callback:ee,priorityLevel:F,startTime:le,expirationTime:Y,sortIndex:-1},le>M?(F.sortIndex=le,l(v,F),i(h)===null&&F===i(v)&&(P?(k(re),re=-1):P=!0,ae(O,le-M))):(F.sortIndex=Y,l(h,F),B||N||(B=!0,ne(A))),F},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(F){var ee=_;return function(){var le=_;_=ee;try{return F.apply(this,arguments)}finally{_=le}}}})(sc)),sc}var vm;function Ih(){return vm||(vm=1,tc.exports=$h()),tc.exports}var jm;function Dh(){if(jm)return ss;jm=1;var r=yc(),l=Ih();function i(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)s+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=new Set,u={};function p(t,s){x(t,s),x(t+"Capture",s)}function x(t,s){for(u[t]=s,t=0;t<s.length;t++)d.add(s[t])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j={},y={};function _(t){return h.call(y,t)?!0:h.call(j,t)?!1:v.test(t)?y[t]=!0:(j[t]=!0,!1)}function N(t,s,n,a){if(n!==null&&n.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function B(t,s,n,a){if(s===null||typeof s>"u"||N(t,s,n,a))return!0;if(a)return!1;if(n!==null)switch(n.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function P(t,s,n,a,o,c,f){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=s,this.sanitizeURL=c,this.removeEmptyString=f}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){b[t]=new P(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];b[s]=new P(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){b[t]=new P(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){b[t]=new P(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){b[t]=new P(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){b[t]=new P(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){b[t]=new P(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){b[t]=new P(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){b[t]=new P(t,5,!1,t.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function T(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(k,T);b[s]=new P(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(k,T);b[s]=new P(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(k,T);b[s]=new P(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){b[t]=new P(t,1,!1,t.toLowerCase(),null,!1,!1)}),b.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){b[t]=new P(t,1,!1,t.toLowerCase(),null,!0,!0)});function U(t,s,n,a){var o=b.hasOwnProperty(s)?b[s]:null;(o!==null?o.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(B(s,n,o,a)&&(n=null),a||o===null?_(s)&&(n===null?t.removeAttribute(s):t.setAttribute(s,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(s=o.attributeName,a=o.attributeNamespace,n===null?t.removeAttribute(s):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,a?t.setAttributeNS(a,s,n):t.setAttribute(s,n))))}var O=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),me=Symbol.for("react.portal"),se=Symbol.for("react.fragment"),re=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),I=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),F=Symbol.iterator;function ee(t){return t===null||typeof t!="object"?null:(t=F&&t[F]||t["@@iterator"],typeof t=="function"?t:null)}var le=Object.assign,M;function Y(t){if(M===void 0)try{throw Error()}catch(n){var s=n.stack.trim().match(/\n( *(at )?)/);M=s&&s[1]||""}return`
`+M+t}var je=!1;function we(t,s){if(!t||je)return"";je=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(Q){var a=Q}Reflect.construct(t,[],s)}else{try{s.call()}catch(Q){a=Q}t.call(s.prototype)}else{try{throw Error()}catch(Q){a=Q}t()}}catch(Q){if(Q&&a&&typeof Q.stack=="string"){for(var o=Q.stack.split(`
`),c=a.stack.split(`
`),f=o.length-1,S=c.length-1;1<=f&&0<=S&&o[f]!==c[S];)S--;for(;1<=f&&0<=S;f--,S--)if(o[f]!==c[S]){if(f!==1||S!==1)do if(f--,S--,0>S||o[f]!==c[S]){var L=`
`+o[f].replace(" at new "," at ");return t.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",t.displayName)),L}while(1<=f&&0<=S);break}}}finally{je=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Y(t):""}function W(t){switch(t.tag){case 5:return Y(t.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return t=we(t.type,!1),t;case 11:return t=we(t.type.render,!1),t;case 1:return t=we(t.type,!0),t;default:return""}}function ce(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case se:return"Fragment";case me:return"Portal";case H:return"Profiler";case re:return"StrictMode";case z:return"Suspense";case E:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case I:return(t.displayName||"Context")+".Consumer";case K:return(t._context.displayName||"Context")+".Provider";case X:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Z:return s=t.displayName||null,s!==null?s:ce(t.type)||"Memo";case ne:s=t._payload,t=t._init;try{return ce(t(s))}catch{}}return null}function ue(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(s);case 8:return s===re?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function he(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ae(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function w(t){var s=Ae(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,c=n.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return o.call(this)},set:function(f){a=""+f,c.call(this,f)}}),Object.defineProperty(t,s,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(f){a=""+f},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function $(t){t._valueTracker||(t._valueTracker=w(t))}function G(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var n=s.getValue(),a="";return t&&(a=Ae(t)?t.checked?"true":"false":t.value),t=a,t!==n?(s.setValue(t),!0):!1}function ge(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ve(t,s){var n=s.checked;return le({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Se(t,s){var n=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;n=he(s.value!=null?s.value:n),t._wrapperState={initialChecked:a,initialValue:n,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Re(t,s){s=s.checked,s!=null&&U(t,"checked",s,!1)}function xe(t,s){Re(t,s);var n=he(s.value),a=s.type;if(n!=null)a==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?ze(t,s.type,n):s.hasOwnProperty("defaultValue")&&ze(t,s.type,he(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function Qe(t,s,n){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,n||s===t.value||(t.value=s),t.defaultValue=s}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ze(t,s,n){(s!=="number"||ge(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var te=Array.isArray;function Pe(t,s,n,a){if(t=t.options,s){s={};for(var o=0;o<n.length;o++)s["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=s.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&a&&(t[n].defaultSelected=!0)}else{for(n=""+he(n),s=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,a&&(t[o].defaultSelected=!0);return}s!==null||t[o].disabled||(s=t[o])}s!==null&&(s.selected=!0)}}function ke(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(i(91));return le({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function be(t,s){var n=s.value;if(n==null){if(n=s.children,s=s.defaultValue,n!=null){if(s!=null)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}s=n}s==null&&(s=""),n=s}t._wrapperState={initialValue:he(n)}}function Le(t,s){var n=he(s.value),a=he(s.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),s.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),a!=null&&(t.defaultValue=""+a)}function at(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function mt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function C(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?mt(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Me,qe=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,n,a,o){MSApp.execUnsafeLocalFunction(function(){return t(s,n,a,o)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Me=Me||document.createElement("div"),Me.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Me.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function it(t,s){if(s){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=s;return}}t.textContent=s}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bt=["Webkit","ms","Moz","O"];Object.keys(ft).forEach(function(t){Bt.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),ft[s]=ft[t]})});function Ve(t,s,n){return s==null||typeof s=="boolean"||s===""?"":n||typeof s!="number"||s===0||ft.hasOwnProperty(t)&&ft[t]?(""+s).trim():s+"px"}function mr(t,s){t=t.style;for(var n in s)if(s.hasOwnProperty(n)){var a=n.indexOf("--")===0,o=Ve(n,s[n],a);n==="float"&&(n="cssFloat"),a?t.setProperty(n,o):t[n]=o}}var ta=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ds(t,s){if(s){if(ta[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(i(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(i(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(i(61))}if(s.style!=null&&typeof s.style!="object")throw Error(i(62))}}function R(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ne=null;function Ke(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kt=null,lt=null,vt=null;function ls(t){if(t=ja(t)){if(typeof kt!="function")throw Error(i(280));var s=t.stateNode;s&&(s=di(s),kt(t.stateNode,t.type,s))}}function os(t){lt?vt?vt.push(t):vt=[t]:lt=t}function cs(){if(lt){var t=lt,s=vt;if(vt=lt=null,ls(t),s)for(t=0;t<s.length;t++)ls(s[t])}}function Ss(t,s){return t(s)}function Ht(){}var Gs=!1;function Fr(t,s,n){if(Gs)return t(s,n);Gs=!0;try{return Ss(t,s,n)}finally{Gs=!1,(lt!==null||vt!==null)&&(Ht(),cs())}}function Or(t,s){var n=t.stateNode;if(n===null)return null;var a=di(n);if(a===null)return null;n=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(i(231,s,typeof n));return n}var V=!1;if(g)try{var _e={};Object.defineProperty(_e,"passive",{get:function(){V=!0}}),window.addEventListener("test",_e,_e),window.removeEventListener("test",_e,_e)}catch{V=!1}function Te(t,s,n,a,o,c,f,S,L){var Q=Array.prototype.slice.call(arguments,3);try{s.apply(n,Q)}catch(de){this.onError(de)}}var Ue=!1,tt=null,st=!1,Rt=null,Rp={onError:function(t){Ue=!0,tt=t}};function Fp(t,s,n,a,o,c,f,S,L){Ue=!1,tt=null,Te.apply(Rp,arguments)}function Op(t,s,n,a,o,c,f,S,L){if(Fp.apply(this,arguments),Ue){if(Ue){var Q=tt;Ue=!1,tt=null}else throw Error(i(198));st||(st=!0,Rt=Q)}}function Ur(t){var s=t,n=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(n=s.return),t=s.return;while(t)}return s.tag===3?n:null}function Dc(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Rc(t){if(Ur(t)!==t)throw Error(i(188))}function Up(t){var s=t.alternate;if(!s){if(s=Ur(t),s===null)throw Error(i(188));return s!==t?null:t}for(var n=t,a=s;;){var o=n.return;if(o===null)break;var c=o.alternate;if(c===null){if(a=o.return,a!==null){n=a;continue}break}if(o.child===c.child){for(c=o.child;c;){if(c===n)return Rc(o),t;if(c===a)return Rc(o),s;c=c.sibling}throw Error(i(188))}if(n.return!==a.return)n=o,a=c;else{for(var f=!1,S=o.child;S;){if(S===n){f=!0,n=o,a=c;break}if(S===a){f=!0,a=o,n=c;break}S=S.sibling}if(!f){for(S=c.child;S;){if(S===n){f=!0,n=c,a=o;break}if(S===a){f=!0,a=c,n=o;break}S=S.sibling}if(!f)throw Error(i(189))}}if(n.alternate!==a)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?t:s}function Fc(t){return t=Up(t),t!==null?Oc(t):null}function Oc(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Oc(t);if(s!==null)return s;t=t.sibling}return null}var Uc=l.unstable_scheduleCallback,Bc=l.unstable_cancelCallback,Bp=l.unstable_shouldYield,Hp=l.unstable_requestPaint,St=l.unstable_now,Vp=l.unstable_getCurrentPriorityLevel,gl=l.unstable_ImmediatePriority,Hc=l.unstable_UserBlockingPriority,Va=l.unstable_NormalPriority,Kp=l.unstable_LowPriority,Vc=l.unstable_IdlePriority,Ka=null,Rs=null;function qp(t){if(Rs&&typeof Rs.onCommitFiberRoot=="function")try{Rs.onCommitFiberRoot(Ka,t,void 0,(t.current.flags&128)===128)}catch{}}var Cs=Math.clz32?Math.clz32:Gp,Wp=Math.log,Jp=Math.LN2;function Gp(t){return t>>>=0,t===0?32:31-(Wp(t)/Jp|0)|0}var qa=64,Wa=4194304;function sa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ja(t,s){var n=t.pendingLanes;if(n===0)return 0;var a=0,o=t.suspendedLanes,c=t.pingedLanes,f=n&268435455;if(f!==0){var S=f&~o;S!==0?a=sa(S):(c&=f,c!==0&&(a=sa(c)))}else f=n&~o,f!==0?a=sa(f):c!==0&&(a=sa(c));if(a===0)return 0;if(s!==0&&s!==a&&(s&o)===0&&(o=a&-a,c=s&-s,o>=c||o===16&&(c&4194240)!==0))return s;if((a&4)!==0&&(a|=n&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)n=31-Cs(s),o=1<<n,a|=t[n],s&=~o;return a}function Qp(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zp(t,s){for(var n=t.suspendedLanes,a=t.pingedLanes,o=t.expirationTimes,c=t.pendingLanes;0<c;){var f=31-Cs(c),S=1<<f,L=o[f];L===-1?((S&n)===0||(S&a)!==0)&&(o[f]=Qp(S,s)):L<=s&&(t.expiredLanes|=S),c&=~S}}function yl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kc(){var t=qa;return qa<<=1,(qa&4194240)===0&&(qa=64),t}function vl(t){for(var s=[],n=0;31>n;n++)s.push(t);return s}function ra(t,s,n){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Cs(s),t[s]=n}function Yp(t,s){var n=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Cs(n),c=1<<o;s[o]=0,a[o]=-1,t[o]=-1,n&=~c}}function jl(t,s){var n=t.entangledLanes|=s;for(t=t.entanglements;n;){var a=31-Cs(n),o=1<<a;o&s|t[a]&s&&(t[a]|=s),n&=~o}}var ct=0;function qc(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Wc,bl,Jc,Gc,Qc,Nl=!1,Ga=[],pr=null,xr=null,hr=null,na=new Map,aa=new Map,fr=[],Xp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zc(t,s){switch(t){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":na.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":aa.delete(s.pointerId)}}function ia(t,s,n,a,o,c){return t===null||t.nativeEvent!==c?(t={blockedOn:s,domEventName:n,eventSystemFlags:a,nativeEvent:c,targetContainers:[o]},s!==null&&(s=ja(s),s!==null&&bl(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,o!==null&&s.indexOf(o)===-1&&s.push(o),t)}function ex(t,s,n,a,o){switch(s){case"focusin":return pr=ia(pr,t,s,n,a,o),!0;case"dragenter":return xr=ia(xr,t,s,n,a,o),!0;case"mouseover":return hr=ia(hr,t,s,n,a,o),!0;case"pointerover":var c=o.pointerId;return na.set(c,ia(na.get(c)||null,t,s,n,a,o)),!0;case"gotpointercapture":return c=o.pointerId,aa.set(c,ia(aa.get(c)||null,t,s,n,a,o)),!0}return!1}function Yc(t){var s=Br(t.target);if(s!==null){var n=Ur(s);if(n!==null){if(s=n.tag,s===13){if(s=Dc(n),s!==null){t.blockedOn=s,Qc(t.priority,function(){Jc(n)});return}}else if(s===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qa(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var n=_l(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var a=new n.constructor(n.type,n);Ne=a,n.target.dispatchEvent(a),Ne=null}else return s=ja(n),s!==null&&bl(s),t.blockedOn=n,!1;s.shift()}return!0}function Xc(t,s,n){Qa(t)&&n.delete(s)}function tx(){Nl=!1,pr!==null&&Qa(pr)&&(pr=null),xr!==null&&Qa(xr)&&(xr=null),hr!==null&&Qa(hr)&&(hr=null),na.forEach(Xc),aa.forEach(Xc)}function la(t,s){t.blockedOn===s&&(t.blockedOn=null,Nl||(Nl=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,tx)))}function oa(t){function s(o){return la(o,t)}if(0<Ga.length){la(Ga[0],t);for(var n=1;n<Ga.length;n++){var a=Ga[n];a.blockedOn===t&&(a.blockedOn=null)}}for(pr!==null&&la(pr,t),xr!==null&&la(xr,t),hr!==null&&la(hr,t),na.forEach(s),aa.forEach(s),n=0;n<fr.length;n++)a=fr[n],a.blockedOn===t&&(a.blockedOn=null);for(;0<fr.length&&(n=fr[0],n.blockedOn===null);)Yc(n),n.blockedOn===null&&fr.shift()}var un=O.ReactCurrentBatchConfig,Za=!0;function sx(t,s,n,a){var o=ct,c=un.transition;un.transition=null;try{ct=1,wl(t,s,n,a)}finally{ct=o,un.transition=c}}function rx(t,s,n,a){var o=ct,c=un.transition;un.transition=null;try{ct=4,wl(t,s,n,a)}finally{ct=o,un.transition=c}}function wl(t,s,n,a){if(Za){var o=_l(t,s,n,a);if(o===null)Ul(t,s,a,Ya,n),Zc(t,a);else if(ex(o,t,s,n,a))a.stopPropagation();else if(Zc(t,a),s&4&&-1<Xp.indexOf(t)){for(;o!==null;){var c=ja(o);if(c!==null&&Wc(c),c=_l(t,s,n,a),c===null&&Ul(t,s,a,Ya,n),c===o)break;o=c}o!==null&&a.stopPropagation()}else Ul(t,s,a,null,n)}}var Ya=null;function _l(t,s,n,a){if(Ya=null,t=Ke(a),t=Br(t),t!==null)if(s=Ur(t),s===null)t=null;else if(n=s.tag,n===13){if(t=Dc(s),t!==null)return t;t=null}else if(n===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Ya=t,null}function ed(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vp()){case gl:return 1;case Hc:return 4;case Va:case Kp:return 16;case Vc:return 536870912;default:return 16}default:return 16}}var gr=null,kl=null,Xa=null;function td(){if(Xa)return Xa;var t,s=kl,n=s.length,a,o="value"in gr?gr.value:gr.textContent,c=o.length;for(t=0;t<n&&s[t]===o[t];t++);var f=n-t;for(a=1;a<=f&&s[n-a]===o[c-a];a++);return Xa=o.slice(t,1<a?1-a:void 0)}function ei(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ti(){return!0}function sd(){return!1}function ds(t){function s(n,a,o,c,f){this._reactName=n,this._targetInst=o,this.type=a,this.nativeEvent=c,this.target=f,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(n=t[S],this[S]=n?n(c):c[S]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?ti:sd,this.isPropagationStopped=sd,this}return le(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),s}var mn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sl=ds(mn),ca=le({},mn,{view:0,detail:0}),nx=ds(ca),Cl,Pl,da,si=le({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Al,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==da&&(da&&t.type==="mousemove"?(Cl=t.screenX-da.screenX,Pl=t.screenY-da.screenY):Pl=Cl=0,da=t),Cl)},movementY:function(t){return"movementY"in t?t.movementY:Pl}}),rd=ds(si),ax=le({},si,{dataTransfer:0}),ix=ds(ax),lx=le({},ca,{relatedTarget:0}),El=ds(lx),ox=le({},mn,{animationName:0,elapsedTime:0,pseudoElement:0}),cx=ds(ox),dx=le({},mn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ux=ds(dx),mx=le({},mn,{data:0}),nd=ds(mx),px={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fx(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=hx[t])?!!s[t]:!1}function Al(){return fx}var gx=le({},ca,{key:function(t){if(t.key){var s=px[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=ei(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Al,charCode:function(t){return t.type==="keypress"?ei(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ei(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yx=ds(gx),vx=le({},si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ad=ds(vx),jx=le({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Al}),bx=ds(jx),Nx=le({},mn,{propertyName:0,elapsedTime:0,pseudoElement:0}),wx=ds(Nx),_x=le({},si,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kx=ds(_x),Sx=[9,13,27,32],Tl=g&&"CompositionEvent"in window,ua=null;g&&"documentMode"in document&&(ua=document.documentMode);var Cx=g&&"TextEvent"in window&&!ua,id=g&&(!Tl||ua&&8<ua&&11>=ua),ld=" ",od=!1;function cd(t,s){switch(t){case"keyup":return Sx.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pn=!1;function Px(t,s){switch(t){case"compositionend":return dd(s);case"keypress":return s.which!==32?null:(od=!0,ld);case"textInput":return t=s.data,t===ld&&od?null:t;default:return null}}function Ex(t,s){if(pn)return t==="compositionend"||!Tl&&cd(t,s)?(t=td(),Xa=kl=gr=null,pn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return id&&s.locale!=="ko"?null:s.data;default:return null}}var Ax={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ud(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Ax[t.type]:s==="textarea"}function md(t,s,n,a){os(a),s=li(s,"onChange"),0<s.length&&(n=new Sl("onChange","change",null,n,a),t.push({event:n,listeners:s}))}var ma=null,pa=null;function Tx(t){Ad(t,0)}function ri(t){var s=yn(t);if(G(s))return t}function zx(t,s){if(t==="change")return s}var pd=!1;if(g){var zl;if(g){var Ll="oninput"in document;if(!Ll){var xd=document.createElement("div");xd.setAttribute("oninput","return;"),Ll=typeof xd.oninput=="function"}zl=Ll}else zl=!1;pd=zl&&(!document.documentMode||9<document.documentMode)}function hd(){ma&&(ma.detachEvent("onpropertychange",fd),pa=ma=null)}function fd(t){if(t.propertyName==="value"&&ri(pa)){var s=[];md(s,pa,t,Ke(t)),Fr(Tx,s)}}function Lx(t,s,n){t==="focusin"?(hd(),ma=s,pa=n,ma.attachEvent("onpropertychange",fd)):t==="focusout"&&hd()}function Mx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ri(pa)}function $x(t,s){if(t==="click")return ri(s)}function Ix(t,s){if(t==="input"||t==="change")return ri(s)}function Dx(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Ps=typeof Object.is=="function"?Object.is:Dx;function xa(t,s){if(Ps(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var n=Object.keys(t),a=Object.keys(s);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var o=n[a];if(!h.call(s,o)||!Ps(t[o],s[o]))return!1}return!0}function gd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yd(t,s){var n=gd(t);t=0;for(var a;n;){if(n.nodeType===3){if(a=t+n.textContent.length,t<=s&&a>=s)return{node:n,offset:s-t};t=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gd(n)}}function vd(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?vd(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function jd(){for(var t=window,s=ge();s instanceof t.HTMLIFrameElement;){try{var n=typeof s.contentWindow.location.href=="string"}catch{n=!1}if(n)t=s.contentWindow;else break;s=ge(t.document)}return s}function Ml(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Rx(t){var s=jd(),n=t.focusedElem,a=t.selectionRange;if(s!==n&&n&&n.ownerDocument&&vd(n.ownerDocument.documentElement,n)){if(a!==null&&Ml(n)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in n)n.selectionStart=s,n.selectionEnd=Math.min(t,n.value.length);else if(t=(s=n.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,c=Math.min(a.start,o);a=a.end===void 0?c:Math.min(a.end,o),!t.extend&&c>a&&(o=a,a=c,c=o),o=yd(n,c);var f=yd(n,a);o&&f&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==f.node||t.focusOffset!==f.offset)&&(s=s.createRange(),s.setStart(o.node,o.offset),t.removeAllRanges(),c>a?(t.addRange(s),t.extend(f.node,f.offset)):(s.setEnd(f.node,f.offset),t.addRange(s)))}}for(s=[],t=n;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<s.length;n++)t=s[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fx=g&&"documentMode"in document&&11>=document.documentMode,xn=null,$l=null,ha=null,Il=!1;function bd(t,s,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Il||xn==null||xn!==ge(a)||(a=xn,"selectionStart"in a&&Ml(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ha&&xa(ha,a)||(ha=a,a=li($l,"onSelect"),0<a.length&&(s=new Sl("onSelect","select",null,s,n),t.push({event:s,listeners:a}),s.target=xn)))}function ni(t,s){var n={};return n[t.toLowerCase()]=s.toLowerCase(),n["Webkit"+t]="webkit"+s,n["Moz"+t]="moz"+s,n}var hn={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionend:ni("Transition","TransitionEnd")},Dl={},Nd={};g&&(Nd=document.createElement("div").style,"AnimationEvent"in window||(delete hn.animationend.animation,delete hn.animationiteration.animation,delete hn.animationstart.animation),"TransitionEvent"in window||delete hn.transitionend.transition);function ai(t){if(Dl[t])return Dl[t];if(!hn[t])return t;var s=hn[t],n;for(n in s)if(s.hasOwnProperty(n)&&n in Nd)return Dl[t]=s[n];return t}var wd=ai("animationend"),_d=ai("animationiteration"),kd=ai("animationstart"),Sd=ai("transitionend"),Cd=new Map,Pd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yr(t,s){Cd.set(t,s),p(s,[t])}for(var Rl=0;Rl<Pd.length;Rl++){var Fl=Pd[Rl],Ox=Fl.toLowerCase(),Ux=Fl[0].toUpperCase()+Fl.slice(1);yr(Ox,"on"+Ux)}yr(wd,"onAnimationEnd"),yr(_d,"onAnimationIteration"),yr(kd,"onAnimationStart"),yr("dblclick","onDoubleClick"),yr("focusin","onFocus"),yr("focusout","onBlur"),yr(Sd,"onTransitionEnd"),x("onMouseEnter",["mouseout","mouseover"]),x("onMouseLeave",["mouseout","mouseover"]),x("onPointerEnter",["pointerout","pointerover"]),x("onPointerLeave",["pointerout","pointerover"]),p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),p("onBeforeInput",["compositionend","keypress","textInput","paste"]),p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bx=new Set("cancel close invalid load scroll toggle".split(" ").concat(fa));function Ed(t,s,n){var a=t.type||"unknown-event";t.currentTarget=n,Op(a,s,void 0,t),t.currentTarget=null}function Ad(t,s){s=(s&4)!==0;for(var n=0;n<t.length;n++){var a=t[n],o=a.event;a=a.listeners;e:{var c=void 0;if(s)for(var f=a.length-1;0<=f;f--){var S=a[f],L=S.instance,Q=S.currentTarget;if(S=S.listener,L!==c&&o.isPropagationStopped())break e;Ed(o,S,Q),c=L}else for(f=0;f<a.length;f++){if(S=a[f],L=S.instance,Q=S.currentTarget,S=S.listener,L!==c&&o.isPropagationStopped())break e;Ed(o,S,Q),c=L}}}if(st)throw t=Rt,st=!1,Rt=null,t}function xt(t,s){var n=s[Wl];n===void 0&&(n=s[Wl]=new Set);var a=t+"__bubble";n.has(a)||(Td(s,t,2,!1),n.add(a))}function Ol(t,s,n){var a=0;s&&(a|=4),Td(n,t,a,s)}var ii="_reactListening"+Math.random().toString(36).slice(2);function ga(t){if(!t[ii]){t[ii]=!0,d.forEach(function(n){n!=="selectionchange"&&(Bx.has(n)||Ol(n,!1,t),Ol(n,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ii]||(s[ii]=!0,Ol("selectionchange",!1,s))}}function Td(t,s,n,a){switch(ed(s)){case 1:var o=sx;break;case 4:o=rx;break;default:o=wl}n=o.bind(null,s,n,t),o=void 0,!V||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(o=!0),a?o!==void 0?t.addEventListener(s,n,{capture:!0,passive:o}):t.addEventListener(s,n,!0):o!==void 0?t.addEventListener(s,n,{passive:o}):t.addEventListener(s,n,!1)}function Ul(t,s,n,a,o){var c=a;if((s&1)===0&&(s&2)===0&&a!==null)e:for(;;){if(a===null)return;var f=a.tag;if(f===3||f===4){var S=a.stateNode.containerInfo;if(S===o||S.nodeType===8&&S.parentNode===o)break;if(f===4)for(f=a.return;f!==null;){var L=f.tag;if((L===3||L===4)&&(L=f.stateNode.containerInfo,L===o||L.nodeType===8&&L.parentNode===o))return;f=f.return}for(;S!==null;){if(f=Br(S),f===null)return;if(L=f.tag,L===5||L===6){a=c=f;continue e}S=S.parentNode}}a=a.return}Fr(function(){var Q=c,de=Ke(n),pe=[];e:{var oe=Cd.get(t);if(oe!==void 0){var Ce=Sl,$e=t;switch(t){case"keypress":if(ei(n)===0)break e;case"keydown":case"keyup":Ce=yx;break;case"focusin":$e="focus",Ce=El;break;case"focusout":$e="blur",Ce=El;break;case"beforeblur":case"afterblur":Ce=El;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ce=rd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ce=ix;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ce=bx;break;case wd:case _d:case kd:Ce=cx;break;case Sd:Ce=wx;break;case"scroll":Ce=nx;break;case"wheel":Ce=kx;break;case"copy":case"cut":case"paste":Ce=ux;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ce=ad}var Fe=(s&4)!==0,Ct=!Fe&&t==="scroll",q=Fe?oe!==null?oe+"Capture":null:oe;Fe=[];for(var D=Q,J;D!==null;){J=D;var fe=J.stateNode;if(J.tag===5&&fe!==null&&(J=fe,q!==null&&(fe=Or(D,q),fe!=null&&Fe.push(ya(D,fe,J)))),Ct)break;D=D.return}0<Fe.length&&(oe=new Ce(oe,$e,null,n,de),pe.push({event:oe,listeners:Fe}))}}if((s&7)===0){e:{if(oe=t==="mouseover"||t==="pointerover",Ce=t==="mouseout"||t==="pointerout",oe&&n!==Ne&&($e=n.relatedTarget||n.fromElement)&&(Br($e)||$e[Qs]))break e;if((Ce||oe)&&(oe=de.window===de?de:(oe=de.ownerDocument)?oe.defaultView||oe.parentWindow:window,Ce?($e=n.relatedTarget||n.toElement,Ce=Q,$e=$e?Br($e):null,$e!==null&&(Ct=Ur($e),$e!==Ct||$e.tag!==5&&$e.tag!==6)&&($e=null)):(Ce=null,$e=Q),Ce!==$e)){if(Fe=rd,fe="onMouseLeave",q="onMouseEnter",D="mouse",(t==="pointerout"||t==="pointerover")&&(Fe=ad,fe="onPointerLeave",q="onPointerEnter",D="pointer"),Ct=Ce==null?oe:yn(Ce),J=$e==null?oe:yn($e),oe=new Fe(fe,D+"leave",Ce,n,de),oe.target=Ct,oe.relatedTarget=J,fe=null,Br(de)===Q&&(Fe=new Fe(q,D+"enter",$e,n,de),Fe.target=J,Fe.relatedTarget=Ct,fe=Fe),Ct=fe,Ce&&$e)t:{for(Fe=Ce,q=$e,D=0,J=Fe;J;J=fn(J))D++;for(J=0,fe=q;fe;fe=fn(fe))J++;for(;0<D-J;)Fe=fn(Fe),D--;for(;0<J-D;)q=fn(q),J--;for(;D--;){if(Fe===q||q!==null&&Fe===q.alternate)break t;Fe=fn(Fe),q=fn(q)}Fe=null}else Fe=null;Ce!==null&&zd(pe,oe,Ce,Fe,!1),$e!==null&&Ct!==null&&zd(pe,Ct,$e,Fe,!0)}}e:{if(oe=Q?yn(Q):window,Ce=oe.nodeName&&oe.nodeName.toLowerCase(),Ce==="select"||Ce==="input"&&oe.type==="file")var Oe=zx;else if(ud(oe))if(pd)Oe=Ix;else{Oe=Mx;var We=Lx}else(Ce=oe.nodeName)&&Ce.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Oe=$x);if(Oe&&(Oe=Oe(t,Q))){md(pe,Oe,n,de);break e}We&&We(t,oe,Q),t==="focusout"&&(We=oe._wrapperState)&&We.controlled&&oe.type==="number"&&ze(oe,"number",oe.value)}switch(We=Q?yn(Q):window,t){case"focusin":(ud(We)||We.contentEditable==="true")&&(xn=We,$l=Q,ha=null);break;case"focusout":ha=$l=xn=null;break;case"mousedown":Il=!0;break;case"contextmenu":case"mouseup":case"dragend":Il=!1,bd(pe,n,de);break;case"selectionchange":if(Fx)break;case"keydown":case"keyup":bd(pe,n,de)}var Je;if(Tl)e:{switch(t){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else pn?cd(t,n)&&(Ge="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Ge="onCompositionStart");Ge&&(id&&n.locale!=="ko"&&(pn||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&pn&&(Je=td()):(gr=de,kl="value"in gr?gr.value:gr.textContent,pn=!0)),We=li(Q,Ge),0<We.length&&(Ge=new nd(Ge,t,null,n,de),pe.push({event:Ge,listeners:We}),Je?Ge.data=Je:(Je=dd(n),Je!==null&&(Ge.data=Je)))),(Je=Cx?Px(t,n):Ex(t,n))&&(Q=li(Q,"onBeforeInput"),0<Q.length&&(de=new nd("onBeforeInput","beforeinput",null,n,de),pe.push({event:de,listeners:Q}),de.data=Je))}Ad(pe,s)})}function ya(t,s,n){return{instance:t,listener:s,currentTarget:n}}function li(t,s){for(var n=s+"Capture",a=[];t!==null;){var o=t,c=o.stateNode;o.tag===5&&c!==null&&(o=c,c=Or(t,n),c!=null&&a.unshift(ya(t,c,o)),c=Or(t,s),c!=null&&a.push(ya(t,c,o))),t=t.return}return a}function fn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zd(t,s,n,a,o){for(var c=s._reactName,f=[];n!==null&&n!==a;){var S=n,L=S.alternate,Q=S.stateNode;if(L!==null&&L===a)break;S.tag===5&&Q!==null&&(S=Q,o?(L=Or(n,c),L!=null&&f.unshift(ya(n,L,S))):o||(L=Or(n,c),L!=null&&f.push(ya(n,L,S)))),n=n.return}f.length!==0&&t.push({event:s,listeners:f})}var Hx=/\r\n?/g,Vx=/\u0000|\uFFFD/g;function Ld(t){return(typeof t=="string"?t:""+t).replace(Hx,`
`).replace(Vx,"")}function oi(t,s,n){if(s=Ld(s),Ld(t)!==s&&n)throw Error(i(425))}function ci(){}var Bl=null,Hl=null;function Vl(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Kl=typeof setTimeout=="function"?setTimeout:void 0,Kx=typeof clearTimeout=="function"?clearTimeout:void 0,Md=typeof Promise=="function"?Promise:void 0,qx=typeof queueMicrotask=="function"?queueMicrotask:typeof Md<"u"?function(t){return Md.resolve(null).then(t).catch(Wx)}:Kl;function Wx(t){setTimeout(function(){throw t})}function ql(t,s){var n=s,a=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(a===0){t.removeChild(o),oa(s);return}a--}else n!=="$"&&n!=="$?"&&n!=="$!"||a++;n=o}while(n);oa(s)}function vr(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function $d(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(s===0)return t;s--}else n==="/$"&&s++}t=t.previousSibling}return null}var gn=Math.random().toString(36).slice(2),Fs="__reactFiber$"+gn,va="__reactProps$"+gn,Qs="__reactContainer$"+gn,Wl="__reactEvents$"+gn,Jx="__reactListeners$"+gn,Gx="__reactHandles$"+gn;function Br(t){var s=t[Fs];if(s)return s;for(var n=t.parentNode;n;){if(s=n[Qs]||n[Fs]){if(n=s.alternate,s.child!==null||n!==null&&n.child!==null)for(t=$d(t);t!==null;){if(n=t[Fs])return n;t=$d(t)}return s}t=n,n=t.parentNode}return null}function ja(t){return t=t[Fs]||t[Qs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(i(33))}function di(t){return t[va]||null}var Jl=[],vn=-1;function jr(t){return{current:t}}function ht(t){0>vn||(t.current=Jl[vn],Jl[vn]=null,vn--)}function pt(t,s){vn++,Jl[vn]=t.current,t.current=s}var br={},Vt=jr(br),Zt=jr(!1),Hr=br;function jn(t,s){var n=t.type.contextTypes;if(!n)return br;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var o={},c;for(c in n)o[c]=s[c];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),o}function Yt(t){return t=t.childContextTypes,t!=null}function ui(){ht(Zt),ht(Vt)}function Id(t,s,n){if(Vt.current!==br)throw Error(i(168));pt(Vt,s),pt(Zt,n)}function Dd(t,s,n){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return n;a=a.getChildContext();for(var o in a)if(!(o in s))throw Error(i(108,ue(t)||"Unknown",o));return le({},n,a)}function mi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||br,Hr=Vt.current,pt(Vt,t),pt(Zt,Zt.current),!0}function Rd(t,s,n){var a=t.stateNode;if(!a)throw Error(i(169));n?(t=Dd(t,s,Hr),a.__reactInternalMemoizedMergedChildContext=t,ht(Zt),ht(Vt),pt(Vt,t)):ht(Zt),pt(Zt,n)}var Zs=null,pi=!1,Gl=!1;function Fd(t){Zs===null?Zs=[t]:Zs.push(t)}function Qx(t){pi=!0,Fd(t)}function Nr(){if(!Gl&&Zs!==null){Gl=!0;var t=0,s=ct;try{var n=Zs;for(ct=1;t<n.length;t++){var a=n[t];do a=a(!0);while(a!==null)}Zs=null,pi=!1}catch(o){throw Zs!==null&&(Zs=Zs.slice(t+1)),Uc(gl,Nr),o}finally{ct=s,Gl=!1}}return null}var bn=[],Nn=0,xi=null,hi=0,gs=[],ys=0,Vr=null,Ys=1,Xs="";function Kr(t,s){bn[Nn++]=hi,bn[Nn++]=xi,xi=t,hi=s}function Od(t,s,n){gs[ys++]=Ys,gs[ys++]=Xs,gs[ys++]=Vr,Vr=t;var a=Ys;t=Xs;var o=32-Cs(a)-1;a&=~(1<<o),n+=1;var c=32-Cs(s)+o;if(30<c){var f=o-o%5;c=(a&(1<<f)-1).toString(32),a>>=f,o-=f,Ys=1<<32-Cs(s)+o|n<<o|a,Xs=c+t}else Ys=1<<c|n<<o|a,Xs=t}function Ql(t){t.return!==null&&(Kr(t,1),Od(t,1,0))}function Zl(t){for(;t===xi;)xi=bn[--Nn],bn[Nn]=null,hi=bn[--Nn],bn[Nn]=null;for(;t===Vr;)Vr=gs[--ys],gs[ys]=null,Xs=gs[--ys],gs[ys]=null,Ys=gs[--ys],gs[ys]=null}var us=null,ms=null,gt=!1,Es=null;function Ud(t,s){var n=Ns(5,null,null,0);n.elementType="DELETED",n.stateNode=s,n.return=t,s=t.deletions,s===null?(t.deletions=[n],t.flags|=16):s.push(n)}function Bd(t,s){switch(t.tag){case 5:var n=t.type;return s=s.nodeType!==1||n.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,us=t,ms=vr(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,us=t,ms=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(n=Vr!==null?{id:Ys,overflow:Xs}:null,t.memoizedState={dehydrated:s,treeContext:n,retryLane:1073741824},n=Ns(18,null,null,0),n.stateNode=s,n.return=t,t.child=n,us=t,ms=null,!0):!1;default:return!1}}function Yl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xl(t){if(gt){var s=ms;if(s){var n=s;if(!Bd(t,s)){if(Yl(t))throw Error(i(418));s=vr(n.nextSibling);var a=us;s&&Bd(t,s)?Ud(a,n):(t.flags=t.flags&-4097|2,gt=!1,us=t)}}else{if(Yl(t))throw Error(i(418));t.flags=t.flags&-4097|2,gt=!1,us=t}}}function Hd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;us=t}function fi(t){if(t!==us)return!1;if(!gt)return Hd(t),gt=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Vl(t.type,t.memoizedProps)),s&&(s=ms)){if(Yl(t))throw Vd(),Error(i(418));for(;s;)Ud(t,s),s=vr(s.nextSibling)}if(Hd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(s===0){ms=vr(t.nextSibling);break e}s--}else n!=="$"&&n!=="$!"&&n!=="$?"||s++}t=t.nextSibling}ms=null}}else ms=us?vr(t.stateNode.nextSibling):null;return!0}function Vd(){for(var t=ms;t;)t=vr(t.nextSibling)}function wn(){ms=us=null,gt=!1}function eo(t){Es===null?Es=[t]:Es.push(t)}var Zx=O.ReactCurrentBatchConfig;function ba(t,s,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(i(309));var a=n.stateNode}if(!a)throw Error(i(147,t));var o=a,c=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===c?s.ref:(s=function(f){var S=o.refs;f===null?delete S[c]:S[c]=f},s._stringRef=c,s)}if(typeof t!="string")throw Error(i(284));if(!n._owner)throw Error(i(290,t))}return t}function gi(t,s){throw t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Kd(t){var s=t._init;return s(t._payload)}function qd(t){function s(q,D){if(t){var J=q.deletions;J===null?(q.deletions=[D],q.flags|=16):J.push(D)}}function n(q,D){if(!t)return null;for(;D!==null;)s(q,D),D=D.sibling;return null}function a(q,D){for(q=new Map;D!==null;)D.key!==null?q.set(D.key,D):q.set(D.index,D),D=D.sibling;return q}function o(q,D){return q=Ar(q,D),q.index=0,q.sibling=null,q}function c(q,D,J){return q.index=J,t?(J=q.alternate,J!==null?(J=J.index,J<D?(q.flags|=2,D):J):(q.flags|=2,D)):(q.flags|=1048576,D)}function f(q){return t&&q.alternate===null&&(q.flags|=2),q}function S(q,D,J,fe){return D===null||D.tag!==6?(D=qo(J,q.mode,fe),D.return=q,D):(D=o(D,J),D.return=q,D)}function L(q,D,J,fe){var Oe=J.type;return Oe===se?de(q,D,J.props.children,fe,J.key):D!==null&&(D.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===ne&&Kd(Oe)===D.type)?(fe=o(D,J.props),fe.ref=ba(q,D,J),fe.return=q,fe):(fe=Ui(J.type,J.key,J.props,null,q.mode,fe),fe.ref=ba(q,D,J),fe.return=q,fe)}function Q(q,D,J,fe){return D===null||D.tag!==4||D.stateNode.containerInfo!==J.containerInfo||D.stateNode.implementation!==J.implementation?(D=Wo(J,q.mode,fe),D.return=q,D):(D=o(D,J.children||[]),D.return=q,D)}function de(q,D,J,fe,Oe){return D===null||D.tag!==7?(D=Xr(J,q.mode,fe,Oe),D.return=q,D):(D=o(D,J),D.return=q,D)}function pe(q,D,J){if(typeof D=="string"&&D!==""||typeof D=="number")return D=qo(""+D,q.mode,J),D.return=q,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case A:return J=Ui(D.type,D.key,D.props,null,q.mode,J),J.ref=ba(q,null,D),J.return=q,J;case me:return D=Wo(D,q.mode,J),D.return=q,D;case ne:var fe=D._init;return pe(q,fe(D._payload),J)}if(te(D)||ee(D))return D=Xr(D,q.mode,J,null),D.return=q,D;gi(q,D)}return null}function oe(q,D,J,fe){var Oe=D!==null?D.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return Oe!==null?null:S(q,D,""+J,fe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case A:return J.key===Oe?L(q,D,J,fe):null;case me:return J.key===Oe?Q(q,D,J,fe):null;case ne:return Oe=J._init,oe(q,D,Oe(J._payload),fe)}if(te(J)||ee(J))return Oe!==null?null:de(q,D,J,fe,null);gi(q,J)}return null}function Ce(q,D,J,fe,Oe){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return q=q.get(J)||null,S(D,q,""+fe,Oe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case A:return q=q.get(fe.key===null?J:fe.key)||null,L(D,q,fe,Oe);case me:return q=q.get(fe.key===null?J:fe.key)||null,Q(D,q,fe,Oe);case ne:var We=fe._init;return Ce(q,D,J,We(fe._payload),Oe)}if(te(fe)||ee(fe))return q=q.get(J)||null,de(D,q,fe,Oe,null);gi(D,fe)}return null}function $e(q,D,J,fe){for(var Oe=null,We=null,Je=D,Ge=D=0,It=null;Je!==null&&Ge<J.length;Ge++){Je.index>Ge?(It=Je,Je=null):It=Je.sibling;var nt=oe(q,Je,J[Ge],fe);if(nt===null){Je===null&&(Je=It);break}t&&Je&&nt.alternate===null&&s(q,Je),D=c(nt,D,Ge),We===null?Oe=nt:We.sibling=nt,We=nt,Je=It}if(Ge===J.length)return n(q,Je),gt&&Kr(q,Ge),Oe;if(Je===null){for(;Ge<J.length;Ge++)Je=pe(q,J[Ge],fe),Je!==null&&(D=c(Je,D,Ge),We===null?Oe=Je:We.sibling=Je,We=Je);return gt&&Kr(q,Ge),Oe}for(Je=a(q,Je);Ge<J.length;Ge++)It=Ce(Je,q,Ge,J[Ge],fe),It!==null&&(t&&It.alternate!==null&&Je.delete(It.key===null?Ge:It.key),D=c(It,D,Ge),We===null?Oe=It:We.sibling=It,We=It);return t&&Je.forEach(function(Tr){return s(q,Tr)}),gt&&Kr(q,Ge),Oe}function Fe(q,D,J,fe){var Oe=ee(J);if(typeof Oe!="function")throw Error(i(150));if(J=Oe.call(J),J==null)throw Error(i(151));for(var We=Oe=null,Je=D,Ge=D=0,It=null,nt=J.next();Je!==null&&!nt.done;Ge++,nt=J.next()){Je.index>Ge?(It=Je,Je=null):It=Je.sibling;var Tr=oe(q,Je,nt.value,fe);if(Tr===null){Je===null&&(Je=It);break}t&&Je&&Tr.alternate===null&&s(q,Je),D=c(Tr,D,Ge),We===null?Oe=Tr:We.sibling=Tr,We=Tr,Je=It}if(nt.done)return n(q,Je),gt&&Kr(q,Ge),Oe;if(Je===null){for(;!nt.done;Ge++,nt=J.next())nt=pe(q,nt.value,fe),nt!==null&&(D=c(nt,D,Ge),We===null?Oe=nt:We.sibling=nt,We=nt);return gt&&Kr(q,Ge),Oe}for(Je=a(q,Je);!nt.done;Ge++,nt=J.next())nt=Ce(Je,q,Ge,nt.value,fe),nt!==null&&(t&&nt.alternate!==null&&Je.delete(nt.key===null?Ge:nt.key),D=c(nt,D,Ge),We===null?Oe=nt:We.sibling=nt,We=nt);return t&&Je.forEach(function(Ah){return s(q,Ah)}),gt&&Kr(q,Ge),Oe}function Ct(q,D,J,fe){if(typeof J=="object"&&J!==null&&J.type===se&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case A:e:{for(var Oe=J.key,We=D;We!==null;){if(We.key===Oe){if(Oe=J.type,Oe===se){if(We.tag===7){n(q,We.sibling),D=o(We,J.props.children),D.return=q,q=D;break e}}else if(We.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===ne&&Kd(Oe)===We.type){n(q,We.sibling),D=o(We,J.props),D.ref=ba(q,We,J),D.return=q,q=D;break e}n(q,We);break}else s(q,We);We=We.sibling}J.type===se?(D=Xr(J.props.children,q.mode,fe,J.key),D.return=q,q=D):(fe=Ui(J.type,J.key,J.props,null,q.mode,fe),fe.ref=ba(q,D,J),fe.return=q,q=fe)}return f(q);case me:e:{for(We=J.key;D!==null;){if(D.key===We)if(D.tag===4&&D.stateNode.containerInfo===J.containerInfo&&D.stateNode.implementation===J.implementation){n(q,D.sibling),D=o(D,J.children||[]),D.return=q,q=D;break e}else{n(q,D);break}else s(q,D);D=D.sibling}D=Wo(J,q.mode,fe),D.return=q,q=D}return f(q);case ne:return We=J._init,Ct(q,D,We(J._payload),fe)}if(te(J))return $e(q,D,J,fe);if(ee(J))return Fe(q,D,J,fe);gi(q,J)}return typeof J=="string"&&J!==""||typeof J=="number"?(J=""+J,D!==null&&D.tag===6?(n(q,D.sibling),D=o(D,J),D.return=q,q=D):(n(q,D),D=qo(J,q.mode,fe),D.return=q,q=D),f(q)):n(q,D)}return Ct}var _n=qd(!0),Wd=qd(!1),yi=jr(null),vi=null,kn=null,to=null;function so(){to=kn=vi=null}function ro(t){var s=yi.current;ht(yi),t._currentValue=s}function no(t,s,n){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===n)break;t=t.return}}function Sn(t,s){vi=t,to=kn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(Xt=!0),t.firstContext=null)}function vs(t){var s=t._currentValue;if(to!==t)if(t={context:t,memoizedValue:s,next:null},kn===null){if(vi===null)throw Error(i(308));kn=t,vi.dependencies={lanes:0,firstContext:t}}else kn=kn.next=t;return s}var qr=null;function ao(t){qr===null?qr=[t]:qr.push(t)}function Jd(t,s,n,a){var o=s.interleaved;return o===null?(n.next=n,ao(s)):(n.next=o.next,o.next=n),s.interleaved=n,er(t,a)}function er(t,s){t.lanes|=s;var n=t.alternate;for(n!==null&&(n.lanes|=s),n=t,t=t.return;t!==null;)t.childLanes|=s,n=t.alternate,n!==null&&(n.childLanes|=s),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wr=!1;function io(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gd(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function tr(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function _r(t,s,n){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(rt&2)!==0){var o=a.pending;return o===null?s.next=s:(s.next=o.next,o.next=s),a.pending=s,er(t,n)}return o=a.interleaved,o===null?(s.next=s,ao(a)):(s.next=o.next,o.next=s),a.interleaved=s,er(t,n)}function ji(t,s,n){if(s=s.updateQueue,s!==null&&(s=s.shared,(n&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,n|=a,s.lanes=n,jl(t,n)}}function Qd(t,s){var n=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var o=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};c===null?o=c=f:c=c.next=f,n=n.next}while(n!==null);c===null?o=c=s:c=c.next=s}else o=c=s;n={baseState:a.baseState,firstBaseUpdate:o,lastBaseUpdate:c,shared:a.shared,effects:a.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=s:t.next=s,n.lastBaseUpdate=s}function bi(t,s,n,a){var o=t.updateQueue;wr=!1;var c=o.firstBaseUpdate,f=o.lastBaseUpdate,S=o.shared.pending;if(S!==null){o.shared.pending=null;var L=S,Q=L.next;L.next=null,f===null?c=Q:f.next=Q,f=L;var de=t.alternate;de!==null&&(de=de.updateQueue,S=de.lastBaseUpdate,S!==f&&(S===null?de.firstBaseUpdate=Q:S.next=Q,de.lastBaseUpdate=L))}if(c!==null){var pe=o.baseState;f=0,de=Q=L=null,S=c;do{var oe=S.lane,Ce=S.eventTime;if((a&oe)===oe){de!==null&&(de=de.next={eventTime:Ce,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var $e=t,Fe=S;switch(oe=s,Ce=n,Fe.tag){case 1:if($e=Fe.payload,typeof $e=="function"){pe=$e.call(Ce,pe,oe);break e}pe=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=Fe.payload,oe=typeof $e=="function"?$e.call(Ce,pe,oe):$e,oe==null)break e;pe=le({},pe,oe);break e;case 2:wr=!0}}S.callback!==null&&S.lane!==0&&(t.flags|=64,oe=o.effects,oe===null?o.effects=[S]:oe.push(S))}else Ce={eventTime:Ce,lane:oe,tag:S.tag,payload:S.payload,callback:S.callback,next:null},de===null?(Q=de=Ce,L=pe):de=de.next=Ce,f|=oe;if(S=S.next,S===null){if(S=o.shared.pending,S===null)break;oe=S,S=oe.next,oe.next=null,o.lastBaseUpdate=oe,o.shared.pending=null}}while(!0);if(de===null&&(L=pe),o.baseState=L,o.firstBaseUpdate=Q,o.lastBaseUpdate=de,s=o.shared.interleaved,s!==null){o=s;do f|=o.lane,o=o.next;while(o!==s)}else c===null&&(o.shared.lanes=0);Gr|=f,t.lanes=f,t.memoizedState=pe}}function Zd(t,s,n){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],o=a.callback;if(o!==null){if(a.callback=null,a=n,typeof o!="function")throw Error(i(191,o));o.call(a)}}}var Na={},Os=jr(Na),wa=jr(Na),_a=jr(Na);function Wr(t){if(t===Na)throw Error(i(174));return t}function lo(t,s){switch(pt(_a,s),pt(wa,t),pt(Os,Na),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:C(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=C(s,t)}ht(Os),pt(Os,s)}function Cn(){ht(Os),ht(wa),ht(_a)}function Yd(t){Wr(_a.current);var s=Wr(Os.current),n=C(s,t.type);s!==n&&(pt(wa,t),pt(Os,n))}function oo(t){wa.current===t&&(ht(Os),ht(wa))}var jt=jr(0);function Ni(t){for(var s=t;s!==null;){if(s.tag===13){var n=s.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var co=[];function uo(){for(var t=0;t<co.length;t++)co[t]._workInProgressVersionPrimary=null;co.length=0}var wi=O.ReactCurrentDispatcher,mo=O.ReactCurrentBatchConfig,Jr=0,bt=null,At=null,Mt=null,_i=!1,ka=!1,Sa=0,Yx=0;function Kt(){throw Error(i(321))}function po(t,s){if(s===null)return!1;for(var n=0;n<s.length&&n<t.length;n++)if(!Ps(t[n],s[n]))return!1;return!0}function xo(t,s,n,a,o,c){if(Jr=c,bt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,wi.current=t===null||t.memoizedState===null?sh:rh,t=n(a,o),ka){c=0;do{if(ka=!1,Sa=0,25<=c)throw Error(i(301));c+=1,Mt=At=null,s.updateQueue=null,wi.current=nh,t=n(a,o)}while(ka)}if(wi.current=Ci,s=At!==null&&At.next!==null,Jr=0,Mt=At=bt=null,_i=!1,s)throw Error(i(300));return t}function ho(){var t=Sa!==0;return Sa=0,t}function Us(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?bt.memoizedState=Mt=t:Mt=Mt.next=t,Mt}function js(){if(At===null){var t=bt.alternate;t=t!==null?t.memoizedState:null}else t=At.next;var s=Mt===null?bt.memoizedState:Mt.next;if(s!==null)Mt=s,At=t;else{if(t===null)throw Error(i(310));At=t,t={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Mt===null?bt.memoizedState=Mt=t:Mt=Mt.next=t}return Mt}function Ca(t,s){return typeof s=="function"?s(t):s}function fo(t){var s=js(),n=s.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=t;var a=At,o=a.baseQueue,c=n.pending;if(c!==null){if(o!==null){var f=o.next;o.next=c.next,c.next=f}a.baseQueue=o=c,n.pending=null}if(o!==null){c=o.next,a=a.baseState;var S=f=null,L=null,Q=c;do{var de=Q.lane;if((Jr&de)===de)L!==null&&(L=L.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),a=Q.hasEagerState?Q.eagerState:t(a,Q.action);else{var pe={lane:de,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};L===null?(S=L=pe,f=a):L=L.next=pe,bt.lanes|=de,Gr|=de}Q=Q.next}while(Q!==null&&Q!==c);L===null?f=a:L.next=S,Ps(a,s.memoizedState)||(Xt=!0),s.memoizedState=a,s.baseState=f,s.baseQueue=L,n.lastRenderedState=a}if(t=n.interleaved,t!==null){o=t;do c=o.lane,bt.lanes|=c,Gr|=c,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[s.memoizedState,n.dispatch]}function go(t){var s=js(),n=s.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=t;var a=n.dispatch,o=n.pending,c=s.memoizedState;if(o!==null){n.pending=null;var f=o=o.next;do c=t(c,f.action),f=f.next;while(f!==o);Ps(c,s.memoizedState)||(Xt=!0),s.memoizedState=c,s.baseQueue===null&&(s.baseState=c),n.lastRenderedState=c}return[c,a]}function Xd(){}function eu(t,s){var n=bt,a=js(),o=s(),c=!Ps(a.memoizedState,o);if(c&&(a.memoizedState=o,Xt=!0),a=a.queue,yo(ru.bind(null,n,a,t),[t]),a.getSnapshot!==s||c||Mt!==null&&Mt.memoizedState.tag&1){if(n.flags|=2048,Pa(9,su.bind(null,n,a,o,s),void 0,null),$t===null)throw Error(i(349));(Jr&30)!==0||tu(n,s,o)}return o}function tu(t,s,n){t.flags|=16384,t={getSnapshot:s,value:n},s=bt.updateQueue,s===null?(s={lastEffect:null,stores:null},bt.updateQueue=s,s.stores=[t]):(n=s.stores,n===null?s.stores=[t]:n.push(t))}function su(t,s,n,a){s.value=n,s.getSnapshot=a,nu(s)&&au(t)}function ru(t,s,n){return n(function(){nu(s)&&au(t)})}function nu(t){var s=t.getSnapshot;t=t.value;try{var n=s();return!Ps(t,n)}catch{return!0}}function au(t){var s=er(t,1);s!==null&&Ls(s,t,1,-1)}function iu(t){var s=Us();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:t},s.queue=t,t=t.dispatch=th.bind(null,bt,t),[s.memoizedState,t]}function Pa(t,s,n,a){return t={tag:t,create:s,destroy:n,deps:a,next:null},s=bt.updateQueue,s===null?(s={lastEffect:null,stores:null},bt.updateQueue=s,s.lastEffect=t.next=t):(n=s.lastEffect,n===null?s.lastEffect=t.next=t:(a=n.next,n.next=t,t.next=a,s.lastEffect=t)),t}function lu(){return js().memoizedState}function ki(t,s,n,a){var o=Us();bt.flags|=t,o.memoizedState=Pa(1|s,n,void 0,a===void 0?null:a)}function Si(t,s,n,a){var o=js();a=a===void 0?null:a;var c=void 0;if(At!==null){var f=At.memoizedState;if(c=f.destroy,a!==null&&po(a,f.deps)){o.memoizedState=Pa(s,n,c,a);return}}bt.flags|=t,o.memoizedState=Pa(1|s,n,c,a)}function ou(t,s){return ki(8390656,8,t,s)}function yo(t,s){return Si(2048,8,t,s)}function cu(t,s){return Si(4,2,t,s)}function du(t,s){return Si(4,4,t,s)}function uu(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function mu(t,s,n){return n=n!=null?n.concat([t]):null,Si(4,4,uu.bind(null,s,t),n)}function vo(){}function pu(t,s){var n=js();s=s===void 0?null:s;var a=n.memoizedState;return a!==null&&s!==null&&po(s,a[1])?a[0]:(n.memoizedState=[t,s],t)}function xu(t,s){var n=js();s=s===void 0?null:s;var a=n.memoizedState;return a!==null&&s!==null&&po(s,a[1])?a[0]:(t=t(),n.memoizedState=[t,s],t)}function hu(t,s,n){return(Jr&21)===0?(t.baseState&&(t.baseState=!1,Xt=!0),t.memoizedState=n):(Ps(n,s)||(n=Kc(),bt.lanes|=n,Gr|=n,t.baseState=!0),s)}function Xx(t,s){var n=ct;ct=n!==0&&4>n?n:4,t(!0);var a=mo.transition;mo.transition={};try{t(!1),s()}finally{ct=n,mo.transition=a}}function fu(){return js().memoizedState}function eh(t,s,n){var a=Pr(t);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},gu(t))yu(s,n);else if(n=Jd(t,s,n,a),n!==null){var o=Gt();Ls(n,t,a,o),vu(n,s,a)}}function th(t,s,n){var a=Pr(t),o={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(gu(t))yu(s,o);else{var c=t.alternate;if(t.lanes===0&&(c===null||c.lanes===0)&&(c=s.lastRenderedReducer,c!==null))try{var f=s.lastRenderedState,S=c(f,n);if(o.hasEagerState=!0,o.eagerState=S,Ps(S,f)){var L=s.interleaved;L===null?(o.next=o,ao(s)):(o.next=L.next,L.next=o),s.interleaved=o;return}}catch{}n=Jd(t,s,o,a),n!==null&&(o=Gt(),Ls(n,t,a,o),vu(n,s,a))}}function gu(t){var s=t.alternate;return t===bt||s!==null&&s===bt}function yu(t,s){ka=_i=!0;var n=t.pending;n===null?s.next=s:(s.next=n.next,n.next=s),t.pending=s}function vu(t,s,n){if((n&4194240)!==0){var a=s.lanes;a&=t.pendingLanes,n|=a,s.lanes=n,jl(t,n)}}var Ci={readContext:vs,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},sh={readContext:vs,useCallback:function(t,s){return Us().memoizedState=[t,s===void 0?null:s],t},useContext:vs,useEffect:ou,useImperativeHandle:function(t,s,n){return n=n!=null?n.concat([t]):null,ki(4194308,4,uu.bind(null,s,t),n)},useLayoutEffect:function(t,s){return ki(4194308,4,t,s)},useInsertionEffect:function(t,s){return ki(4,2,t,s)},useMemo:function(t,s){var n=Us();return s=s===void 0?null:s,t=t(),n.memoizedState=[t,s],t},useReducer:function(t,s,n){var a=Us();return s=n!==void 0?n(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=eh.bind(null,bt,t),[a.memoizedState,t]},useRef:function(t){var s=Us();return t={current:t},s.memoizedState=t},useState:iu,useDebugValue:vo,useDeferredValue:function(t){return Us().memoizedState=t},useTransition:function(){var t=iu(!1),s=t[0];return t=Xx.bind(null,t[1]),Us().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,n){var a=bt,o=Us();if(gt){if(n===void 0)throw Error(i(407));n=n()}else{if(n=s(),$t===null)throw Error(i(349));(Jr&30)!==0||tu(a,s,n)}o.memoizedState=n;var c={value:n,getSnapshot:s};return o.queue=c,ou(ru.bind(null,a,c,t),[t]),a.flags|=2048,Pa(9,su.bind(null,a,c,n,s),void 0,null),n},useId:function(){var t=Us(),s=$t.identifierPrefix;if(gt){var n=Xs,a=Ys;n=(a&~(1<<32-Cs(a)-1)).toString(32)+n,s=":"+s+"R"+n,n=Sa++,0<n&&(s+="H"+n.toString(32)),s+=":"}else n=Yx++,s=":"+s+"r"+n.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},rh={readContext:vs,useCallback:pu,useContext:vs,useEffect:yo,useImperativeHandle:mu,useInsertionEffect:cu,useLayoutEffect:du,useMemo:xu,useReducer:fo,useRef:lu,useState:function(){return fo(Ca)},useDebugValue:vo,useDeferredValue:function(t){var s=js();return hu(s,At.memoizedState,t)},useTransition:function(){var t=fo(Ca)[0],s=js().memoizedState;return[t,s]},useMutableSource:Xd,useSyncExternalStore:eu,useId:fu,unstable_isNewReconciler:!1},nh={readContext:vs,useCallback:pu,useContext:vs,useEffect:yo,useImperativeHandle:mu,useInsertionEffect:cu,useLayoutEffect:du,useMemo:xu,useReducer:go,useRef:lu,useState:function(){return go(Ca)},useDebugValue:vo,useDeferredValue:function(t){var s=js();return At===null?s.memoizedState=t:hu(s,At.memoizedState,t)},useTransition:function(){var t=go(Ca)[0],s=js().memoizedState;return[t,s]},useMutableSource:Xd,useSyncExternalStore:eu,useId:fu,unstable_isNewReconciler:!1};function As(t,s){if(t&&t.defaultProps){s=le({},s),t=t.defaultProps;for(var n in t)s[n]===void 0&&(s[n]=t[n]);return s}return s}function jo(t,s,n,a){s=t.memoizedState,n=n(a,s),n=n==null?s:le({},s,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pi={isMounted:function(t){return(t=t._reactInternals)?Ur(t)===t:!1},enqueueSetState:function(t,s,n){t=t._reactInternals;var a=Gt(),o=Pr(t),c=tr(a,o);c.payload=s,n!=null&&(c.callback=n),s=_r(t,c,o),s!==null&&(Ls(s,t,o,a),ji(s,t,o))},enqueueReplaceState:function(t,s,n){t=t._reactInternals;var a=Gt(),o=Pr(t),c=tr(a,o);c.tag=1,c.payload=s,n!=null&&(c.callback=n),s=_r(t,c,o),s!==null&&(Ls(s,t,o,a),ji(s,t,o))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var n=Gt(),a=Pr(t),o=tr(n,a);o.tag=2,s!=null&&(o.callback=s),s=_r(t,o,a),s!==null&&(Ls(s,t,a,n),ji(s,t,a))}};function ju(t,s,n,a,o,c,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,c,f):s.prototype&&s.prototype.isPureReactComponent?!xa(n,a)||!xa(o,c):!0}function bu(t,s,n){var a=!1,o=br,c=s.contextType;return typeof c=="object"&&c!==null?c=vs(c):(o=Yt(s)?Hr:Vt.current,a=s.contextTypes,c=(a=a!=null)?jn(t,o):br),s=new s(n,c),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Pi,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=c),s}function Nu(t,s,n,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(n,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(n,a),s.state!==t&&Pi.enqueueReplaceState(s,s.state,null)}function bo(t,s,n,a){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},io(t);var c=s.contextType;typeof c=="object"&&c!==null?o.context=vs(c):(c=Yt(s)?Hr:Vt.current,o.context=jn(t,c)),o.state=t.memoizedState,c=s.getDerivedStateFromProps,typeof c=="function"&&(jo(t,s,c,n),o.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(s=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),s!==o.state&&Pi.enqueueReplaceState(o,o.state,null),bi(t,n,o,a),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Pn(t,s){try{var n="",a=s;do n+=W(a),a=a.return;while(a);var o=n}catch(c){o=`
Error generating stack: `+c.message+`
`+c.stack}return{value:t,source:s,stack:o,digest:null}}function No(t,s,n){return{value:t,source:null,stack:n??null,digest:s??null}}function wo(t,s){try{console.error(s.value)}catch(n){setTimeout(function(){throw n})}}var ah=typeof WeakMap=="function"?WeakMap:Map;function wu(t,s,n){n=tr(-1,n),n.tag=3,n.payload={element:null};var a=s.value;return n.callback=function(){$i||($i=!0,Ro=a),wo(t,s)},n}function _u(t,s,n){n=tr(-1,n),n.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var o=s.value;n.payload=function(){return a(o)},n.callback=function(){wo(t,s)}}var c=t.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(n.callback=function(){wo(t,s),typeof a!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var f=s.stack;this.componentDidCatch(s.value,{componentStack:f!==null?f:""})}),n}function ku(t,s,n){var a=t.pingCache;if(a===null){a=t.pingCache=new ah;var o=new Set;a.set(s,o)}else o=a.get(s),o===void 0&&(o=new Set,a.set(s,o));o.has(n)||(o.add(n),t=vh.bind(null,t,s,n),s.then(t,t))}function Su(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Cu(t,s,n,a,o){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(s=tr(-1,1),s.tag=2,_r(n,s,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=o,t)}var ih=O.ReactCurrentOwner,Xt=!1;function Jt(t,s,n,a){s.child=t===null?Wd(s,null,n,a):_n(s,t.child,n,a)}function Pu(t,s,n,a,o){n=n.render;var c=s.ref;return Sn(s,o),a=xo(t,s,n,a,c,o),n=ho(),t!==null&&!Xt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~o,sr(t,s,o)):(gt&&n&&Ql(s),s.flags|=1,Jt(t,s,a,o),s.child)}function Eu(t,s,n,a,o){if(t===null){var c=n.type;return typeof c=="function"&&!Ko(c)&&c.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(s.tag=15,s.type=c,Au(t,s,c,a,o)):(t=Ui(n.type,null,a,s,s.mode,o),t.ref=s.ref,t.return=s,s.child=t)}if(c=t.child,(t.lanes&o)===0){var f=c.memoizedProps;if(n=n.compare,n=n!==null?n:xa,n(f,a)&&t.ref===s.ref)return sr(t,s,o)}return s.flags|=1,t=Ar(c,a),t.ref=s.ref,t.return=s,s.child=t}function Au(t,s,n,a,o){if(t!==null){var c=t.memoizedProps;if(xa(c,a)&&t.ref===s.ref)if(Xt=!1,s.pendingProps=a=c,(t.lanes&o)!==0)(t.flags&131072)!==0&&(Xt=!0);else return s.lanes=t.lanes,sr(t,s,o)}return _o(t,s,n,a,o)}function Tu(t,s,n){var a=s.pendingProps,o=a.children,c=t!==null?t.memoizedState:null;if(a.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(An,ps),ps|=n;else{if((n&1073741824)===0)return t=c!==null?c.baseLanes|n:n,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,pt(An,ps),ps|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=c!==null?c.baseLanes:n,pt(An,ps),ps|=a}else c!==null?(a=c.baseLanes|n,s.memoizedState=null):a=n,pt(An,ps),ps|=a;return Jt(t,s,o,n),s.child}function zu(t,s){var n=s.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(s.flags|=512,s.flags|=2097152)}function _o(t,s,n,a,o){var c=Yt(n)?Hr:Vt.current;return c=jn(s,c),Sn(s,o),n=xo(t,s,n,a,c,o),a=ho(),t!==null&&!Xt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~o,sr(t,s,o)):(gt&&a&&Ql(s),s.flags|=1,Jt(t,s,n,o),s.child)}function Lu(t,s,n,a,o){if(Yt(n)){var c=!0;mi(s)}else c=!1;if(Sn(s,o),s.stateNode===null)Ai(t,s),bu(s,n,a),bo(s,n,a,o),a=!0;else if(t===null){var f=s.stateNode,S=s.memoizedProps;f.props=S;var L=f.context,Q=n.contextType;typeof Q=="object"&&Q!==null?Q=vs(Q):(Q=Yt(n)?Hr:Vt.current,Q=jn(s,Q));var de=n.getDerivedStateFromProps,pe=typeof de=="function"||typeof f.getSnapshotBeforeUpdate=="function";pe||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(S!==a||L!==Q)&&Nu(s,f,a,Q),wr=!1;var oe=s.memoizedState;f.state=oe,bi(s,a,f,o),L=s.memoizedState,S!==a||oe!==L||Zt.current||wr?(typeof de=="function"&&(jo(s,n,de,a),L=s.memoizedState),(S=wr||ju(s,n,S,a,oe,L,Q))?(pe||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(s.flags|=4194308)):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=L),f.props=a,f.state=L,f.context=Q,a=S):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{f=s.stateNode,Gd(t,s),S=s.memoizedProps,Q=s.type===s.elementType?S:As(s.type,S),f.props=Q,pe=s.pendingProps,oe=f.context,L=n.contextType,typeof L=="object"&&L!==null?L=vs(L):(L=Yt(n)?Hr:Vt.current,L=jn(s,L));var Ce=n.getDerivedStateFromProps;(de=typeof Ce=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(S!==pe||oe!==L)&&Nu(s,f,a,L),wr=!1,oe=s.memoizedState,f.state=oe,bi(s,a,f,o);var $e=s.memoizedState;S!==pe||oe!==$e||Zt.current||wr?(typeof Ce=="function"&&(jo(s,n,Ce,a),$e=s.memoizedState),(Q=wr||ju(s,n,Q,a,oe,$e,L)||!1)?(de||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,$e,L),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,$e,L)),typeof f.componentDidUpdate=="function"&&(s.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof f.componentDidUpdate!="function"||S===t.memoizedProps&&oe===t.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&oe===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=$e),f.props=a,f.state=$e,f.context=L,a=Q):(typeof f.componentDidUpdate!="function"||S===t.memoizedProps&&oe===t.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&oe===t.memoizedState||(s.flags|=1024),a=!1)}return ko(t,s,n,a,c,o)}function ko(t,s,n,a,o,c){zu(t,s);var f=(s.flags&128)!==0;if(!a&&!f)return o&&Rd(s,n,!1),sr(t,s,c);a=s.stateNode,ih.current=s;var S=f&&typeof n.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&f?(s.child=_n(s,t.child,null,c),s.child=_n(s,null,S,c)):Jt(t,s,S,c),s.memoizedState=a.state,o&&Rd(s,n,!0),s.child}function Mu(t){var s=t.stateNode;s.pendingContext?Id(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Id(t,s.context,!1),lo(t,s.containerInfo)}function $u(t,s,n,a,o){return wn(),eo(o),s.flags|=256,Jt(t,s,n,a),s.child}var So={dehydrated:null,treeContext:null,retryLane:0};function Co(t){return{baseLanes:t,cachePool:null,transitions:null}}function Iu(t,s,n){var a=s.pendingProps,o=jt.current,c=!1,f=(s.flags&128)!==0,S;if((S=f)||(S=t!==null&&t.memoizedState===null?!1:(o&2)!==0),S?(c=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),pt(jt,o&1),t===null)return Xl(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(f=a.children,t=a.fallback,c?(a=s.mode,c=s.child,f={mode:"hidden",children:f},(a&1)===0&&c!==null?(c.childLanes=0,c.pendingProps=f):c=Bi(f,a,0,null),t=Xr(t,a,n,null),c.return=s,t.return=s,c.sibling=t,s.child=c,s.child.memoizedState=Co(n),s.memoizedState=So,t):Po(s,f));if(o=t.memoizedState,o!==null&&(S=o.dehydrated,S!==null))return lh(t,s,f,a,S,o,n);if(c){c=a.fallback,f=s.mode,o=t.child,S=o.sibling;var L={mode:"hidden",children:a.children};return(f&1)===0&&s.child!==o?(a=s.child,a.childLanes=0,a.pendingProps=L,s.deletions=null):(a=Ar(o,L),a.subtreeFlags=o.subtreeFlags&14680064),S!==null?c=Ar(S,c):(c=Xr(c,f,n,null),c.flags|=2),c.return=s,a.return=s,a.sibling=c,s.child=a,a=c,c=s.child,f=t.child.memoizedState,f=f===null?Co(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},c.memoizedState=f,c.childLanes=t.childLanes&~n,s.memoizedState=So,a}return c=t.child,t=c.sibling,a=Ar(c,{mode:"visible",children:a.children}),(s.mode&1)===0&&(a.lanes=n),a.return=s,a.sibling=null,t!==null&&(n=s.deletions,n===null?(s.deletions=[t],s.flags|=16):n.push(t)),s.child=a,s.memoizedState=null,a}function Po(t,s){return s=Bi({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Ei(t,s,n,a){return a!==null&&eo(a),_n(s,t.child,null,n),t=Po(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function lh(t,s,n,a,o,c,f){if(n)return s.flags&256?(s.flags&=-257,a=No(Error(i(422))),Ei(t,s,f,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(c=a.fallback,o=s.mode,a=Bi({mode:"visible",children:a.children},o,0,null),c=Xr(c,o,f,null),c.flags|=2,a.return=s,c.return=s,a.sibling=c,s.child=a,(s.mode&1)!==0&&_n(s,t.child,null,f),s.child.memoizedState=Co(f),s.memoizedState=So,c);if((s.mode&1)===0)return Ei(t,s,f,null);if(o.data==="$!"){if(a=o.nextSibling&&o.nextSibling.dataset,a)var S=a.dgst;return a=S,c=Error(i(419)),a=No(c,a,void 0),Ei(t,s,f,a)}if(S=(f&t.childLanes)!==0,Xt||S){if(a=$t,a!==null){switch(f&-f){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=(o&(a.suspendedLanes|f))!==0?0:o,o!==0&&o!==c.retryLane&&(c.retryLane=o,er(t,o),Ls(a,t,o,-1))}return Vo(),a=No(Error(i(421))),Ei(t,s,f,a)}return o.data==="$?"?(s.flags|=128,s.child=t.child,s=jh.bind(null,t),o._reactRetry=s,null):(t=c.treeContext,ms=vr(o.nextSibling),us=s,gt=!0,Es=null,t!==null&&(gs[ys++]=Ys,gs[ys++]=Xs,gs[ys++]=Vr,Ys=t.id,Xs=t.overflow,Vr=s),s=Po(s,a.children),s.flags|=4096,s)}function Du(t,s,n){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),no(t.return,s,n)}function Eo(t,s,n,a,o){var c=t.memoizedState;c===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:o}:(c.isBackwards=s,c.rendering=null,c.renderingStartTime=0,c.last=a,c.tail=n,c.tailMode=o)}function Ru(t,s,n){var a=s.pendingProps,o=a.revealOrder,c=a.tail;if(Jt(t,s,a.children,n),a=jt.current,(a&2)!==0)a=a&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Du(t,n,s);else if(t.tag===19)Du(t,n,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(pt(jt,a),(s.mode&1)===0)s.memoizedState=null;else switch(o){case"forwards":for(n=s.child,o=null;n!==null;)t=n.alternate,t!==null&&Ni(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=s.child,s.child=null):(o=n.sibling,n.sibling=null),Eo(s,!1,o,n,c);break;case"backwards":for(n=null,o=s.child,s.child=null;o!==null;){if(t=o.alternate,t!==null&&Ni(t)===null){s.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Eo(s,!0,n,null,c);break;case"together":Eo(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ai(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function sr(t,s,n){if(t!==null&&(s.dependencies=t.dependencies),Gr|=s.lanes,(n&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,n=Ar(t,t.pendingProps),s.child=n,n.return=s;t.sibling!==null;)t=t.sibling,n=n.sibling=Ar(t,t.pendingProps),n.return=s;n.sibling=null}return s.child}function oh(t,s,n){switch(s.tag){case 3:Mu(s),wn();break;case 5:Yd(s);break;case 1:Yt(s.type)&&mi(s);break;case 4:lo(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,o=s.memoizedProps.value;pt(yi,a._currentValue),a._currentValue=o;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(pt(jt,jt.current&1),s.flags|=128,null):(n&s.child.childLanes)!==0?Iu(t,s,n):(pt(jt,jt.current&1),t=sr(t,s,n),t!==null?t.sibling:null);pt(jt,jt.current&1);break;case 19:if(a=(n&s.childLanes)!==0,(t.flags&128)!==0){if(a)return Ru(t,s,n);s.flags|=128}if(o=s.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),pt(jt,jt.current),a)break;return null;case 22:case 23:return s.lanes=0,Tu(t,s,n)}return sr(t,s,n)}var Fu,Ao,Ou,Uu;Fu=function(t,s){for(var n=s.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ao=function(){},Ou=function(t,s,n,a){var o=t.memoizedProps;if(o!==a){t=s.stateNode,Wr(Os.current);var c=null;switch(n){case"input":o=ve(t,o),a=ve(t,a),c=[];break;case"select":o=le({},o,{value:void 0}),a=le({},a,{value:void 0}),c=[];break;case"textarea":o=ke(t,o),a=ke(t,a),c=[];break;default:typeof o.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=ci)}Ds(n,a);var f;n=null;for(Q in o)if(!a.hasOwnProperty(Q)&&o.hasOwnProperty(Q)&&o[Q]!=null)if(Q==="style"){var S=o[Q];for(f in S)S.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(u.hasOwnProperty(Q)?c||(c=[]):(c=c||[]).push(Q,null));for(Q in a){var L=a[Q];if(S=o?.[Q],a.hasOwnProperty(Q)&&L!==S&&(L!=null||S!=null))if(Q==="style")if(S){for(f in S)!S.hasOwnProperty(f)||L&&L.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in L)L.hasOwnProperty(f)&&S[f]!==L[f]&&(n||(n={}),n[f]=L[f])}else n||(c||(c=[]),c.push(Q,n)),n=L;else Q==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,S=S?S.__html:void 0,L!=null&&S!==L&&(c=c||[]).push(Q,L)):Q==="children"?typeof L!="string"&&typeof L!="number"||(c=c||[]).push(Q,""+L):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(u.hasOwnProperty(Q)?(L!=null&&Q==="onScroll"&&xt("scroll",t),c||S===L||(c=[])):(c=c||[]).push(Q,L))}n&&(c=c||[]).push("style",n);var Q=c;(s.updateQueue=Q)&&(s.flags|=4)}},Uu=function(t,s,n,a){n!==a&&(s.flags|=4)};function Ea(t,s){if(!gt)switch(t.tailMode){case"hidden":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function qt(t){var s=t.alternate!==null&&t.alternate.child===t.child,n=0,a=0;if(s)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,a|=o.subtreeFlags&14680064,a|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,a|=o.subtreeFlags,a|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=a,t.childLanes=n,s}function ch(t,s,n){var a=s.pendingProps;switch(Zl(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(s),null;case 1:return Yt(s.type)&&ui(),qt(s),null;case 3:return a=s.stateNode,Cn(),ht(Zt),ht(Vt),uo(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(fi(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Es!==null&&(Uo(Es),Es=null))),Ao(t,s),qt(s),null;case 5:oo(s);var o=Wr(_a.current);if(n=s.type,t!==null&&s.stateNode!=null)Ou(t,s,n,a,o),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(i(166));return qt(s),null}if(t=Wr(Os.current),fi(s)){a=s.stateNode,n=s.type;var c=s.memoizedProps;switch(a[Fs]=s,a[va]=c,t=(s.mode&1)!==0,n){case"dialog":xt("cancel",a),xt("close",a);break;case"iframe":case"object":case"embed":xt("load",a);break;case"video":case"audio":for(o=0;o<fa.length;o++)xt(fa[o],a);break;case"source":xt("error",a);break;case"img":case"image":case"link":xt("error",a),xt("load",a);break;case"details":xt("toggle",a);break;case"input":Se(a,c),xt("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!c.multiple},xt("invalid",a);break;case"textarea":be(a,c),xt("invalid",a)}Ds(n,c),o=null;for(var f in c)if(c.hasOwnProperty(f)){var S=c[f];f==="children"?typeof S=="string"?a.textContent!==S&&(c.suppressHydrationWarning!==!0&&oi(a.textContent,S,t),o=["children",S]):typeof S=="number"&&a.textContent!==""+S&&(c.suppressHydrationWarning!==!0&&oi(a.textContent,S,t),o=["children",""+S]):u.hasOwnProperty(f)&&S!=null&&f==="onScroll"&&xt("scroll",a)}switch(n){case"input":$(a),Qe(a,c,!0);break;case"textarea":$(a),at(a);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(a.onclick=ci)}a=o,s.updateQueue=a,a!==null&&(s.flags|=4)}else{f=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mt(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=f.createElement(n,{is:a.is}):(t=f.createElement(n),n==="select"&&(f=t,a.multiple?f.multiple=!0:a.size&&(f.size=a.size))):t=f.createElementNS(t,n),t[Fs]=s,t[va]=a,Fu(t,s,!1,!1),s.stateNode=t;e:{switch(f=R(n,a),n){case"dialog":xt("cancel",t),xt("close",t),o=a;break;case"iframe":case"object":case"embed":xt("load",t),o=a;break;case"video":case"audio":for(o=0;o<fa.length;o++)xt(fa[o],t);o=a;break;case"source":xt("error",t),o=a;break;case"img":case"image":case"link":xt("error",t),xt("load",t),o=a;break;case"details":xt("toggle",t),o=a;break;case"input":Se(t,a),o=ve(t,a),xt("invalid",t);break;case"option":o=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},o=le({},a,{value:void 0}),xt("invalid",t);break;case"textarea":be(t,a),o=ke(t,a),xt("invalid",t);break;default:o=a}Ds(n,o),S=o;for(c in S)if(S.hasOwnProperty(c)){var L=S[c];c==="style"?mr(t,L):c==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&qe(t,L)):c==="children"?typeof L=="string"?(n!=="textarea"||L!=="")&&it(t,L):typeof L=="number"&&it(t,""+L):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(u.hasOwnProperty(c)?L!=null&&c==="onScroll"&&xt("scroll",t):L!=null&&U(t,c,L,f))}switch(n){case"input":$(t),Qe(t,a,!1);break;case"textarea":$(t),at(t);break;case"option":a.value!=null&&t.setAttribute("value",""+he(a.value));break;case"select":t.multiple=!!a.multiple,c=a.value,c!=null?Pe(t,!!a.multiple,c,!1):a.defaultValue!=null&&Pe(t,!!a.multiple,a.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=ci)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return qt(s),null;case 6:if(t&&s.stateNode!=null)Uu(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(i(166));if(n=Wr(_a.current),Wr(Os.current),fi(s)){if(a=s.stateNode,n=s.memoizedProps,a[Fs]=s,(c=a.nodeValue!==n)&&(t=us,t!==null))switch(t.tag){case 3:oi(a.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&oi(a.nodeValue,n,(t.mode&1)!==0)}c&&(s.flags|=4)}else a=(n.nodeType===9?n:n.ownerDocument).createTextNode(a),a[Fs]=s,s.stateNode=a}return qt(s),null;case 13:if(ht(jt),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(gt&&ms!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Vd(),wn(),s.flags|=98560,c=!1;else if(c=fi(s),a!==null&&a.dehydrated!==null){if(t===null){if(!c)throw Error(i(318));if(c=s.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));c[Fs]=s}else wn(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qt(s),c=!1}else Es!==null&&(Uo(Es),Es=null),c=!0;if(!c)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=n,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(jt.current&1)!==0?Tt===0&&(Tt=3):Vo())),s.updateQueue!==null&&(s.flags|=4),qt(s),null);case 4:return Cn(),Ao(t,s),t===null&&ga(s.stateNode.containerInfo),qt(s),null;case 10:return ro(s.type._context),qt(s),null;case 17:return Yt(s.type)&&ui(),qt(s),null;case 19:if(ht(jt),c=s.memoizedState,c===null)return qt(s),null;if(a=(s.flags&128)!==0,f=c.rendering,f===null)if(a)Ea(c,!1);else{if(Tt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(f=Ni(t),f!==null){for(s.flags|=128,Ea(c,!1),a=f.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=n,n=s.child;n!==null;)c=n,t=a,c.flags&=14680066,f=c.alternate,f===null?(c.childLanes=0,c.lanes=t,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,t=f.dependencies,c.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pt(jt,jt.current&1|2),s.child}t=t.sibling}c.tail!==null&&St()>Tn&&(s.flags|=128,a=!0,Ea(c,!1),s.lanes=4194304)}else{if(!a)if(t=Ni(f),t!==null){if(s.flags|=128,a=!0,n=t.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),Ea(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!gt)return qt(s),null}else 2*St()-c.renderingStartTime>Tn&&n!==1073741824&&(s.flags|=128,a=!0,Ea(c,!1),s.lanes=4194304);c.isBackwards?(f.sibling=s.child,s.child=f):(n=c.last,n!==null?n.sibling=f:s.child=f,c.last=f)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=St(),s.sibling=null,n=jt.current,pt(jt,a?n&1|2:n&1),s):(qt(s),null);case 22:case 23:return Ho(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&(s.mode&1)!==0?(ps&1073741824)!==0&&(qt(s),s.subtreeFlags&6&&(s.flags|=8192)):qt(s),null;case 24:return null;case 25:return null}throw Error(i(156,s.tag))}function dh(t,s){switch(Zl(s),s.tag){case 1:return Yt(s.type)&&ui(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Cn(),ht(Zt),ht(Vt),uo(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return oo(s),null;case 13:if(ht(jt),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));wn()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return ht(jt),null;case 4:return Cn(),null;case 10:return ro(s.type._context),null;case 22:case 23:return Ho(),null;case 24:return null;default:return null}}var Ti=!1,Wt=!1,uh=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function En(t,s){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(a){wt(t,s,a)}else n.current=null}function To(t,s,n){try{n()}catch(a){wt(t,s,a)}}var Bu=!1;function mh(t,s){if(Bl=Za,t=jd(),Ml(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var o=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var f=0,S=-1,L=-1,Q=0,de=0,pe=t,oe=null;t:for(;;){for(var Ce;pe!==n||o!==0&&pe.nodeType!==3||(S=f+o),pe!==c||a!==0&&pe.nodeType!==3||(L=f+a),pe.nodeType===3&&(f+=pe.nodeValue.length),(Ce=pe.firstChild)!==null;)oe=pe,pe=Ce;for(;;){if(pe===t)break t;if(oe===n&&++Q===o&&(S=f),oe===c&&++de===a&&(L=f),(Ce=pe.nextSibling)!==null)break;pe=oe,oe=pe.parentNode}pe=Ce}n=S===-1||L===-1?null:{start:S,end:L}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hl={focusedElem:t,selectionRange:n},Za=!1,Ee=s;Ee!==null;)if(s=Ee,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ee=t;else for(;Ee!==null;){s=Ee;try{var $e=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if($e!==null){var Fe=$e.memoizedProps,Ct=$e.memoizedState,q=s.stateNode,D=q.getSnapshotBeforeUpdate(s.elementType===s.type?Fe:As(s.type,Fe),Ct);q.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var J=s.stateNode.containerInfo;J.nodeType===1?J.textContent="":J.nodeType===9&&J.documentElement&&J.removeChild(J.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(fe){wt(s,s.return,fe)}if(t=s.sibling,t!==null){t.return=s.return,Ee=t;break}Ee=s.return}return $e=Bu,Bu=!1,$e}function Aa(t,s,n){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var o=a=a.next;do{if((o.tag&t)===t){var c=o.destroy;o.destroy=void 0,c!==void 0&&To(s,n,c)}o=o.next}while(o!==a)}}function zi(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&t)===t){var a=n.create;n.destroy=a()}n=n.next}while(n!==s)}}function zo(t){var s=t.ref;if(s!==null){var n=t.stateNode;t.tag,t=n,typeof s=="function"?s(t):s.current=t}}function Hu(t){var s=t.alternate;s!==null&&(t.alternate=null,Hu(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Fs],delete s[va],delete s[Wl],delete s[Jx],delete s[Gx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Vu(t){return t.tag===5||t.tag===3||t.tag===4}function Ku(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vu(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lo(t,s,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?n.nodeType===8?n.parentNode.insertBefore(t,s):n.insertBefore(t,s):(n.nodeType===8?(s=n.parentNode,s.insertBefore(t,n)):(s=n,s.appendChild(t)),n=n._reactRootContainer,n!=null||s.onclick!==null||(s.onclick=ci));else if(a!==4&&(t=t.child,t!==null))for(Lo(t,s,n),t=t.sibling;t!==null;)Lo(t,s,n),t=t.sibling}function Mo(t,s,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?n.insertBefore(t,s):n.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(Mo(t,s,n),t=t.sibling;t!==null;)Mo(t,s,n),t=t.sibling}var Ft=null,Ts=!1;function kr(t,s,n){for(n=n.child;n!==null;)qu(t,s,n),n=n.sibling}function qu(t,s,n){if(Rs&&typeof Rs.onCommitFiberUnmount=="function")try{Rs.onCommitFiberUnmount(Ka,n)}catch{}switch(n.tag){case 5:Wt||En(n,s);case 6:var a=Ft,o=Ts;Ft=null,kr(t,s,n),Ft=a,Ts=o,Ft!==null&&(Ts?(t=Ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ft.removeChild(n.stateNode));break;case 18:Ft!==null&&(Ts?(t=Ft,n=n.stateNode,t.nodeType===8?ql(t.parentNode,n):t.nodeType===1&&ql(t,n),oa(t)):ql(Ft,n.stateNode));break;case 4:a=Ft,o=Ts,Ft=n.stateNode.containerInfo,Ts=!0,kr(t,s,n),Ft=a,Ts=o;break;case 0:case 11:case 14:case 15:if(!Wt&&(a=n.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){o=a=a.next;do{var c=o,f=c.destroy;c=c.tag,f!==void 0&&((c&2)!==0||(c&4)!==0)&&To(n,s,f),o=o.next}while(o!==a)}kr(t,s,n);break;case 1:if(!Wt&&(En(n,s),a=n.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(S){wt(n,s,S)}kr(t,s,n);break;case 21:kr(t,s,n);break;case 22:n.mode&1?(Wt=(a=Wt)||n.memoizedState!==null,kr(t,s,n),Wt=a):kr(t,s,n);break;default:kr(t,s,n)}}function Wu(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new uh),s.forEach(function(a){var o=bh.bind(null,t,a);n.has(a)||(n.add(a),a.then(o,o))})}}function zs(t,s){var n=s.deletions;if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];try{var c=t,f=s,S=f;e:for(;S!==null;){switch(S.tag){case 5:Ft=S.stateNode,Ts=!1;break e;case 3:Ft=S.stateNode.containerInfo,Ts=!0;break e;case 4:Ft=S.stateNode.containerInfo,Ts=!0;break e}S=S.return}if(Ft===null)throw Error(i(160));qu(c,f,o),Ft=null,Ts=!1;var L=o.alternate;L!==null&&(L.return=null),o.return=null}catch(Q){wt(o,s,Q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Ju(s,t),s=s.sibling}function Ju(t,s){var n=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zs(s,t),Bs(t),a&4){try{Aa(3,t,t.return),zi(3,t)}catch(Fe){wt(t,t.return,Fe)}try{Aa(5,t,t.return)}catch(Fe){wt(t,t.return,Fe)}}break;case 1:zs(s,t),Bs(t),a&512&&n!==null&&En(n,n.return);break;case 5:if(zs(s,t),Bs(t),a&512&&n!==null&&En(n,n.return),t.flags&32){var o=t.stateNode;try{it(o,"")}catch(Fe){wt(t,t.return,Fe)}}if(a&4&&(o=t.stateNode,o!=null)){var c=t.memoizedProps,f=n!==null?n.memoizedProps:c,S=t.type,L=t.updateQueue;if(t.updateQueue=null,L!==null)try{S==="input"&&c.type==="radio"&&c.name!=null&&Re(o,c),R(S,f);var Q=R(S,c);for(f=0;f<L.length;f+=2){var de=L[f],pe=L[f+1];de==="style"?mr(o,pe):de==="dangerouslySetInnerHTML"?qe(o,pe):de==="children"?it(o,pe):U(o,de,pe,Q)}switch(S){case"input":xe(o,c);break;case"textarea":Le(o,c);break;case"select":var oe=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!c.multiple;var Ce=c.value;Ce!=null?Pe(o,!!c.multiple,Ce,!1):oe!==!!c.multiple&&(c.defaultValue!=null?Pe(o,!!c.multiple,c.defaultValue,!0):Pe(o,!!c.multiple,c.multiple?[]:"",!1))}o[va]=c}catch(Fe){wt(t,t.return,Fe)}}break;case 6:if(zs(s,t),Bs(t),a&4){if(t.stateNode===null)throw Error(i(162));o=t.stateNode,c=t.memoizedProps;try{o.nodeValue=c}catch(Fe){wt(t,t.return,Fe)}}break;case 3:if(zs(s,t),Bs(t),a&4&&n!==null&&n.memoizedState.isDehydrated)try{oa(s.containerInfo)}catch(Fe){wt(t,t.return,Fe)}break;case 4:zs(s,t),Bs(t);break;case 13:zs(s,t),Bs(t),o=t.child,o.flags&8192&&(c=o.memoizedState!==null,o.stateNode.isHidden=c,!c||o.alternate!==null&&o.alternate.memoizedState!==null||(Do=St())),a&4&&Wu(t);break;case 22:if(de=n!==null&&n.memoizedState!==null,t.mode&1?(Wt=(Q=Wt)||de,zs(s,t),Wt=Q):zs(s,t),Bs(t),a&8192){if(Q=t.memoizedState!==null,(t.stateNode.isHidden=Q)&&!de&&(t.mode&1)!==0)for(Ee=t,de=t.child;de!==null;){for(pe=Ee=de;Ee!==null;){switch(oe=Ee,Ce=oe.child,oe.tag){case 0:case 11:case 14:case 15:Aa(4,oe,oe.return);break;case 1:En(oe,oe.return);var $e=oe.stateNode;if(typeof $e.componentWillUnmount=="function"){a=oe,n=oe.return;try{s=a,$e.props=s.memoizedProps,$e.state=s.memoizedState,$e.componentWillUnmount()}catch(Fe){wt(a,n,Fe)}}break;case 5:En(oe,oe.return);break;case 22:if(oe.memoizedState!==null){Zu(pe);continue}}Ce!==null?(Ce.return=oe,Ee=Ce):Zu(pe)}de=de.sibling}e:for(de=null,pe=t;;){if(pe.tag===5){if(de===null){de=pe;try{o=pe.stateNode,Q?(c=o.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(S=pe.stateNode,L=pe.memoizedProps.style,f=L!=null&&L.hasOwnProperty("display")?L.display:null,S.style.display=Ve("display",f))}catch(Fe){wt(t,t.return,Fe)}}}else if(pe.tag===6){if(de===null)try{pe.stateNode.nodeValue=Q?"":pe.memoizedProps}catch(Fe){wt(t,t.return,Fe)}}else if((pe.tag!==22&&pe.tag!==23||pe.memoizedState===null||pe===t)&&pe.child!==null){pe.child.return=pe,pe=pe.child;continue}if(pe===t)break e;for(;pe.sibling===null;){if(pe.return===null||pe.return===t)break e;de===pe&&(de=null),pe=pe.return}de===pe&&(de=null),pe.sibling.return=pe.return,pe=pe.sibling}}break;case 19:zs(s,t),Bs(t),a&4&&Wu(t);break;case 21:break;default:zs(s,t),Bs(t)}}function Bs(t){var s=t.flags;if(s&2){try{e:{for(var n=t.return;n!==null;){if(Vu(n)){var a=n;break e}n=n.return}throw Error(i(160))}switch(a.tag){case 5:var o=a.stateNode;a.flags&32&&(it(o,""),a.flags&=-33);var c=Ku(t);Mo(t,c,o);break;case 3:case 4:var f=a.stateNode.containerInfo,S=Ku(t);Lo(t,S,f);break;default:throw Error(i(161))}}catch(L){wt(t,t.return,L)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function ph(t,s,n){Ee=t,Gu(t)}function Gu(t,s,n){for(var a=(t.mode&1)!==0;Ee!==null;){var o=Ee,c=o.child;if(o.tag===22&&a){var f=o.memoizedState!==null||Ti;if(!f){var S=o.alternate,L=S!==null&&S.memoizedState!==null||Wt;S=Ti;var Q=Wt;if(Ti=f,(Wt=L)&&!Q)for(Ee=o;Ee!==null;)f=Ee,L=f.child,f.tag===22&&f.memoizedState!==null?Yu(o):L!==null?(L.return=f,Ee=L):Yu(o);for(;c!==null;)Ee=c,Gu(c),c=c.sibling;Ee=o,Ti=S,Wt=Q}Qu(t)}else(o.subtreeFlags&8772)!==0&&c!==null?(c.return=o,Ee=c):Qu(t)}}function Qu(t){for(;Ee!==null;){var s=Ee;if((s.flags&8772)!==0){var n=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Wt||zi(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!Wt)if(n===null)a.componentDidMount();else{var o=s.elementType===s.type?n.memoizedProps:As(s.type,n.memoizedProps);a.componentDidUpdate(o,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var c=s.updateQueue;c!==null&&Zd(s,c,a);break;case 3:var f=s.updateQueue;if(f!==null){if(n=null,s.child!==null)switch(s.child.tag){case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}Zd(s,f,n)}break;case 5:var S=s.stateNode;if(n===null&&s.flags&4){n=S;var L=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&n.focus();break;case"img":L.src&&(n.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var Q=s.alternate;if(Q!==null){var de=Q.memoizedState;if(de!==null){var pe=de.dehydrated;pe!==null&&oa(pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Wt||s.flags&512&&zo(s)}catch(oe){wt(s,s.return,oe)}}if(s===t){Ee=null;break}if(n=s.sibling,n!==null){n.return=s.return,Ee=n;break}Ee=s.return}}function Zu(t){for(;Ee!==null;){var s=Ee;if(s===t){Ee=null;break}var n=s.sibling;if(n!==null){n.return=s.return,Ee=n;break}Ee=s.return}}function Yu(t){for(;Ee!==null;){var s=Ee;try{switch(s.tag){case 0:case 11:case 15:var n=s.return;try{zi(4,s)}catch(L){wt(s,n,L)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var o=s.return;try{a.componentDidMount()}catch(L){wt(s,o,L)}}var c=s.return;try{zo(s)}catch(L){wt(s,c,L)}break;case 5:var f=s.return;try{zo(s)}catch(L){wt(s,f,L)}}}catch(L){wt(s,s.return,L)}if(s===t){Ee=null;break}var S=s.sibling;if(S!==null){S.return=s.return,Ee=S;break}Ee=s.return}}var xh=Math.ceil,Li=O.ReactCurrentDispatcher,$o=O.ReactCurrentOwner,bs=O.ReactCurrentBatchConfig,rt=0,$t=null,Et=null,Ot=0,ps=0,An=jr(0),Tt=0,Ta=null,Gr=0,Mi=0,Io=0,za=null,es=null,Do=0,Tn=1/0,rr=null,$i=!1,Ro=null,Sr=null,Ii=!1,Cr=null,Di=0,La=0,Fo=null,Ri=-1,Fi=0;function Gt(){return(rt&6)!==0?St():Ri!==-1?Ri:Ri=St()}function Pr(t){return(t.mode&1)===0?1:(rt&2)!==0&&Ot!==0?Ot&-Ot:Zx.transition!==null?(Fi===0&&(Fi=Kc()),Fi):(t=ct,t!==0||(t=window.event,t=t===void 0?16:ed(t.type)),t)}function Ls(t,s,n,a){if(50<La)throw La=0,Fo=null,Error(i(185));ra(t,n,a),((rt&2)===0||t!==$t)&&(t===$t&&((rt&2)===0&&(Mi|=n),Tt===4&&Er(t,Ot)),ts(t,a),n===1&&rt===0&&(s.mode&1)===0&&(Tn=St()+500,pi&&Nr()))}function ts(t,s){var n=t.callbackNode;Zp(t,s);var a=Ja(t,t===$t?Ot:0);if(a===0)n!==null&&Bc(n),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(n!=null&&Bc(n),s===1)t.tag===0?Qx(em.bind(null,t)):Fd(em.bind(null,t)),qx(function(){(rt&6)===0&&Nr()}),n=null;else{switch(qc(a)){case 1:n=gl;break;case 4:n=Hc;break;case 16:n=Va;break;case 536870912:n=Vc;break;default:n=Va}n=om(n,Xu.bind(null,t))}t.callbackPriority=s,t.callbackNode=n}}function Xu(t,s){if(Ri=-1,Fi=0,(rt&6)!==0)throw Error(i(327));var n=t.callbackNode;if(zn()&&t.callbackNode!==n)return null;var a=Ja(t,t===$t?Ot:0);if(a===0)return null;if((a&30)!==0||(a&t.expiredLanes)!==0||s)s=Oi(t,a);else{s=a;var o=rt;rt|=2;var c=sm();($t!==t||Ot!==s)&&(rr=null,Tn=St()+500,Zr(t,s));do try{gh();break}catch(S){tm(t,S)}while(!0);so(),Li.current=c,rt=o,Et!==null?s=0:($t=null,Ot=0,s=Tt)}if(s!==0){if(s===2&&(o=yl(t),o!==0&&(a=o,s=Oo(t,o))),s===1)throw n=Ta,Zr(t,0),Er(t,a),ts(t,St()),n;if(s===6)Er(t,a);else{if(o=t.current.alternate,(a&30)===0&&!hh(o)&&(s=Oi(t,a),s===2&&(c=yl(t),c!==0&&(a=c,s=Oo(t,c))),s===1))throw n=Ta,Zr(t,0),Er(t,a),ts(t,St()),n;switch(t.finishedWork=o,t.finishedLanes=a,s){case 0:case 1:throw Error(i(345));case 2:Yr(t,es,rr);break;case 3:if(Er(t,a),(a&130023424)===a&&(s=Do+500-St(),10<s)){if(Ja(t,0)!==0)break;if(o=t.suspendedLanes,(o&a)!==a){Gt(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Kl(Yr.bind(null,t,es,rr),s);break}Yr(t,es,rr);break;case 4:if(Er(t,a),(a&4194240)===a)break;for(s=t.eventTimes,o=-1;0<a;){var f=31-Cs(a);c=1<<f,f=s[f],f>o&&(o=f),a&=~c}if(a=o,a=St()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*xh(a/1960))-a,10<a){t.timeoutHandle=Kl(Yr.bind(null,t,es,rr),a);break}Yr(t,es,rr);break;case 5:Yr(t,es,rr);break;default:throw Error(i(329))}}}return ts(t,St()),t.callbackNode===n?Xu.bind(null,t):null}function Oo(t,s){var n=za;return t.current.memoizedState.isDehydrated&&(Zr(t,s).flags|=256),t=Oi(t,s),t!==2&&(s=es,es=n,s!==null&&Uo(s)),t}function Uo(t){es===null?es=t:es.push.apply(es,t)}function hh(t){for(var s=t;;){if(s.flags&16384){var n=s.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var a=0;a<n.length;a++){var o=n[a],c=o.getSnapshot;o=o.value;try{if(!Ps(c(),o))return!1}catch{return!1}}}if(n=s.child,s.subtreeFlags&16384&&n!==null)n.return=s,s=n;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Er(t,s){for(s&=~Io,s&=~Mi,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var n=31-Cs(s),a=1<<n;t[n]=-1,s&=~a}}function em(t){if((rt&6)!==0)throw Error(i(327));zn();var s=Ja(t,0);if((s&1)===0)return ts(t,St()),null;var n=Oi(t,s);if(t.tag!==0&&n===2){var a=yl(t);a!==0&&(s=a,n=Oo(t,a))}if(n===1)throw n=Ta,Zr(t,0),Er(t,s),ts(t,St()),n;if(n===6)throw Error(i(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Yr(t,es,rr),ts(t,St()),null}function Bo(t,s){var n=rt;rt|=1;try{return t(s)}finally{rt=n,rt===0&&(Tn=St()+500,pi&&Nr())}}function Qr(t){Cr!==null&&Cr.tag===0&&(rt&6)===0&&zn();var s=rt;rt|=1;var n=bs.transition,a=ct;try{if(bs.transition=null,ct=1,t)return t()}finally{ct=a,bs.transition=n,rt=s,(rt&6)===0&&Nr()}}function Ho(){ps=An.current,ht(An)}function Zr(t,s){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Kx(n)),Et!==null)for(n=Et.return;n!==null;){var a=n;switch(Zl(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&ui();break;case 3:Cn(),ht(Zt),ht(Vt),uo();break;case 5:oo(a);break;case 4:Cn();break;case 13:ht(jt);break;case 19:ht(jt);break;case 10:ro(a.type._context);break;case 22:case 23:Ho()}n=n.return}if($t=t,Et=t=Ar(t.current,null),Ot=ps=s,Tt=0,Ta=null,Io=Mi=Gr=0,es=za=null,qr!==null){for(s=0;s<qr.length;s++)if(n=qr[s],a=n.interleaved,a!==null){n.interleaved=null;var o=a.next,c=n.pending;if(c!==null){var f=c.next;c.next=o,a.next=f}n.pending=a}qr=null}return t}function tm(t,s){do{var n=Et;try{if(so(),wi.current=Ci,_i){for(var a=bt.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}_i=!1}if(Jr=0,Mt=At=bt=null,ka=!1,Sa=0,$o.current=null,n===null||n.return===null){Tt=1,Ta=s,Et=null;break}e:{var c=t,f=n.return,S=n,L=s;if(s=Ot,S.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var Q=L,de=S,pe=de.tag;if((de.mode&1)===0&&(pe===0||pe===11||pe===15)){var oe=de.alternate;oe?(de.updateQueue=oe.updateQueue,de.memoizedState=oe.memoizedState,de.lanes=oe.lanes):(de.updateQueue=null,de.memoizedState=null)}var Ce=Su(f);if(Ce!==null){Ce.flags&=-257,Cu(Ce,f,S,c,s),Ce.mode&1&&ku(c,Q,s),s=Ce,L=Q;var $e=s.updateQueue;if($e===null){var Fe=new Set;Fe.add(L),s.updateQueue=Fe}else $e.add(L);break e}else{if((s&1)===0){ku(c,Q,s),Vo();break e}L=Error(i(426))}}else if(gt&&S.mode&1){var Ct=Su(f);if(Ct!==null){(Ct.flags&65536)===0&&(Ct.flags|=256),Cu(Ct,f,S,c,s),eo(Pn(L,S));break e}}c=L=Pn(L,S),Tt!==4&&(Tt=2),za===null?za=[c]:za.push(c),c=f;do{switch(c.tag){case 3:c.flags|=65536,s&=-s,c.lanes|=s;var q=wu(c,L,s);Qd(c,q);break e;case 1:S=L;var D=c.type,J=c.stateNode;if((c.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(Sr===null||!Sr.has(J)))){c.flags|=65536,s&=-s,c.lanes|=s;var fe=_u(c,S,s);Qd(c,fe);break e}}c=c.return}while(c!==null)}nm(n)}catch(Oe){s=Oe,Et===n&&n!==null&&(Et=n=n.return);continue}break}while(!0)}function sm(){var t=Li.current;return Li.current=Ci,t===null?Ci:t}function Vo(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),$t===null||(Gr&268435455)===0&&(Mi&268435455)===0||Er($t,Ot)}function Oi(t,s){var n=rt;rt|=2;var a=sm();($t!==t||Ot!==s)&&(rr=null,Zr(t,s));do try{fh();break}catch(o){tm(t,o)}while(!0);if(so(),rt=n,Li.current=a,Et!==null)throw Error(i(261));return $t=null,Ot=0,Tt}function fh(){for(;Et!==null;)rm(Et)}function gh(){for(;Et!==null&&!Bp();)rm(Et)}function rm(t){var s=lm(t.alternate,t,ps);t.memoizedProps=t.pendingProps,s===null?nm(t):Et=s,$o.current=null}function nm(t){var s=t;do{var n=s.alternate;if(t=s.return,(s.flags&32768)===0){if(n=ch(n,s,ps),n!==null){Et=n;return}}else{if(n=dh(n,s),n!==null){n.flags&=32767,Et=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,Et=null;return}}if(s=s.sibling,s!==null){Et=s;return}Et=s=t}while(s!==null);Tt===0&&(Tt=5)}function Yr(t,s,n){var a=ct,o=bs.transition;try{bs.transition=null,ct=1,yh(t,s,n,a)}finally{bs.transition=o,ct=a}return null}function yh(t,s,n,a){do zn();while(Cr!==null);if((rt&6)!==0)throw Error(i(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(i(177));t.callbackNode=null,t.callbackPriority=0;var c=n.lanes|n.childLanes;if(Yp(t,c),t===$t&&(Et=$t=null,Ot=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Ii||(Ii=!0,om(Va,function(){return zn(),null})),c=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||c){c=bs.transition,bs.transition=null;var f=ct;ct=1;var S=rt;rt|=4,$o.current=null,mh(t,n),Ju(n,t),Rx(Hl),Za=!!Bl,Hl=Bl=null,t.current=n,ph(n),Hp(),rt=S,ct=f,bs.transition=c}else t.current=n;if(Ii&&(Ii=!1,Cr=t,Di=o),c=t.pendingLanes,c===0&&(Sr=null),qp(n.stateNode),ts(t,St()),s!==null)for(a=t.onRecoverableError,n=0;n<s.length;n++)o=s[n],a(o.value,{componentStack:o.stack,digest:o.digest});if($i)throw $i=!1,t=Ro,Ro=null,t;return(Di&1)!==0&&t.tag!==0&&zn(),c=t.pendingLanes,(c&1)!==0?t===Fo?La++:(La=0,Fo=t):La=0,Nr(),null}function zn(){if(Cr!==null){var t=qc(Di),s=bs.transition,n=ct;try{if(bs.transition=null,ct=16>t?16:t,Cr===null)var a=!1;else{if(t=Cr,Cr=null,Di=0,(rt&6)!==0)throw Error(i(331));var o=rt;for(rt|=4,Ee=t.current;Ee!==null;){var c=Ee,f=c.child;if((Ee.flags&16)!==0){var S=c.deletions;if(S!==null){for(var L=0;L<S.length;L++){var Q=S[L];for(Ee=Q;Ee!==null;){var de=Ee;switch(de.tag){case 0:case 11:case 15:Aa(8,de,c)}var pe=de.child;if(pe!==null)pe.return=de,Ee=pe;else for(;Ee!==null;){de=Ee;var oe=de.sibling,Ce=de.return;if(Hu(de),de===Q){Ee=null;break}if(oe!==null){oe.return=Ce,Ee=oe;break}Ee=Ce}}}var $e=c.alternate;if($e!==null){var Fe=$e.child;if(Fe!==null){$e.child=null;do{var Ct=Fe.sibling;Fe.sibling=null,Fe=Ct}while(Fe!==null)}}Ee=c}}if((c.subtreeFlags&2064)!==0&&f!==null)f.return=c,Ee=f;else e:for(;Ee!==null;){if(c=Ee,(c.flags&2048)!==0)switch(c.tag){case 0:case 11:case 15:Aa(9,c,c.return)}var q=c.sibling;if(q!==null){q.return=c.return,Ee=q;break e}Ee=c.return}}var D=t.current;for(Ee=D;Ee!==null;){f=Ee;var J=f.child;if((f.subtreeFlags&2064)!==0&&J!==null)J.return=f,Ee=J;else e:for(f=D;Ee!==null;){if(S=Ee,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:zi(9,S)}}catch(Oe){wt(S,S.return,Oe)}if(S===f){Ee=null;break e}var fe=S.sibling;if(fe!==null){fe.return=S.return,Ee=fe;break e}Ee=S.return}}if(rt=o,Nr(),Rs&&typeof Rs.onPostCommitFiberRoot=="function")try{Rs.onPostCommitFiberRoot(Ka,t)}catch{}a=!0}return a}finally{ct=n,bs.transition=s}}return!1}function am(t,s,n){s=Pn(n,s),s=wu(t,s,1),t=_r(t,s,1),s=Gt(),t!==null&&(ra(t,1,s),ts(t,s))}function wt(t,s,n){if(t.tag===3)am(t,t,n);else for(;s!==null;){if(s.tag===3){am(s,t,n);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Sr===null||!Sr.has(a))){t=Pn(n,t),t=_u(s,t,1),s=_r(s,t,1),t=Gt(),s!==null&&(ra(s,1,t),ts(s,t));break}}s=s.return}}function vh(t,s,n){var a=t.pingCache;a!==null&&a.delete(s),s=Gt(),t.pingedLanes|=t.suspendedLanes&n,$t===t&&(Ot&n)===n&&(Tt===4||Tt===3&&(Ot&130023424)===Ot&&500>St()-Do?Zr(t,0):Io|=n),ts(t,s)}function im(t,s){s===0&&((t.mode&1)===0?s=1:(s=Wa,Wa<<=1,(Wa&130023424)===0&&(Wa=4194304)));var n=Gt();t=er(t,s),t!==null&&(ra(t,s,n),ts(t,n))}function jh(t){var s=t.memoizedState,n=0;s!==null&&(n=s.retryLane),im(t,n)}function bh(t,s){var n=0;switch(t.tag){case 13:var a=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(i(314))}a!==null&&a.delete(s),im(t,n)}var lm;lm=function(t,s,n){if(t!==null)if(t.memoizedProps!==s.pendingProps||Zt.current)Xt=!0;else{if((t.lanes&n)===0&&(s.flags&128)===0)return Xt=!1,oh(t,s,n);Xt=(t.flags&131072)!==0}else Xt=!1,gt&&(s.flags&1048576)!==0&&Od(s,hi,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;Ai(t,s),t=s.pendingProps;var o=jn(s,Vt.current);Sn(s,n),o=xo(null,s,a,t,o,n);var c=ho();return s.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Yt(a)?(c=!0,mi(s)):c=!1,s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,io(s),o.updater=Pi,s.stateNode=o,o._reactInternals=s,bo(s,a,t,n),s=ko(null,s,a,!0,c,n)):(s.tag=0,gt&&c&&Ql(s),Jt(null,s,o,n),s=s.child),s;case 16:a=s.elementType;e:{switch(Ai(t,s),t=s.pendingProps,o=a._init,a=o(a._payload),s.type=a,o=s.tag=wh(a),t=As(a,t),o){case 0:s=_o(null,s,a,t,n);break e;case 1:s=Lu(null,s,a,t,n);break e;case 11:s=Pu(null,s,a,t,n);break e;case 14:s=Eu(null,s,a,As(a.type,t),n);break e}throw Error(i(306,a,""))}return s;case 0:return a=s.type,o=s.pendingProps,o=s.elementType===a?o:As(a,o),_o(t,s,a,o,n);case 1:return a=s.type,o=s.pendingProps,o=s.elementType===a?o:As(a,o),Lu(t,s,a,o,n);case 3:e:{if(Mu(s),t===null)throw Error(i(387));a=s.pendingProps,c=s.memoizedState,o=c.element,Gd(t,s),bi(s,a,null,n);var f=s.memoizedState;if(a=f.element,c.isDehydrated)if(c={element:a,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},s.updateQueue.baseState=c,s.memoizedState=c,s.flags&256){o=Pn(Error(i(423)),s),s=$u(t,s,a,n,o);break e}else if(a!==o){o=Pn(Error(i(424)),s),s=$u(t,s,a,n,o);break e}else for(ms=vr(s.stateNode.containerInfo.firstChild),us=s,gt=!0,Es=null,n=Wd(s,null,a,n),s.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wn(),a===o){s=sr(t,s,n);break e}Jt(t,s,a,n)}s=s.child}return s;case 5:return Yd(s),t===null&&Xl(s),a=s.type,o=s.pendingProps,c=t!==null?t.memoizedProps:null,f=o.children,Vl(a,o)?f=null:c!==null&&Vl(a,c)&&(s.flags|=32),zu(t,s),Jt(t,s,f,n),s.child;case 6:return t===null&&Xl(s),null;case 13:return Iu(t,s,n);case 4:return lo(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=_n(s,null,a,n):Jt(t,s,a,n),s.child;case 11:return a=s.type,o=s.pendingProps,o=s.elementType===a?o:As(a,o),Pu(t,s,a,o,n);case 7:return Jt(t,s,s.pendingProps,n),s.child;case 8:return Jt(t,s,s.pendingProps.children,n),s.child;case 12:return Jt(t,s,s.pendingProps.children,n),s.child;case 10:e:{if(a=s.type._context,o=s.pendingProps,c=s.memoizedProps,f=o.value,pt(yi,a._currentValue),a._currentValue=f,c!==null)if(Ps(c.value,f)){if(c.children===o.children&&!Zt.current){s=sr(t,s,n);break e}}else for(c=s.child,c!==null&&(c.return=s);c!==null;){var S=c.dependencies;if(S!==null){f=c.child;for(var L=S.firstContext;L!==null;){if(L.context===a){if(c.tag===1){L=tr(-1,n&-n),L.tag=2;var Q=c.updateQueue;if(Q!==null){Q=Q.shared;var de=Q.pending;de===null?L.next=L:(L.next=de.next,de.next=L),Q.pending=L}}c.lanes|=n,L=c.alternate,L!==null&&(L.lanes|=n),no(c.return,n,s),S.lanes|=n;break}L=L.next}}else if(c.tag===10)f=c.type===s.type?null:c.child;else if(c.tag===18){if(f=c.return,f===null)throw Error(i(341));f.lanes|=n,S=f.alternate,S!==null&&(S.lanes|=n),no(f,n,s),f=c.sibling}else f=c.child;if(f!==null)f.return=c;else for(f=c;f!==null;){if(f===s){f=null;break}if(c=f.sibling,c!==null){c.return=f.return,f=c;break}f=f.return}c=f}Jt(t,s,o.children,n),s=s.child}return s;case 9:return o=s.type,a=s.pendingProps.children,Sn(s,n),o=vs(o),a=a(o),s.flags|=1,Jt(t,s,a,n),s.child;case 14:return a=s.type,o=As(a,s.pendingProps),o=As(a.type,o),Eu(t,s,a,o,n);case 15:return Au(t,s,s.type,s.pendingProps,n);case 17:return a=s.type,o=s.pendingProps,o=s.elementType===a?o:As(a,o),Ai(t,s),s.tag=1,Yt(a)?(t=!0,mi(s)):t=!1,Sn(s,n),bu(s,a,o),bo(s,a,o,n),ko(null,s,a,!0,t,n);case 19:return Ru(t,s,n);case 22:return Tu(t,s,n)}throw Error(i(156,s.tag))};function om(t,s){return Uc(t,s)}function Nh(t,s,n,a){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ns(t,s,n,a){return new Nh(t,s,n,a)}function Ko(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wh(t){if(typeof t=="function")return Ko(t)?1:0;if(t!=null){if(t=t.$$typeof,t===X)return 11;if(t===Z)return 14}return 2}function Ar(t,s){var n=t.alternate;return n===null?(n=Ns(t.tag,s,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=s,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,s=t.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ui(t,s,n,a,o,c){var f=2;if(a=t,typeof t=="function")Ko(t)&&(f=1);else if(typeof t=="string")f=5;else e:switch(t){case se:return Xr(n.children,o,c,s);case re:f=8,o|=8;break;case H:return t=Ns(12,n,s,o|2),t.elementType=H,t.lanes=c,t;case z:return t=Ns(13,n,s,o),t.elementType=z,t.lanes=c,t;case E:return t=Ns(19,n,s,o),t.elementType=E,t.lanes=c,t;case ae:return Bi(n,o,c,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case K:f=10;break e;case I:f=9;break e;case X:f=11;break e;case Z:f=14;break e;case ne:f=16,a=null;break e}throw Error(i(130,t==null?t:typeof t,""))}return s=Ns(f,n,s,o),s.elementType=t,s.type=a,s.lanes=c,s}function Xr(t,s,n,a){return t=Ns(7,t,a,s),t.lanes=n,t}function Bi(t,s,n,a){return t=Ns(22,t,a,s),t.elementType=ae,t.lanes=n,t.stateNode={isHidden:!1},t}function qo(t,s,n){return t=Ns(6,t,null,s),t.lanes=n,t}function Wo(t,s,n){return s=Ns(4,t.children!==null?t.children:[],t.key,s),s.lanes=n,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function _h(t,s,n,a,o){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vl(0),this.expirationTimes=vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vl(0),this.identifierPrefix=a,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Jo(t,s,n,a,o,c,f,S,L){return t=new _h(t,s,n,S,L),s===1?(s=1,c===!0&&(s|=8)):s=0,c=Ns(3,null,null,s),t.current=c,c.stateNode=t,c.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},io(c),t}function kh(t,s,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:me,key:a==null?null:""+a,children:t,containerInfo:s,implementation:n}}function cm(t){if(!t)return br;t=t._reactInternals;e:{if(Ur(t)!==t||t.tag!==1)throw Error(i(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Yt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(i(171))}if(t.tag===1){var n=t.type;if(Yt(n))return Dd(t,n,s)}return s}function dm(t,s,n,a,o,c,f,S,L){return t=Jo(n,a,!0,t,o,c,f,S,L),t.context=cm(null),n=t.current,a=Gt(),o=Pr(n),c=tr(a,o),c.callback=s??null,_r(n,c,o),t.current.lanes=o,ra(t,o,a),ts(t,a),t}function Hi(t,s,n,a){var o=s.current,c=Gt(),f=Pr(o);return n=cm(n),s.context===null?s.context=n:s.pendingContext=n,s=tr(c,f),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=_r(o,s,f),t!==null&&(Ls(t,o,f,c),ji(t,o,f)),f}function Vi(t){return t=t.current,t.child?(t.child.tag===5,t.child.stateNode):null}function um(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<s?n:s}}function Go(t,s){um(t,s),(t=t.alternate)&&um(t,s)}function Sh(){return null}var mm=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qo(t){this._internalRoot=t}Ki.prototype.render=Qo.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));Hi(t,s,null,null)},Ki.prototype.unmount=Qo.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Qr(function(){Hi(null,t,null,null)}),s[Qs]=null}};function Ki(t){this._internalRoot=t}Ki.prototype.unstable_scheduleHydration=function(t){if(t){var s=Gc();t={blockedOn:null,target:t,priority:s};for(var n=0;n<fr.length&&s!==0&&s<fr[n].priority;n++);fr.splice(n,0,t),n===0&&Yc(t)}};function Zo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function qi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pm(){}function Ch(t,s,n,a,o){if(o){if(typeof a=="function"){var c=a;a=function(){var Q=Vi(f);c.call(Q)}}var f=dm(s,a,t,0,null,!1,!1,"",pm);return t._reactRootContainer=f,t[Qs]=f.current,ga(t.nodeType===8?t.parentNode:t),Qr(),f}for(;o=t.lastChild;)t.removeChild(o);if(typeof a=="function"){var S=a;a=function(){var Q=Vi(L);S.call(Q)}}var L=Jo(t,0,!1,null,null,!1,!1,"",pm);return t._reactRootContainer=L,t[Qs]=L.current,ga(t.nodeType===8?t.parentNode:t),Qr(function(){Hi(s,L,n,a)}),L}function Wi(t,s,n,a,o){var c=n._reactRootContainer;if(c){var f=c;if(typeof o=="function"){var S=o;o=function(){var L=Vi(f);S.call(L)}}Hi(s,f,t,o)}else f=Ch(n,s,t,o,a);return Vi(f)}Wc=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var n=sa(s.pendingLanes);n!==0&&(jl(s,n|1),ts(s,St()),(rt&6)===0&&(Tn=St()+500,Nr()))}break;case 13:Qr(function(){var a=er(t,1);if(a!==null){var o=Gt();Ls(a,t,1,o)}}),Go(t,1)}},bl=function(t){if(t.tag===13){var s=er(t,134217728);if(s!==null){var n=Gt();Ls(s,t,134217728,n)}Go(t,134217728)}},Jc=function(t){if(t.tag===13){var s=Pr(t),n=er(t,s);if(n!==null){var a=Gt();Ls(n,t,s,a)}Go(t,s)}},Gc=function(){return ct},Qc=function(t,s){var n=ct;try{return ct=t,s()}finally{ct=n}},kt=function(t,s,n){switch(s){case"input":if(xe(t,n),s=n.name,n.type==="radio"&&s!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<n.length;s++){var a=n[s];if(a!==t&&a.form===t.form){var o=di(a);if(!o)throw Error(i(90));G(a),xe(a,o)}}}break;case"textarea":Le(t,n);break;case"select":s=n.value,s!=null&&Pe(t,!!n.multiple,s,!1)}},Ss=Bo,Ht=Qr;var Ph={usingClientEntryPoint:!1,Events:[ja,yn,di,os,cs,Bo]},Ma={findFiberByHostInstance:Br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Eh={bundleType:Ma.bundleType,version:Ma.version,rendererPackageName:Ma.rendererPackageName,rendererConfig:Ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Fc(t),t===null?null:t.stateNode},findFiberByHostInstance:Ma.findFiberByHostInstance||Sh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ji=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ji.isDisabled&&Ji.supportsFiber)try{Ka=Ji.inject(Eh),Rs=Ji}catch{}}return ss.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ph,ss.createPortal=function(t,s){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zo(s))throw Error(i(200));return kh(t,s,null,n)},ss.createRoot=function(t,s){if(!Zo(t))throw Error(i(299));var n=!1,a="",o=mm;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),s=Jo(t,1,!1,null,null,n,!1,a,o),t[Qs]=s.current,ga(t.nodeType===8?t.parentNode:t),new Qo(s)},ss.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=Fc(s),t=t===null?null:t.stateNode,t},ss.flushSync=function(t){return Qr(t)},ss.hydrate=function(t,s,n){if(!qi(s))throw Error(i(200));return Wi(null,t,s,!0,n)},ss.hydrateRoot=function(t,s,n){if(!Zo(t))throw Error(i(405));var a=n!=null&&n.hydratedSources||null,o=!1,c="",f=mm;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),s=dm(s,null,t,1,n??null,o,!1,c,f),t[Qs]=s.current,ga(t),a)for(t=0;t<a.length;t++)n=a[t],o=n._getVersion,o=o(n._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[n,o]:s.mutableSourceEagerHydrationData.push(n,o);return new Ki(s)},ss.render=function(t,s,n){if(!qi(s))throw Error(i(200));return Wi(null,t,s,!1,n)},ss.unmountComponentAtNode=function(t){if(!qi(t))throw Error(i(40));return t._reactRootContainer?(Qr(function(){Wi(null,null,t,!1,function(){t._reactRootContainer=null,t[Qs]=null})}),!0):!1},ss.unstable_batchedUpdates=Bo,ss.unstable_renderSubtreeIntoContainer=function(t,s,n,a){if(!qi(n))throw Error(i(200));if(t==null||t._reactInternals===void 0)throw Error(i(38));return Wi(t,s,n,!1,a)},ss.version="18.3.1-next-f1338f8080-20240426",ss}var bm;function Rh(){if(bm)return ec.exports;bm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(l){console.error(l)}}return r(),ec.exports=Dh(),ec.exports}var Nm;function Fh(){if(Nm)return Gi;Nm=1;var r=Rh();return Gi.createRoot=r.createRoot,Gi.hydrateRoot=r.hydrateRoot,Gi}var Oh=Fh();var wm="popstate";function Uh(r={}){function l(d,u){let{pathname:p,search:x,hash:g}=d.location;return pc("",{pathname:p,search:x,hash:g},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function i(d,u){return typeof u=="string"?u:Fa(u)}return Hh(l,i,null,r)}function yt(r,l){if(r===!1||r===null||typeof r>"u")throw new Error(l)}function hs(r,l){if(!r){typeof console<"u"&&console.warn(l);try{throw new Error(l)}catch{}}}function Bh(){return Math.random().toString(36).substring(2,10)}function _m(r,l){return{usr:r.state,key:r.key,idx:l}}function pc(r,l,i=null,d){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof l=="string"?Jn(l):l,state:i,key:l&&l.key||d||Bh()}}function Fa({pathname:r="/",search:l="",hash:i=""}){return l&&l!=="?"&&(r+=l.charAt(0)==="?"?l:"?"+l),i&&i!=="#"&&(r+=i.charAt(0)==="#"?i:"#"+i),r}function Jn(r){let l={};if(r){let i=r.indexOf("#");i>=0&&(l.hash=r.substring(i),r=r.substring(0,i));let d=r.indexOf("?");d>=0&&(l.search=r.substring(d),r=r.substring(0,d)),r&&(l.pathname=r)}return l}function Hh(r,l,i,d={}){let{window:u=document.defaultView,v5Compat:p=!1}=d,x=u.history,g="POP",h=null,v=j();v==null&&(v=0,x.replaceState({...x.state,idx:v},""));function j(){return(x.state||{idx:null}).idx}function y(){g="POP";let b=j(),k=b==null?null:b-v;v=b,h&&h({action:g,location:P.location,delta:k})}function _(b,k){g="PUSH";let T=pc(P.location,b,k);v=j()+1;let U=_m(T,v),O=P.createHref(T);try{x.pushState(U,"",O)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;u.location.assign(O)}p&&h&&h({action:g,location:P.location,delta:1})}function N(b,k){g="REPLACE";let T=pc(P.location,b,k);v=j();let U=_m(T,v),O=P.createHref(T);x.replaceState(U,"",O),p&&h&&h({action:g,location:P.location,delta:0})}function B(b){return Vh(b)}let P={get action(){return g},get location(){return r(u,x)},listen(b){if(h)throw new Error("A history only accepts one active listener");return u.addEventListener(wm,y),h=b,()=>{u.removeEventListener(wm,y),h=null}},createHref(b){return l(u,b)},createURL:B,encodeLocation(b){let k=B(b);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:_,replace:N,go(b){return x.go(b)}};return P}function Vh(r,l=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),yt(i,"No window.location.(origin|href) available to create URL");let d=typeof r=="string"?r:Fa(r);return d=d.replace(/ $/,"%20"),!l&&d.startsWith("//")&&(d=i+d),new URL(d,i)}function Qm(r,l,i="/"){return Kh(r,l,i,!1)}function Kh(r,l,i,d){let u=typeof l=="string"?Jn(l):l,p=cr(u.pathname||"/",i);if(p==null)return null;let x=Zm(r);qh(x);let g=null;for(let h=0;g==null&&h<x.length;++h){let v=rf(p);g=tf(x[h],v,d)}return g}function Zm(r,l=[],i=[],d="",u=!1){let p=(x,g,h=u,v)=>{let j={relativePath:v===void 0?x.path||"":v,caseSensitive:x.caseSensitive===!0,childrenIndex:g,route:x};if(j.relativePath.startsWith("/")){if(!j.relativePath.startsWith(d)&&h)return;yt(j.relativePath.startsWith(d),`Absolute route path "${j.relativePath}" nested under path "${d}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),j.relativePath=j.relativePath.slice(d.length)}let y=ir([d,j.relativePath]),_=i.concat(j);x.children&&x.children.length>0&&(yt(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Zm(x.children,l,_,y,h)),!(x.path==null&&!x.index)&&l.push({path:y,score:Xh(y,x.index),routesMeta:_})};return r.forEach((x,g)=>{if(x.path===""||!x.path?.includes("?"))p(x,g);else for(let h of Ym(x.path))p(x,g,!0,h)}),l}function Ym(r){let l=r.split("/");if(l.length===0)return[];let[i,...d]=l,u=i.endsWith("?"),p=i.replace(/\?$/,"");if(d.length===0)return u?[p,""]:[p];let x=Ym(d.join("/")),g=[];return g.push(...x.map(h=>h===""?p:[p,h].join("/"))),u&&g.push(...x),g.map(h=>r.startsWith("/")&&h===""?"/":h)}function qh(r){r.sort((l,i)=>l.score!==i.score?i.score-l.score:ef(l.routesMeta.map(d=>d.childrenIndex),i.routesMeta.map(d=>d.childrenIndex)))}var Wh=/^:[\w-]+$/,Jh=3,Gh=2,Qh=1,Zh=10,Yh=-2,km=r=>r==="*";function Xh(r,l){let i=r.split("/"),d=i.length;return i.some(km)&&(d+=Yh),l&&(d+=Gh),i.filter(u=>!km(u)).reduce((u,p)=>u+(Wh.test(p)?Jh:p===""?Qh:Zh),d)}function ef(r,l){return r.length===l.length&&r.slice(0,-1).every((d,u)=>d===l[u])?r[r.length-1]-l[l.length-1]:0}function tf(r,l,i=!1){let{routesMeta:d}=r,u={},p="/",x=[];for(let g=0;g<d.length;++g){let h=d[g],v=g===d.length-1,j=p==="/"?l:l.slice(p.length)||"/",y=dl({path:h.relativePath,caseSensitive:h.caseSensitive,end:v},j),_=h.route;if(!y&&v&&i&&!d[d.length-1].route.index&&(y=dl({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},j)),!y)return null;Object.assign(u,y.params),x.push({params:u,pathname:ir([p,y.pathname]),pathnameBase:cf(ir([p,y.pathnameBase])),route:_}),y.pathnameBase!=="/"&&(p=ir([p,y.pathnameBase]))}return x}function dl(r,l){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[i,d]=sf(r.path,r.caseSensitive,r.end),u=l.match(i);if(!u)return null;let p=u[0],x=p.replace(/(.)\/+$/,"$1"),g=u.slice(1);return{params:d.reduce((v,{paramName:j,isOptional:y},_)=>{if(j==="*"){let B=g[_]||"";x=p.slice(0,p.length-B.length).replace(/(.)\/+$/,"$1")}const N=g[_];return y&&!N?v[j]=void 0:v[j]=(N||"").replace(/%2F/g,"/"),v},{}),pathname:p,pathnameBase:x,pattern:r}}function sf(r,l=!1,i=!0){hs(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let d=[],u="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,g,h)=>(d.push({paramName:g,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(d.push({paramName:"*"}),u+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?u+="\\/*$":r!==""&&r!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,l?void 0:"i"),d]}function rf(r){try{return r.split("/").map(l=>decodeURIComponent(l).replace(/\//g,"%2F")).join("/")}catch(l){return hs(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${l}).`),r}}function cr(r,l){if(l==="/")return r;if(!r.toLowerCase().startsWith(l.toLowerCase()))return null;let i=l.endsWith("/")?l.length-1:l.length,d=r.charAt(i);return d&&d!=="/"?null:r.slice(i)||"/"}var nf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,af=r=>nf.test(r);function lf(r,l="/"){let{pathname:i,search:d="",hash:u=""}=typeof r=="string"?Jn(r):r,p;if(i)if(af(i))p=i;else{if(i.includes("//")){let x=i;i=i.replace(/\/\/+/g,"/"),hs(!1,`Pathnames cannot have embedded double slashes - normalizing ${x} -> ${i}`)}i.startsWith("/")?p=Sm(i.substring(1),"/"):p=Sm(i,l)}else p=l;return{pathname:p,search:df(d),hash:uf(u)}}function Sm(r,l){let i=l.replace(/\/+$/,"").split("/");return r.split("/").forEach(u=>{u===".."?i.length>1&&i.pop():u!=="."&&i.push(u)}),i.length>1?i.join("/"):"/"}function rc(r,l,i,d){return`Cannot include a '${r}' character in a manually specified \`to.${l}\` field [${JSON.stringify(d)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function of(r){return r.filter((l,i)=>i===0||l.route.path&&l.route.path.length>0)}function vc(r){let l=of(r);return l.map((i,d)=>d===l.length-1?i.pathname:i.pathnameBase)}function jc(r,l,i,d=!1){let u;typeof r=="string"?u=Jn(r):(u={...r},yt(!u.pathname||!u.pathname.includes("?"),rc("?","pathname","search",u)),yt(!u.pathname||!u.pathname.includes("#"),rc("#","pathname","hash",u)),yt(!u.search||!u.search.includes("#"),rc("#","search","hash",u)));let p=r===""||u.pathname==="",x=p?"/":u.pathname,g;if(x==null)g=i;else{let y=l.length-1;if(!d&&x.startsWith("..")){let _=x.split("/");for(;_[0]==="..";)_.shift(),y-=1;u.pathname=_.join("/")}g=y>=0?l[y]:"/"}let h=lf(u,g),v=x&&x!=="/"&&x.endsWith("/"),j=(p||x===".")&&i.endsWith("/");return!h.pathname.endsWith("/")&&(v||j)&&(h.pathname+="/"),h}var ir=r=>r.join("/").replace(/\/\/+/g,"/"),cf=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),df=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,uf=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function mf(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Xm=["POST","PUT","PATCH","DELETE"];new Set(Xm);var pf=["GET",...Xm];new Set(pf);var Gn=m.createContext(null);Gn.displayName="DataRouter";var hl=m.createContext(null);hl.displayName="DataRouterState";m.createContext(!1);var ep=m.createContext({isTransitioning:!1});ep.displayName="ViewTransition";var xf=m.createContext(new Map);xf.displayName="Fetchers";var hf=m.createContext(null);hf.displayName="Await";var $s=m.createContext(null);$s.displayName="Navigation";var Ba=m.createContext(null);Ba.displayName="Location";var qs=m.createContext({outlet:null,matches:[],isDataRoute:!1});qs.displayName="Route";var bc=m.createContext(null);bc.displayName="RouteError";function ff(r,{relative:l}={}){yt(Qn(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:d}=m.useContext($s),{hash:u,pathname:p,search:x}=Ha(r,{relative:l}),g=p;return i!=="/"&&(g=p==="/"?i:ir([i,p])),d.createHref({pathname:g,search:x,hash:u})}function Qn(){return m.useContext(Ba)!=null}function Ws(){return yt(Qn(),"useLocation() may be used only in the context of a <Router> component."),m.useContext(Ba).location}var tp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sp(r){m.useContext($s).static||m.useLayoutEffect(r)}function Is(){let{isDataRoute:r}=m.useContext(qs);return r?Ef():gf()}function gf(){yt(Qn(),"useNavigate() may be used only in the context of a <Router> component.");let r=m.useContext(Gn),{basename:l,navigator:i}=m.useContext($s),{matches:d}=m.useContext(qs),{pathname:u}=Ws(),p=JSON.stringify(vc(d)),x=m.useRef(!1);return sp(()=>{x.current=!0}),m.useCallback((h,v={})=>{if(hs(x.current,tp),!x.current)return;if(typeof h=="number"){i.go(h);return}let j=jc(h,JSON.parse(p),u,v.relative==="path");r==null&&l!=="/"&&(j.pathname=j.pathname==="/"?l:ir([l,j.pathname])),(v.replace?i.replace:i.push)(j,v.state,v)},[l,i,p,u,r])}m.createContext(null);function Ha(r,{relative:l}={}){let{matches:i}=m.useContext(qs),{pathname:d}=Ws(),u=JSON.stringify(vc(i));return m.useMemo(()=>jc(r,JSON.parse(u),d,l==="path"),[r,u,d,l])}function yf(r,l){return rp(r,l)}function rp(r,l,i,d,u){yt(Qn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=m.useContext($s),{matches:x}=m.useContext(qs),g=x[x.length-1],h=g?g.params:{},v=g?g.pathname:"/",j=g?g.pathnameBase:"/",y=g&&g.route;{let T=y&&y.path||"";np(v,!y||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let _=Ws(),N;if(l){let T=typeof l=="string"?Jn(l):l;yt(j==="/"||T.pathname?.startsWith(j),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${j}" but pathname "${T.pathname}" was given in the \`location\` prop.`),N=T}else N=_;let B=N.pathname||"/",P=B;if(j!=="/"){let T=j.replace(/^\//,"").split("/");P="/"+B.replace(/^\//,"").split("/").slice(T.length).join("/")}let b=Qm(r,{pathname:P});hs(y||b!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),hs(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=wf(b&&b.map(T=>Object.assign({},T,{params:Object.assign({},h,T.params),pathname:ir([j,p.encodeLocation?p.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?j:ir([j,p.encodeLocation?p.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),x,i,d,u);return l&&k?m.createElement(Ba.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},k):k}function vf(){let r=Pf(),l=mf(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),i=r instanceof Error?r.stack:null,d="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:d},p={padding:"2px 4px",backgroundColor:d},x=null;return console.error("Error handled by React Router default ErrorBoundary:",r),x=m.createElement(m.Fragment,null,m.createElement("p",null," Hey developer "),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:p},"ErrorBoundary")," or"," ",m.createElement("code",{style:p},"errorElement")," prop on your route.")),m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},l),i?m.createElement("pre",{style:u},i):null,x)}var jf=m.createElement(vf,null),bf=class extends m.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,l){return l.location!==r.location||l.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:l.error,location:l.location,revalidation:r.revalidation||l.revalidation}}componentDidCatch(r,l){this.props.onError?this.props.onError(r,l):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?m.createElement(qs.Provider,{value:this.props.routeContext},m.createElement(bc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Nf({routeContext:r,match:l,children:i}){let d=m.useContext(Gn);return d&&d.static&&d.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=l.route.id),m.createElement(qs.Provider,{value:r},i)}function wf(r,l=[],i=null,d=null,u=null){if(r==null){if(!i)return null;if(i.errors)r=i.matches;else if(l.length===0&&!i.initialized&&i.matches.length>0)r=i.matches;else return null}let p=r,x=i?.errors;if(x!=null){let j=p.findIndex(y=>y.route.id&&x?.[y.route.id]!==void 0);yt(j>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),p=p.slice(0,Math.min(p.length,j+1))}let g=!1,h=-1;if(i)for(let j=0;j<p.length;j++){let y=p[j];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=j),y.route.id){let{loaderData:_,errors:N}=i,B=y.route.loader&&!_.hasOwnProperty(y.route.id)&&(!N||N[y.route.id]===void 0);if(y.route.lazy||B){g=!0,h>=0?p=p.slice(0,h+1):p=[p[0]];break}}}let v=i&&d?(j,y)=>{d(j,{location:i.location,params:i.matches?.[0]?.params??{},errorInfo:y})}:void 0;return p.reduceRight((j,y,_)=>{let N,B=!1,P=null,b=null;i&&(N=x&&y.route.id?x[y.route.id]:void 0,P=y.route.errorElement||jf,g&&(h<0&&_===0?(np("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),B=!0,b=null):h===_&&(B=!0,b=y.route.hydrateFallbackElement||null)));let k=l.concat(p.slice(0,_+1)),T=()=>{let U;return N?U=P:B?U=b:y.route.Component?U=m.createElement(y.route.Component,null):y.route.element?U=y.route.element:U=j,m.createElement(Nf,{match:y,routeContext:{outlet:j,matches:k,isDataRoute:i!=null},children:U})};return i&&(y.route.ErrorBoundary||y.route.errorElement||_===0)?m.createElement(bf,{location:i.location,revalidation:i.revalidation,component:P,error:N,children:T(),routeContext:{outlet:null,matches:k,isDataRoute:!0},onError:v}):T()},null)}function Nc(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _f(r){let l=m.useContext(Gn);return yt(l,Nc(r)),l}function kf(r){let l=m.useContext(hl);return yt(l,Nc(r)),l}function Sf(r){let l=m.useContext(qs);return yt(l,Nc(r)),l}function wc(r){let l=Sf(r),i=l.matches[l.matches.length-1];return yt(i.route.id,`${r} can only be used on routes that contain a unique "id"`),i.route.id}function Cf(){return wc("useRouteId")}function Pf(){let r=m.useContext(bc),l=kf("useRouteError"),i=wc("useRouteError");return r!==void 0?r:l.errors?.[i]}function Ef(){let{router:r}=_f("useNavigate"),l=wc("useNavigate"),i=m.useRef(!1);return sp(()=>{i.current=!0}),m.useCallback(async(u,p={})=>{hs(i.current,tp),i.current&&(typeof u=="number"?r.navigate(u):await r.navigate(u,{fromRouteId:l,...p}))},[r,l])}var Cm={};function np(r,l,i){!l&&!Cm[r]&&(Cm[r]=!0,hs(!1,i))}m.memo(Af);function Af({routes:r,future:l,state:i,unstable_onError:d}){return rp(r,void 0,i,d,l)}function Bn({to:r,replace:l,state:i,relative:d}){yt(Qn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=m.useContext($s);hs(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:p}=m.useContext(qs),{pathname:x}=Ws(),g=Is(),h=jc(r,vc(p),x,d==="path"),v=JSON.stringify(h);return m.useEffect(()=>{g(JSON.parse(v),{replace:l,state:i,relative:d})},[g,v,d,l,i]),null}function dt(r){yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Tf({basename:r="/",children:l=null,location:i,navigationType:d="POP",navigator:u,static:p=!1}){yt(!Qn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let x=r.replace(/^\/*/,"/"),g=m.useMemo(()=>({basename:x,navigator:u,static:p,future:{}}),[x,u,p]);typeof i=="string"&&(i=Jn(i));let{pathname:h="/",search:v="",hash:j="",state:y=null,key:_="default"}=i,N=m.useMemo(()=>{let B=cr(h,x);return B==null?null:{location:{pathname:B,search:v,hash:j,state:y,key:_},navigationType:d}},[x,h,v,j,y,_,d]);return hs(N!=null,`<Router basename="${x}"> is not able to match the URL "${h}${v}${j}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:m.createElement($s.Provider,{value:g},m.createElement(Ba.Provider,{children:l,value:N}))}function Pm({children:r,location:l}){return yf(xc(r),l)}function xc(r,l=[]){let i=[];return m.Children.forEach(r,(d,u)=>{if(!m.isValidElement(d))return;let p=[...l,u];if(d.type===m.Fragment){i.push.apply(i,xc(d.props.children,p));return}yt(d.type===dt,`[${typeof d.type=="string"?d.type:d.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yt(!d.props.index||!d.props.children,"An index route cannot have child routes.");let x={id:d.props.id||p.join("-"),caseSensitive:d.props.caseSensitive,element:d.props.element,Component:d.props.Component,index:d.props.index,path:d.props.path,middleware:d.props.middleware,loader:d.props.loader,action:d.props.action,hydrateFallbackElement:d.props.hydrateFallbackElement,HydrateFallback:d.props.HydrateFallback,errorElement:d.props.errorElement,ErrorBoundary:d.props.ErrorBoundary,hasErrorBoundary:d.props.hasErrorBoundary===!0||d.props.ErrorBoundary!=null||d.props.errorElement!=null,shouldRevalidate:d.props.shouldRevalidate,handle:d.props.handle,lazy:d.props.lazy};d.props.children&&(x.children=xc(d.props.children,p)),i.push(x)}),i}var ll="get",ol="application/x-www-form-urlencoded";function fl(r){return r!=null&&typeof r.tagName=="string"}function zf(r){return fl(r)&&r.tagName.toLowerCase()==="button"}function Lf(r){return fl(r)&&r.tagName.toLowerCase()==="form"}function Mf(r){return fl(r)&&r.tagName.toLowerCase()==="input"}function $f(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function If(r,l){return r.button===0&&(!l||l==="_self")&&!$f(r)}function hc(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((l,i)=>{let d=r[i];return l.concat(Array.isArray(d)?d.map(u=>[i,u]):[[i,d]])},[]))}function Df(r,l){let i=hc(r);return l&&l.forEach((d,u)=>{i.has(u)||l.getAll(u).forEach(p=>{i.append(u,p)})}),i}var Qi=null;function Rf(){if(Qi===null)try{new FormData(document.createElement("form"),0),Qi=!1}catch{Qi=!0}return Qi}var Ff=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nc(r){return r!=null&&!Ff.has(r)?(hs(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ol}"`),null):r}function Of(r,l){let i,d,u,p,x;if(Lf(r)){let g=r.getAttribute("action");d=g?cr(g,l):null,i=r.getAttribute("method")||ll,u=nc(r.getAttribute("enctype"))||ol,p=new FormData(r)}else if(zf(r)||Mf(r)&&(r.type==="submit"||r.type==="image")){let g=r.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=r.getAttribute("formaction")||g.getAttribute("action");if(d=h?cr(h,l):null,i=r.getAttribute("formmethod")||g.getAttribute("method")||ll,u=nc(r.getAttribute("formenctype"))||nc(g.getAttribute("enctype"))||ol,p=new FormData(g,r),!Rf()){let{name:v,type:j,value:y}=r;if(j==="image"){let _=v?`${v}.`:"";p.append(`${_}x`,"0"),p.append(`${_}y`,"0")}else v&&p.append(v,y)}}else{if(fl(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=ll,d=null,u=ol,x=r}return p&&u==="text/plain"&&(x=p,p=void 0),{action:d,method:i.toLowerCase(),encType:u,formData:p,body:x}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _c(r,l){if(r===!1||r===null||typeof r>"u")throw new Error(l)}function Uf(r,l,i){let d=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return d.pathname==="/"?d.pathname=`_root.${i}`:l&&cr(d.pathname,l)==="/"?d.pathname=`${l.replace(/\/$/,"")}/_root.${i}`:d.pathname=`${d.pathname.replace(/\/$/,"")}.${i}`,d}async function Bf(r,l){if(r.id in l)return l[r.id];try{let i=await import(r.module);return l[r.id]=i,i}catch(i){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Hf(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Vf(r,l,i){let d=await Promise.all(r.map(async u=>{let p=l.routes[u.route.id];if(p){let x=await Bf(p,i);return x.links?x.links():[]}return[]}));return Jf(d.flat(1).filter(Hf).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function Em(r,l,i,d,u,p){let x=(h,v)=>i[v]?h.route.id!==i[v].route.id:!0,g=(h,v)=>i[v].pathname!==h.pathname||i[v].route.path?.endsWith("*")&&i[v].params["*"]!==h.params["*"];return p==="assets"?l.filter((h,v)=>x(h,v)||g(h,v)):p==="data"?l.filter((h,v)=>{let j=d.routes[h.route.id];if(!j||!j.hasLoader)return!1;if(x(h,v)||g(h,v))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function Kf(r,l,{includeHydrateFallback:i}={}){return qf(r.map(d=>{let u=l.routes[d.route.id];if(!u)return[];let p=[u.module];return u.clientActionModule&&(p=p.concat(u.clientActionModule)),u.clientLoaderModule&&(p=p.concat(u.clientLoaderModule)),i&&u.hydrateFallbackModule&&(p=p.concat(u.hydrateFallbackModule)),u.imports&&(p=p.concat(u.imports)),p}).flat(1))}function qf(r){return[...new Set(r)]}function Wf(r){let l={},i=Object.keys(r).sort();for(let d of i)l[d]=r[d];return l}function Jf(r,l){let i=new Set;return new Set(l),r.reduce((d,u)=>{let p=JSON.stringify(Wf(u));return i.has(p)||(i.add(p),d.push({key:p,link:u})),d},[])}function ap(){let r=m.useContext(Gn);return _c(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Gf(){let r=m.useContext(hl);return _c(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var kc=m.createContext(void 0);kc.displayName="FrameworkContext";function ip(){let r=m.useContext(kc);return _c(r,"You must render this element inside a <HydratedRouter> element"),r}function Qf(r,l){let i=m.useContext(kc),[d,u]=m.useState(!1),[p,x]=m.useState(!1),{onFocus:g,onBlur:h,onMouseEnter:v,onMouseLeave:j,onTouchStart:y}=l,_=m.useRef(null);m.useEffect(()=>{if(r==="render"&&x(!0),r==="viewport"){let P=k=>{k.forEach(T=>{x(T.isIntersecting)})},b=new IntersectionObserver(P,{threshold:.5});return _.current&&b.observe(_.current),()=>{b.disconnect()}}},[r]),m.useEffect(()=>{if(d){let P=setTimeout(()=>{x(!0)},100);return()=>{clearTimeout(P)}}},[d]);let N=()=>{u(!0)},B=()=>{u(!1),x(!1)};return i?r!=="intent"?[p,_,{}]:[p,_,{onFocus:Ia(g,N),onBlur:Ia(h,B),onMouseEnter:Ia(v,N),onMouseLeave:Ia(j,B),onTouchStart:Ia(y,N)}]:[!1,_,{}]}function Ia(r,l){return i=>{r&&r(i),i.defaultPrevented||l(i)}}function Zf({page:r,...l}){let{router:i}=ap(),d=m.useMemo(()=>Qm(i.routes,r,i.basename),[i.routes,r,i.basename]);return d?m.createElement(Xf,{page:r,matches:d,...l}):null}function Yf(r){let{manifest:l,routeModules:i}=ip(),[d,u]=m.useState([]);return m.useEffect(()=>{let p=!1;return Vf(r,l,i).then(x=>{p||u(x)}),()=>{p=!0}},[r,l,i]),d}function Xf({page:r,matches:l,...i}){let d=Ws(),{manifest:u,routeModules:p}=ip(),{basename:x}=ap(),{loaderData:g,matches:h}=Gf(),v=m.useMemo(()=>Em(r,l,h,u,d,"data"),[r,l,h,u,d]),j=m.useMemo(()=>Em(r,l,h,u,d,"assets"),[r,l,h,u,d]),y=m.useMemo(()=>{if(r===d.pathname+d.search+d.hash)return[];let B=new Set,P=!1;if(l.forEach(k=>{let T=u.routes[k.route.id];!T||!T.hasLoader||(!v.some(U=>U.route.id===k.route.id)&&k.route.id in g&&p[k.route.id]?.shouldRevalidate||T.hasClientLoader?P=!0:B.add(k.route.id))}),B.size===0)return[];let b=Uf(r,x,"data");return P&&B.size>0&&b.searchParams.set("_routes",l.filter(k=>B.has(k.route.id)).map(k=>k.route.id).join(",")),[b.pathname+b.search]},[x,g,d,u,v,l,r,p]),_=m.useMemo(()=>Kf(j,u),[j,u]),N=Yf(j);return m.createElement(m.Fragment,null,y.map(B=>m.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...i})),_.map(B=>m.createElement("link",{key:B,rel:"modulepreload",href:B,...i})),N.map(({key:B,link:P})=>m.createElement("link",{key:B,nonce:i.nonce,...P})))}function eg(...r){return l=>{r.forEach(i=>{typeof i=="function"?i(l):i!=null&&(i.current=l)})}}var lp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lp&&(window.__reactRouterVersion="7.9.6")}catch{}function tg({basename:r,children:l,window:i}){let d=m.useRef();d.current==null&&(d.current=Uh({window:i,v5Compat:!0}));let u=d.current,[p,x]=m.useState({action:u.action,location:u.location}),g=m.useCallback(h=>{m.startTransition(()=>x(h))},[x]);return m.useLayoutEffect(()=>u.listen(g),[u,g]),m.createElement(Tf,{basename:r,children:l,location:p.location,navigationType:p.action,navigator:u})}var op=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sc=m.forwardRef(function({onClick:l,discover:i="render",prefetch:d="none",relative:u,reloadDocument:p,replace:x,state:g,target:h,to:v,preventScrollReset:j,viewTransition:y,..._},N){let{basename:B}=m.useContext($s),P=typeof v=="string"&&op.test(v),b,k=!1;if(typeof v=="string"&&P&&(b=v,lp))try{let H=new URL(window.location.href),K=v.startsWith("//")?new URL(H.protocol+v):new URL(v),I=cr(K.pathname,B);K.origin===H.origin&&I!=null?v=I+K.search+K.hash:k=!0}catch{hs(!1,`<Link to="${v}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=ff(v,{relative:u}),[U,O,A]=Qf(d,_),me=ng(v,{replace:x,state:g,target:h,preventScrollReset:j,relative:u,viewTransition:y});function se(H){l&&l(H),H.defaultPrevented||me(H)}let re=m.createElement("a",{..._,...A,href:b||T,onClick:k||p?l:se,ref:eg(N,O),target:h,"data-discover":!P&&i==="render"?"true":void 0});return U&&!P?m.createElement(m.Fragment,null,re,m.createElement(Zf,{page:T})):re});Sc.displayName="Link";var cl=m.forwardRef(function({"aria-current":l="page",caseSensitive:i=!1,className:d="",end:u=!1,style:p,to:x,viewTransition:g,children:h,...v},j){let y=Ha(x,{relative:v.relative}),_=Ws(),N=m.useContext(hl),{navigator:B,basename:P}=m.useContext($s),b=N!=null&&dg(y)&&g===!0,k=B.encodeLocation?B.encodeLocation(y).pathname:y.pathname,T=_.pathname,U=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;i||(T=T.toLowerCase(),U=U?U.toLowerCase():null,k=k.toLowerCase()),U&&P&&(U=cr(U,P)||U);const O=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let A=T===k||!u&&T.startsWith(k)&&T.charAt(O)==="/",me=U!=null&&(U===k||!u&&U.startsWith(k)&&U.charAt(k.length)==="/"),se={isActive:A,isPending:me,isTransitioning:b},re=A?l:void 0,H;typeof d=="function"?H=d(se):H=[d,A?"active":null,me?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let K=typeof p=="function"?p(se):p;return m.createElement(Sc,{...v,"aria-current":re,className:H,ref:j,style:K,to:x,viewTransition:g},typeof h=="function"?h(se):h)});cl.displayName="NavLink";var sg=m.forwardRef(({discover:r="render",fetcherKey:l,navigate:i,reloadDocument:d,replace:u,state:p,method:x=ll,action:g,onSubmit:h,relative:v,preventScrollReset:j,viewTransition:y,..._},N)=>{let B=og(),P=cg(g,{relative:v}),b=x.toLowerCase()==="get"?"get":"post",k=typeof g=="string"&&op.test(g),T=U=>{if(h&&h(U),U.defaultPrevented)return;U.preventDefault();let O=U.nativeEvent.submitter,A=O?.getAttribute("formmethod")||x;B(O||U.currentTarget,{fetcherKey:l,method:A,navigate:i,replace:u,state:p,relative:v,preventScrollReset:j,viewTransition:y})};return m.createElement("form",{ref:N,method:b,action:P,onSubmit:d?h:T,..._,"data-discover":!k&&r==="render"?"true":void 0})});sg.displayName="Form";function rg(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cp(r){let l=m.useContext(Gn);return yt(l,rg(r)),l}function ng(r,{target:l,replace:i,state:d,preventScrollReset:u,relative:p,viewTransition:x}={}){let g=Is(),h=Ws(),v=Ha(r,{relative:p});return m.useCallback(j=>{if(If(j,l)){j.preventDefault();let y=i!==void 0?i:Fa(h)===Fa(v);g(r,{replace:y,state:d,preventScrollReset:u,relative:p,viewTransition:x})}},[h,g,v,i,d,l,r,u,p,x])}function ag(r){hs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let l=m.useRef(hc(r)),i=m.useRef(!1),d=Ws(),u=m.useMemo(()=>Df(d.search,i.current?null:l.current),[d.search]),p=Is(),x=m.useCallback((g,h)=>{const v=hc(typeof g=="function"?g(new URLSearchParams(u)):g);i.current=!0,p("?"+v,h)},[p,u]);return[u,x]}var ig=0,lg=()=>`__${String(++ig)}__`;function og(){let{router:r}=cp("useSubmit"),{basename:l}=m.useContext($s),i=Cf();return m.useCallback(async(d,u={})=>{let{action:p,method:x,encType:g,formData:h,body:v}=Of(d,l);if(u.navigate===!1){let j=u.fetcherKey||lg();await r.fetch(j,i,u.action||p,{preventScrollReset:u.preventScrollReset,formData:h,body:v,formMethod:u.method||x,formEncType:u.encType||g,flushSync:u.flushSync})}else await r.navigate(u.action||p,{preventScrollReset:u.preventScrollReset,formData:h,body:v,formMethod:u.method||x,formEncType:u.encType||g,replace:u.replace,state:u.state,fromRouteId:i,flushSync:u.flushSync,viewTransition:u.viewTransition})},[r,l,i])}function cg(r,{relative:l}={}){let{basename:i}=m.useContext($s),d=m.useContext(qs);yt(d,"useFormAction must be used inside a RouteContext");let[u]=d.matches.slice(-1),p={...Ha(r||".",{relative:l})},x=Ws();if(r==null){p.search=x.search;let g=new URLSearchParams(p.search),h=g.getAll("index");if(h.some(j=>j==="")){g.delete("index"),h.filter(y=>y).forEach(y=>g.append("index",y));let j=g.toString();p.search=j?`?${j}`:""}}return(!r||r===".")&&u.route.index&&(p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(p.pathname=p.pathname==="/"?i:ir([i,p.pathname])),Fa(p)}function dg(r,{relative:l}={}){let i=m.useContext(ep);yt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:d}=cp("useViewTransitionState"),u=Ha(r,{relative:l});if(!i.isTransitioning)return!1;let p=cr(i.currentLocation.pathname,d)||i.currentLocation.pathname,x=cr(i.nextLocation.pathname,d)||i.nextLocation.pathname;return dl(u.pathname,x)!=null||dl(u.pathname,p)!=null}const ug=[{id:"1",name:"Service Provider",email:"manglaaryan05@gmail.com",phone:"9876543210",status:"approved",specialization:["AC Repair","Electrician Services"],rating:4.8,totalJobs:120},{id:"2",name:"Jane Smith",email:"jane@example.com",phone:"8765432109",status:"approved",specialization:["Salon at Home","Massage Therapy"],rating:4.9,totalJobs:85},{id:"3",name:"Bob Johnson",email:"bob@example.com",phone:"7654321098",status:"pending",specialization:["Plumbing Services","Home Cleaning"],rating:0,totalJobs:0}],dp=[{id:"1",name:"Regular User",email:"user@KwikMedi.com",role:"user",status:"active",phone:"9876543210",address:"123 Main St, Apt 4B"},{id:"2",name:"Service Provider",email:"provider@KwikMedi.com",role:"provider",status:"active",phone:"8765432109",address:"456 Park Ave, Suite 10"},{id:"3",name:"Admin User",email:"admin@KwikMedi.com",role:"admin",status:"active",phone:"7654321098"}],mg={};let Ln=dp.filter(r=>r.role==="user"&&r.id).map(r=>({id:r.id,name:r.name||"",email:r.email,phone:r.phone||"",password:r.role==="user"?"Neighshop#user":"Neighshop#admin",role:"user",status:r.status,createdAt:new Date().toISOString()})),en=ug.map(r=>({id:r.id,name:r.name,email:r.email,phone:r.phone,password:"Neighshop#provider",service:r.specialization[0],pincode:"400001",address:"",documentUrl:"/documents/provider.pdf",role:"provider",status:r.status,createdAt:new Date().toISOString()}));const Mn=r=>new Promise(l=>setTimeout(l,r)),tn=r=>({id:r.id,name:r.name,email:r.email,role:r.role,status:r.status,phone:r.phone}),Am=r=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(r),ac=r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r),Tm=r=>/^\d{10}$/.test(r),Zi=mg?.VITE_API_BASE_URL||"/api",Yi={login:async(r,l,i)=>{if(await Mn(1e3),!ac(r))return{success:!1,message:"Invalid email format"};if(i==="admin"){if(r==="admin@KwikMedi.com"&&l==="Neighshop#admin"){const d=dp.find(u=>u.role==="admin");if(d)return{success:!0,message:"Admin login successful",user:d}}return{success:!1,message:"Invalid admin credentials"}}if(i==="user"){const d=Ln.find(u=>u.email===r);if(d&&d.password===l)return d.status!=="active"?{success:!1,message:"Your account is inactive"}:{success:!0,message:"Login successful",user:tn(d)}}if(i==="provider"){const d=en.find(u=>u.email===r);if(d&&d.password===l)return d.status!=="approved"?{success:!1,message:"Your account is pending approval"}:{success:!0,message:"Login successful",user:tn(d)}}return{success:!1,message:"Invalid credentials"}},registerUser:async r=>{if(await Mn(1e3),!ac(r.email))return{success:!1,message:"Invalid email format"};if(!Tm(r.phone))return{success:!1,message:"Invalid phone number format (10 digits required)"};if(!Am(r.password))return{success:!1,message:"Password must be at least 8 characters long and contain uppercase, lowercase, number and special character"};if(Ln.some(i=>i.email===r.email)||en.some(i=>i.email===r.email))return{success:!1,message:"Email already registered"};const l={...r,id:(Ln.length+1).toString(),role:"user",status:"active",createdAt:new Date().toISOString()};return Ln.push(l),{success:!0,message:"Registration successful",user:tn(l)}},registerProvider:async(r,l)=>{if(await Mn(1e3),!ac(r.email))return{success:!1,message:"Invalid email format"};if(!Tm(r.phone))return{success:!1,message:"Invalid phone number format (10 digits required)"};if(!Am(r.password))return{success:!1,message:"Password must be at least 8 characters long and contain uppercase, lowercase, number and special character"};if(!r.service)return{success:!1,message:"Service selection is required"};if(!r.pincode||!/^\d{6}$/.test(r.pincode))return{success:!1,message:"Invalid pincode format (6 digits required)"};if(Ln.some(p=>p.email===r.email)||en.some(p=>p.email===r.email))return{success:!1,message:"Email already registered"};if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/png"].includes(l.type))return{success:!1,message:"Invalid document format"};if(l.size>5*1024*1024)return{success:!1,message:"Document size should be less than 5MB"};const d=URL.createObjectURL(l),u={...r,id:(en.length+1).toString(),role:"provider",status:"pending",documentUrl:d,createdAt:new Date().toISOString()};return en.push(u),{success:!0,message:"Registration submitted for approval. You will be notified once approved.",user:tn(u)}},getRegisteredUsers:async()=>(await Mn(500),Ln.map(tn)),getRegisteredProviders:async()=>(await Mn(500),en.map(tn)),updateProviderStatus:async(r,l)=>{await Mn(500);const i=en.find(d=>d.id===r);return i?(i.status=l,{success:!0,message:`Provider ${l} successfully`,user:tn(i)}):{success:!1,message:"Provider not found"}},sendOTP:async r=>{const l=await fetch(`${Zi}/api/provider/send-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})});if(!l.ok)throw new Error("Failed to send OTP");return l.json()},verifyOTP:async(r,l)=>{const i=await fetch(`${Zi}/api/provider/verify-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,otp:l})});if(!i.ok)throw new Error("Failed to verify OTP");return i.json()},getServiceProviderInfo:async r=>{const l=await fetch(`${Zi}/create_account_service_provider`,{method:"GET",headers:{Authorization:`Bearer ${r}`}});if(!l.ok)throw new Error("Failed to get service provider info");return l.json()},createServiceProviderAccount:async(r,l)=>{const i=new FormData;i.append("name",l.name),i.append("service_type",l.service_type),i.append("phone_number",l.phone_number),i.append("address",l.address),i.append("pincode",l.pincode),i.append("document",l.document),l.referral&&i.append("referral",l.referral);const d=await fetch(`${Zi}/create_account_service_provider`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:i});if(!d.ok)throw new Error("Failed to create service provider account");return d.json()}},pg={},$n=pg?.VITE_API_BASE_URL||"https://kwikmedi.mycartly.in",up=m.createContext(void 0),Ut=()=>{const r=m.useContext(up);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},xg=({children:r})=>{const[l,i]=m.useState(null),[d,u]=m.useState(null),[p,x]=m.useState(!0),g=()=>{const b=localStorage.getItem("KwikMedi_user"),k=localStorage.getItem("KwikMedi_token"),T=localStorage.getItem("KwikMedi_role");if(k&&b)try{const U=JSON.parse(b);if(console.log("AuthContext: Restoring user data",{storedRole:T,userData:U}),T==="admin"||T==="helping_staff"||T==="finance_admin"||U.role==="admin"||U.role==="super_admin"||U.role==="helping_staff"||U.role==="helping_staff_admin"||U.role==="finance_admin"){if(k.startsWith("mock_token_")){console.log("AuthContext: Rejecting mock token, clearing storage"),localStorage.removeItem("KwikMedi_token"),localStorage.removeItem("KwikMedi_user"),localStorage.removeItem("KwikMedi_role"),u(null),i(null),x(!1);return}fetch(`${$n}/api/admin/me`,{headers:{Authorization:`Bearer ${k}`}}).then(O=>{if(O.ok)return O.json();throw new Error("Token validation failed")}).then(O=>{if(O.admin){u(k);let A=O.admin.role;A==="super_admin"?A="admin":A==="helping_staff_admin"&&(A="helping_staff");const me={...O.admin,role:A};console.log("AuthContext: Setting user data after validation",me),i(me),localStorage.setItem("KwikMedi_user",JSON.stringify(me)),localStorage.setItem("KwikMedi_role",A)}else{if((T==="helping_staff"||T==="finance_admin")&&U){console.log(`AuthContext: Using stored ${T} data (admin_me returned no admin)`),u(k);const A={...U,role:T};i(A),localStorage.setItem("KwikMedi_user",JSON.stringify(A)),localStorage.setItem("KwikMedi_role",T),x(!1);return}throw new Error("Invalid response")}}).catch(()=>{console.log("AuthContext: Token validation failed, clearing storage"),localStorage.removeItem("KwikMedi_token"),localStorage.removeItem("KwikMedi_user"),localStorage.removeItem("KwikMedi_role"),u(null),i(null)}).finally(()=>{x(!1)})}else T==="provider"||U.role==="provider"?(u(k),i(U),x(!1)):fetch(`${$n}/api/user/profile`,{headers:{Authorization:`Bearer ${k}`}}).then(O=>{O.ok?(u(k),i(U)):(localStorage.removeItem("KwikMedi_token"),localStorage.removeItem("KwikMedi_user"),localStorage.removeItem("KwikMedi_role"),u(null),i(null))}).catch(()=>{localStorage.removeItem("KwikMedi_token"),localStorage.removeItem("KwikMedi_user"),localStorage.removeItem("KwikMedi_role"),u(null),i(null)}).finally(()=>{x(!1)})}catch{localStorage.removeItem("KwikMedi_token"),localStorage.removeItem("KwikMedi_user"),localStorage.removeItem("KwikMedi_role"),u(null),i(null),x(!1)}else x(!1)};m.useEffect(()=>{g();const b=T=>{(T.key==="KwikMedi_token"||T.key==="KwikMedi_user"||T.key==="KwikMedi_role")&&g()},k=()=>{g()};return window.addEventListener("storage",b),window.addEventListener("authUpdate",k),()=>{window.removeEventListener("storage",b),window.removeEventListener("authUpdate",k)}},[]);const P={user:l,isAuthenticated:!!d,isLoading:p,token:d,sendOTP:async b=>{try{await Yi.sendOTP(b)}catch(k){throw console.error("Failed to send OTP:",k),k}},verifyOTP:async(b,k)=>{try{const T=await Yi.verifyOTP(b,k);if(T.is_existing&&T.token&&T.provider){u(T.token),localStorage.setItem("KwikMedi_token",T.token);const U={id:T.provider.id.toString(),email:T.provider.email,role:"provider",status:T.provider.status||"pending",name:T.provider.name||"",phone:T.provider.phone||""};return i(U),localStorage.setItem("KwikMedi_user",JSON.stringify(U)),localStorage.setItem("KwikMedi_role","provider"),{token:T.token,user:U,isNewUser:!1}}else return{token:null,user:null,isNewUser:!0}}catch(T){throw console.error("OTP verification failed:",T),T}},createServiceProviderAccount:async b=>{if(!d)throw new Error("No authentication token found");try{await Yi.createServiceProviderAccount(d,b);const T={email:(await Yi.getServiceProviderInfo(d)).email,role:"provider",name:b.name,phone:b.phone_number,status:"pending"};i(T),localStorage.setItem("KwikMedi_user",JSON.stringify(T))}catch(k){throw console.error("Failed to create service provider account:",k),k}},adminLogin:async(b,k)=>{try{const T=await fetch(`${$n}/api/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:b,password:k})}),U=await T.json();if(!T.ok)throw new Error(U.message||"Login failed");if(U.token){u(U.token);const O=U.admin.role==="super_admin"?"admin":U.admin.role,A={...U.admin,role:O};i(A),localStorage.setItem("KwikMedi_token",U.token),localStorage.setItem("KwikMedi_user",JSON.stringify(A)),localStorage.setItem("KwikMedi_role","admin")}else throw new Error("No token received")}catch(T){throw console.error("Admin login failed:",T),T}},login:async(b,k,T="user")=>{try{const U=await fetch(`${$n}/api/user/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:b,password:k})}),O=await U.json();if(!U.ok)throw new Error(O.message||"Login failed");if(O.token&&O.user){u(O.token);const A={id:O.user.id,email:O.user.email,role:T,status:O.user.status||"active",name:O.user.name||"",phone:O.user.phone||""};i(A),localStorage.setItem("KwikMedi_token",O.token),localStorage.setItem("KwikMedi_user",JSON.stringify(A)),localStorage.setItem("KwikMedi_role",T);const me=localStorage.getItem("selectedService"),se=localStorage.getItem("selectedCategory");me?localStorage.removeItem("selectedService"):se&&localStorage.removeItem("selectedCategory")}else throw new Error("No token or user data received")}catch(U){throw console.error("Login failed:",U),U}},logout:()=>{i(null),u(null),localStorage.removeItem("KwikMedi_user"),localStorage.removeItem("KwikMedi_token"),localStorage.removeItem("KwikMedi_role")},refreshUserData:async()=>{try{const b=localStorage.getItem("KwikMedi_token"),k=localStorage.getItem("KwikMedi_role");if(b&&k)if(k==="admin"||k==="helping_staff"||k==="finance_admin")try{const T=await fetch(`${$n}/api/admin/me`,{headers:{Authorization:`Bearer ${b}`}});if(T.ok){const U=await T.json(),O={...U.admin,role:U.admin.role==="super_admin"?"admin":U.admin.role};i(O),localStorage.setItem("KwikMedi_user",JSON.stringify(O)),console.log("Admin data refreshed:",O)}else T.status===404&&console.log("Admin /me endpoint not found, using stored user data")}catch(T){console.log("Admin /me endpoint error, using stored user data:",T)}else if(k==="provider")console.log("Service provider session maintained - no auto-refresh");else{const T=await fetch(`${$n}/api/user/profile`,{headers:{Authorization:`Bearer ${b}`}});if(T.ok){const O=(await T.json()).profile,A={id:O.id,email:O.email,role:k,status:O.status||"active",name:O.name||"",phone:O.phone||""};console.log("Refreshing user data:",A),i(A),localStorage.setItem("KwikMedi_user",JSON.stringify(A)),console.log("User data updated in context and localStorage")}else console.error("Failed to refresh user data:",T.status)}}catch(b){console.error("Error refreshing user data:",b)}}};return e.jsx(up.Provider,{value:P,children:r})},mp=m.createContext(void 0),_t=()=>{const r=m.useContext(mp);if(!r)throw new Error("useToast must be used within a ToastProvider");return r},hg=({children:r})=>{const[l,i]=m.useState([]),d=m.useCallback((p,x)=>{const g=Math.random().toString(36).substring(2,9);i(h=>[...h,{id:g,message:p,type:x}]),setTimeout(()=>{i(h=>h.filter(v=>v.id!==g))},5e3)},[]),u=m.useCallback(p=>{i(x=>x.filter(g=>g.id!==p))},[]);return e.jsx(mp.Provider,{value:{toasts:l,addToast:d,removeToast:u},children:r})},fg=()=>{const{toasts:r,removeToast:l}=_t();return r.length===0?null:e.jsx("div",{className:"fixed bottom-0 right-0 p-4 z-50 max-w-md w-full",children:e.jsx("div",{className:"space-y-2",children:r.map(i=>e.jsxs("div",{className:`p-4 rounded-lg shadow-lg flex items-start justify-between transition-all duration-300 animate-slide-up
              ${i.type==="success"?"bg-success text-white":i.type==="error"?"bg-error text-white":i.type==="warning"?"bg-warning text-white":"bg-primary text-secondary-dark"}
            `,children:[e.jsx("p",{children:i.message}),e.jsx("button",{onClick:()=>l(i.id),className:"ml-4 text-sm hover:opacity-70",children:""})]},i.id))})})};var gg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const yg=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ye=(r,l)=>{const i=m.forwardRef(({color:d="currentColor",size:u=24,strokeWidth:p=2,absoluteStrokeWidth:x,className:g="",children:h,...v},j)=>m.createElement("svg",{ref:j,...gg,width:u,height:u,stroke:d,strokeWidth:x?Number(p)*24/Number(u):p,className:["lucide",`lucide-${yg(r)}`,g].join(" "),...v},[...l.map(([y,_])=>m.createElement(y,_)),...Array.isArray(h)?h:[h]]));return i.displayName=`${r}`,i};const vg=ye("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);const Cc=ye("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const _s=ye("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Pc=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const Ec=ye("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);const jg=ye("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);const bg=ye("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);const Ng=ye("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Oa=ye("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const wg=ye("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);const pp=ye("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const Ac=ye("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);const fs=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Vn=ye("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const ns=ye("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const _g=ye("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);const Rr=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const on=ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const Js=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const Zn=ye("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const xp=ye("CircleDashed",[["path",{d:"M10.1 2.182a10 10 0 0 1 3.8 0",key:"5ilxe3"}],["path",{d:"M13.9 21.818a10 10 0 0 1-3.8 0",key:"11zvb9"}],["path",{d:"M17.609 3.721a10 10 0 0 1 2.69 2.7",key:"1iw5b2"}],["path",{d:"M2.182 13.9a10 10 0 0 1 0-3.8",key:"c0bmvh"}],["path",{d:"M20.279 17.609a10 10 0 0 1-2.7 2.69",key:"1ruxm7"}],["path",{d:"M21.818 10.1a10 10 0 0 1 0 3.8",key:"qkgqxc"}],["path",{d:"M3.721 6.391a10 10 0 0 1 2.7-2.69",key:"1mcia2"}],["path",{d:"M6.391 20.279a10 10 0 0 1-2.69-2.7",key:"1fvljs"}]]);const kg=ye("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);const as=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const fc=ye("Columns3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const Sg=ye("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);const Vs=ye("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const dr=ye("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const hp=ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const cn=ye("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const ic=ye("FilePen",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v10",key:"x7tsz2"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10.4 12.6a2 2 0 1 1 3 3L8 21l-4 1 1-4Z",key:"o3xyfb"}]]);const Hs=ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const Ua=ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const zm=ye("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);const Lm=ye("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);const Cg=ye("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);const fp=ye("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const Pg=ye("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const Eg=ye("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const Ag=ye("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const Tg=ye("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const zg=ye("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);const Mr=ye("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const Tc=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const $r=ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const lr=ye("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Lg=ye("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const ar=ye("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const gp=ye("NotebookPen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M18.4 2.6a2.17 2.17 0 0 1 3 3L16 11l-4 1 1-4Z",key:"1dba1m"}]]);const an=ye("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const ln=ye("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);const Mg=ye("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);const $g=ye("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const dn=ye("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Ig=ye("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);const ks=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Mm=ye("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);const ws=ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const Dg=ye("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const is=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Rg=ye("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const Fg=ye("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);const zc=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Ks=ye("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Og=ye("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);const yp=ye("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const vp=ye("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);const Ug=ye("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const Ir=ye("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);const ul=ye("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);const Hn=ye("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const Bg=ye("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);const Hg=ye("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);const Vg=ye("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);const Dr=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const ml=ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const jp=ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const bp=ye("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const Lc=ye("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const Kg=ye("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);const Nt=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const ur=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Np=ye("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);const or=ye("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const ut=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const qg=ye("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Wg=()=>{const[r,l]=m.useState(""),[i,d]=m.useState(""),[u,p]=m.useState(!1),x=Is(),{adminLogin:g,isAuthenticated:h,user:v,isLoading:j}=Ut(),{addToast:y}=_t();if(m.useEffect(()=>{!j&&h&&v?.role==="admin"&&x("/admin/dashboard",{replace:!0})},[h,v,j,x]),j)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});const _=async N=>{N.preventDefault(),p(!0);try{await g(r,i);const B=localStorage.getItem("KwikMedi_user");if(B){const k=JSON.parse(B).role||"";if(k==="finance_admin"){y("Please use Financial Staff login","error"),p(!1);return}if(k==="helping_staff"||k==="helping_staff_admin"){y("Please use Helping Staff login","error"),p(!1);return}}y("Login successful!","success");const P=()=>{h&&v?.role==="admin"?x("/admin/dashboard",{replace:!0}):setTimeout(P,50)};setTimeout(P,100)}catch(B){const P=B?.message||"Login failed. Please check your credentials.";y(P,"error")}finally{p(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("button",{onClick:()=>x("/login"),className:"flex items-center text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(Pc,{className:"h-5 w-5 mr-2"}),"Back to Login Selection"]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"bg-indigo-100 p-3 rounded-full",children:e.jsx(Ks,{className:"h-8 w-8 text-indigo-600"})})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Super Admin Login"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Full system access and management"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:_,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),e.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Username",value:r,onChange:N=>l(N.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:i,onChange:N=>d(N.target.value)})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:u?"Logging in...":"Sign in"})})]})]})})},Jg=r=>{const l=new Date,i=l.toISOString().split("T")[0];let d;switch(r){case"7d":d=new Date(l.setDate(l.getDate()-7)).toISOString().split("T")[0];break;case"30d":d=new Date(l.setDate(l.getDate()-30)).toISOString().split("T")[0];break;case"90d":d=new Date(l.setDate(l.getDate()-90)).toISOString().split("T")[0];break;case"1y":d=new Date(l.setFullYear(l.getFullYear()-1)).toISOString().split("T")[0];break;default:d=new Date(l.setDate(l.getDate()-7)).toISOString().split("T")[0]}return{from:d,to:i}},Gg=({dateFrom:r,dateTo:l,onDateRangeChange:i,onExport:d})=>{const u=g=>{const{from:h,to:v}=Jg(g);i(h,v)},p=(g,h)=>{g==="from"?i(h,l):i(r,h)},x=()=>{const h=new Date().toISOString().split("T")[0];if(l===h){const v=Math.ceil((new Date(l).getTime()-new Date(r).getTime())/864e5);if(v<=7)return"7d";if(v<=30)return"30d";if(v<=90)return"90d";if(v<=365)return"1y"}return"custom"};return e.jsx("div",{className:"bg-white/95 backdrop-blur-md border-b border-gray-200/50 z-50 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-primary rounded-xl shadow-lg",children:e.jsx(Ng,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Admin Dashboard"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Platform Analytics & Management"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"hidden sm:flex items-center space-x-2 bg-gray-50 rounded-lg px-3 py-2",children:[e.jsx(fs,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:x(),onChange:g=>{g.target.value!=="custom"&&u(g.target.value)},className:"bg-transparent border-none text-sm focus:outline-none focus:ring-0 text-gray-700 font-medium",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"}),e.jsx("option",{value:"custom",children:"Custom Range"})]})]}),x()==="custom"&&e.jsxs("div",{className:"hidden md:flex items-center space-x-2 bg-gray-50 rounded-lg px-3 py-2",children:[e.jsx("input",{type:"date",value:r,onChange:g=>p("from",g.target.value),className:"bg-transparent border-none text-sm focus:outline-none focus:ring-0 text-gray-700",max:l}),e.jsx("span",{className:"text-gray-400",children:"to"}),e.jsx("input",{type:"date",value:l,onChange:g=>p("to",g.target.value),className:"bg-transparent border-none text-sm focus:outline-none focus:ring-0 text-gray-700",min:r,max:new Date().toISOString().split("T")[0]})]}),d&&e.jsxs("button",{onClick:d,className:"flex items-center space-x-2 bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(hp,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"})]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(is,{className:"w-5 h-5"})})]})]})})})},Qg={},Zg=Qg?.VITE_API_BASE_URL||"/api",Yn=Zg,$m=(r,l)=>({metrics:{total_revenue:245678.5,total_bookings:1234,completed_bookings:1156,active_users:856,active_providers:234,pending_disputes:12,platform_revenue:24567.85,new_users_today:23,new_providers_today:5},growth_rates:{revenue_growth:15.5,booking_growth:22.3,user_growth:18.7},recent_activity:{new_bookings:45,completed_bookings:38,new_disputes:2,payments_received:42},date_range:{from:r,to:l}}),Yg=(r,l)=>{const[i,d]=m.useState(null),[u,p]=m.useState(!0),[x,g]=m.useState(null),{token:h}=Ut();return m.useEffect(()=>{(async()=>{if(!r||!l){p(!1);return}const j=h&&h.startsWith("mock_token_");if(!h||j){setTimeout(()=>{d($m(r,l)),p(!1)},500);return}try{const y=await fetch(`${Yn}/admin/analytics/dashboard?date_from=${r}&date_to=${l}`,{headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}});if(!y.ok)throw y.status===401?new Error("Unauthorized: Please log in again"):y.status===500?new Error("Server error: Please try again later"):new Error(`HTTP error! status: ${y.status}`);const _=await y.json();if(!_.success)throw new Error(_.message||"Failed to fetch dashboard data");d({metrics:_.metrics,growth_rates:_.growth_rates,recent_activity:_.recent_activity,date_range:_.date_range})}catch(y){console.error("Error fetching dashboard data:",y),d($m(r,l)),g(null)}finally{p(!1)}})()},[r,l,h]),{data:i,loading:u,error:x}},Im=()=>({trend:[{period:"2024-01-01",total_revenue:12500,platform_revenue:1250,transaction_count:45,avg_transaction_value:277.78},{period:"2024-01-02",total_revenue:13800,platform_revenue:1380,transaction_count:52,avg_transaction_value:265.38},{period:"2024-01-03",total_revenue:15200,platform_revenue:1520,transaction_count:58,avg_transaction_value:262.07},{period:"2024-01-04",total_revenue:14100,platform_revenue:1410,transaction_count:54,avg_transaction_value:261.11},{period:"2024-01-05",total_revenue:16700,platform_revenue:1670,transaction_count:63,avg_transaction_value:265.08}],payment_methods:[{method:"Credit Card",total_amount:145678,transaction_count:523},{method:"Debit Card",total_amount:67890,transaction_count:312},{method:"UPI",total_amount:32110,transaction_count:399}],category_revenue:[{category:"Plumbing",total_revenue:45678,booking_count:234,avg_booking_value:195.21},{category:"Electrical",total_revenue:38900,booking_count:198,avg_booking_value:196.46},{category:"Cleaning",total_revenue:32100,booking_count:267,avg_booking_value:120.34},{category:"Carpentry",total_revenue:28900,booking_count:145,avg_booking_value:199.31}],top_providers:[{name:"John Smith",business_name:"Smith Services",total_earnings:12345,booking_count:67},{name:"Sarah Johnson",business_name:"Johnson Pro",total_earnings:11234,booking_count:58},{name:"Mike Williams",business_name:"Williams Solutions",total_earnings:9876,booking_count:52}]}),Xg=(r,l)=>{const[i,d]=m.useState(null),[u,p]=m.useState(!0),[x,g]=m.useState(null),{token:h}=Ut();return m.useEffect(()=>{(async()=>{if(!r||!l){p(!1);return}const j=h&&h.startsWith("mock_token_");if(!h||j){setTimeout(()=>{d(Im()),p(!1)},500);return}try{const y=await fetch(`${Yn}/admin/analytics/revenue?date_from=${r}&date_to=${l}`,{headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}});if(!y.ok)throw y.status===401?new Error("Unauthorized: Please log in again"):y.status===500?new Error("Server error: Please try again later"):new Error(`HTTP error! status: ${y.status}`);const _=await y.json();if(!_.success)throw new Error(_.message||"Failed to fetch revenue data");d(_.revenue_data)}catch(y){console.error("Error fetching revenue data:",y),d(Im()),g(null)}finally{p(!1)}})()},[r,l,h]),{data:i,loading:u,error:x}},Dm=()=>({registration_trend:[{date:"2024-01-01",new_users:12},{date:"2024-01-02",new_users:18},{date:"2024-01-03",new_users:15},{date:"2024-01-04",new_users:22},{date:"2024-01-05",new_users:19}],activity_metrics:{total_users:856,active_users_30d:623,verified_users:712,users_with_bookings:534},geographic_distribution:[{city:"Mumbai",state:"Maharashtra",user_count:234,active_users:189},{city:"Delhi",state:"Delhi",user_count:198,active_users:156},{city:"Bangalore",state:"Karnataka",user_count:167,active_users:134},{city:"Pune",state:"Maharashtra",user_count:123,active_users:98}],engagement_metrics:{avg_bookings_per_user:2.3,avg_spent_per_user:456.78,repeat_user_rate:68.5},cohort_analysis:[{month:"2024-01",users_count:234,retention_rate:85.2},{month:"2023-12",users_count:198,retention_rate:82.3},{month:"2023-11",users_count:167,retention_rate:79.6}]}),e0=(r,l)=>{const[i,d]=m.useState(null),[u,p]=m.useState(!0),[x,g]=m.useState(null),{token:h}=Ut();return m.useEffect(()=>{(async()=>{if(!r||!l){p(!1);return}const j=h&&h.startsWith("mock_token_");if(!h||j){setTimeout(()=>{d(Dm()),p(!1)},500);return}try{const y=await fetch(`${Yn}/admin/analytics/users?date_from=${r}&date_to=${l}`,{headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}});if(!y.ok)throw y.status===401?new Error("Unauthorized: Please log in again"):y.status===500?new Error("Server error: Please try again later"):new Error(`HTTP error! status: ${y.status}`);const _=await y.json();d(_.user_analytics)}catch(y){console.error("Error fetching user analytics:",y),d(Dm()),g(null)}finally{p(!1)}})()},[r,l,h]),{data:i,loading:u,error:x}},Rm=()=>({booking_trend:[{date:"2024-01-01",total_bookings:45,completed_bookings:42,cancelled_bookings:3,completion_rate:93.3},{date:"2024-01-02",total_bookings:52,completed_bookings:48,cancelled_bookings:4,completion_rate:92.3},{date:"2024-01-03",total_bookings:58,completed_bookings:55,cancelled_bookings:3,completion_rate:94.8},{date:"2024-01-04",total_bookings:54,completed_bookings:51,cancelled_bookings:3,completion_rate:94.4},{date:"2024-01-05",total_bookings:63,completed_bookings:60,cancelled_bookings:3,completion_rate:95.2}],status_distribution:[{status:"completed",count:1156},{status:"pending",count:45},{status:"in_progress",count:23},{status:"cancelled",count:10}],peak_booking_times:[{hour:9,booking_count:45},{hour:10,booking_count:67},{hour:11,booking_count:89},{hour:14,booking_count:78},{hour:15,booking_count:92},{hour:16,booking_count:85}],category_performance:[{category:"Plumbing",total_bookings:234,completed_bookings:221,completion_rate:94.4,avg_booking_value:195.21,avg_rating:4.6},{category:"Electrical",total_bookings:198,completed_bookings:187,completion_rate:94.4,avg_booking_value:196.46,avg_rating:4.7},{category:"Cleaning",total_bookings:267,completed_bookings:254,completion_rate:95.1,avg_booking_value:120.34,avg_rating:4.5}],conversion_funnel:{searches:5678,profile_views:3456,bookings:1234,completed_bookings:1156,search_to_booking_rate:21.7,booking_completion_rate:93.7}}),t0=(r,l)=>{const[i,d]=m.useState(null),[u,p]=m.useState(!0),[x,g]=m.useState(null),{token:h}=Ut();return m.useEffect(()=>{(async()=>{if(!r||!l){p(!1);return}const j=h&&h.startsWith("mock_token_");if(!h||j){setTimeout(()=>{d(Rm()),p(!1)},500);return}try{const y=await fetch(`${Yn}/admin/analytics/bookings?date_from=${r}&date_to=${l}`,{headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}});if(!y.ok)throw y.status===401?new Error("Unauthorized: Please log in again"):y.status===500?new Error("Server error: Please try again later"):new Error(`HTTP error! status: ${y.status}`);const _=await y.json();d(_.booking_analytics)}catch(y){console.error("Error fetching booking analytics:",y),d(Rm()),g(null)}finally{p(!1)}})()},[r,l,h]),{data:i,loading:u,error:x}},Fm=()=>({registration_trend:[{date:"2024-01-01",new_providers:3},{date:"2024-01-02",new_providers:5},{date:"2024-01-03",new_providers:4},{date:"2024-01-04",new_providers:6},{date:"2024-01-05",new_providers:5}],status_distribution:[{status:"approved",verification_status:"verified",count:189},{status:"approved",verification_status:"pending",count:45},{status:"pending",verification_status:"pending",count:23},{status:"rejected",verification_status:"rejected",count:12}],top_performers:[{name:"John Smith",business_name:"Smith Services",rating:4.8,total_bookings:67,completed_bookings:65,completion_rate:97,total_earnings:12345},{name:"Sarah Johnson",business_name:"Johnson Pro",rating:4.7,total_bookings:58,completed_bookings:56,completion_rate:96.6,total_earnings:11234},{name:"Mike Williams",business_name:"Williams Solutions",rating:4.6,total_bookings:52,completed_bookings:50,completion_rate:96.2,total_earnings:9876}],performance_metrics:{avg_platform_rating:4.5,active_providers:234,verified_providers:189,avg_completion_rate:94.2},category_distribution:[{category:"Plumbing",provider_count:67,avg_rating:4.6},{category:"Electrical",provider_count:54,avg_rating:4.7},{category:"Cleaning",provider_count:78,avg_rating:4.5},{category:"Carpentry",provider_count:35,avg_rating:4.6}]}),s0=(r,l)=>{const[i,d]=m.useState(null),[u,p]=m.useState(!0),[x,g]=m.useState(null),{token:h}=Ut();return m.useEffect(()=>{(async()=>{if(!r||!l){p(!1);return}const j=h&&h.startsWith("mock_token_");if(!h||j){setTimeout(()=>{d(Fm()),p(!1)},500);return}try{const y=await fetch(`${Yn}/admin/analytics/providers?date_from=${r}&date_to=${l}`,{headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}});if(!y.ok)throw y.status===401?new Error("Unauthorized: Please log in again"):y.status===500?new Error("Server error: Please try again later"):new Error(`HTTP error! status: ${y.status}`);const _=await y.json();if(!_.success)throw new Error(_.message||"Failed to fetch provider analytics");d(_.provider_analytics)}catch(y){console.error("Error fetching provider analytics:",y),d(Fm()),g(null)}finally{p(!1)}})()},[r,l,h]),{data:i,loading:u,error:x}},Om=()=>({current_metrics:{avg_response_time_ms:145,avg_db_query_time_ms:23,avg_server_load:45.6,avg_memory_usage:62.3,avg_error_rate:.12,avg_uptime:99.8},time_series:[{timestamp:"2024-01-05T00:00:00Z",response_time:142,db_query_time:21,active_sessions:234,server_load:43.2,memory_usage:60.1,error_rate:.1},{timestamp:"2024-01-05T01:00:00Z",response_time:145,db_query_time:23,active_sessions:256,server_load:45.6,memory_usage:62.3,error_rate:.12},{timestamp:"2024-01-05T02:00:00Z",response_time:148,db_query_time:24,active_sessions:278,server_load:47.8,memory_usage:64.5,error_rate:.14},{timestamp:"2024-01-05T03:00:00Z",response_time:143,db_query_time:22,active_sessions:245,server_load:44.1,memory_usage:61.2,error_rate:.11}]}),r0=()=>{const[r,l]=m.useState(null),[i,d]=m.useState(!0),[u,p]=m.useState(null),{token:x}=Ut();return m.useEffect(()=>{(async()=>{const h=x&&x.startsWith("mock_token_");if(!x||h){setTimeout(()=>{l(Om()),d(!1)},500);return}try{const v=await fetch(`${Yn}/admin/analytics/system-performance`,{headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"}});if(!v.ok)throw v.status===401?new Error("Unauthorized: Please log in again"):v.status===500?new Error("Server error: Please try again later"):new Error(`HTTP error! status: ${v.status}`);const j=await v.json();if(!j.success)throw new Error(j.message||"Failed to fetch system performance data");l(j.performance_data)}catch(v){console.error("Error fetching system performance data:",v),l(Om()),p(null)}finally{d(!1)}})()},[x]),{data:r,loading:i,error:u}},n0=({dateFrom:r,dateTo:l})=>{const{data:i,loading:d,error:u}=Yg(r,l);if(d)return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((x,g)=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 animate-pulse",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"w-20 h-6 bg-gray-200 rounded-full"})]}),e.jsx("div",{className:"w-24 h-8 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"w-32 h-4 bg-gray-200 rounded"})]},g))});if(u||!i)return e.jsx("div",{className:"text-red-500 p-4 bg-red-50 rounded-lg",children:u||"Failed to load metrics"});const p=[{name:"Total Revenue",value:`$${i.metrics.total_revenue.toLocaleString()}`,change:`${i.growth_rates.revenue_growth>0?"+":""}${i.growth_rates.revenue_growth}%`,changeType:i.growth_rates.revenue_growth>=0?"positive":"negative",icon:dr,gradient:"bg-primary"},{name:"Total Orders",value:i.metrics.total_bookings.toLocaleString(),change:`${i.growth_rates.booking_growth>0?"+":""}${i.growth_rates.booking_growth}%`,changeType:i.growth_rates.booking_growth>=0?"positive":"negative",icon:fs,gradient:"bg-primary"},{name:"Completed Orders",value:i.metrics.completed_bookings.toLocaleString(),change:`${(i.metrics.completed_bookings/i.metrics.total_bookings*100).toFixed(1)}%`,changeType:"positive",icon:ns,gradient:"bg-primary"},{name:"Active Users",value:i.metrics.active_users.toLocaleString(),change:`${i.growth_rates.user_growth>0?"+":""}${i.growth_rates.user_growth}%`,changeType:i.growth_rates.user_growth>=0?"positive":"negative",icon:ur,gradient:"bg-primary"},{name:"Active Vendors",value:i.metrics.active_providers.toLocaleString(),change:`${i.metrics.new_providers_today>0?"+":""}${i.metrics.new_providers_today}`,changeType:"positive",icon:ul,gradient:"bg-primary"},{change:"Pending",changeType:"negative",icon:_s,gradient:"bg-primary"},{name:"New Users Today",value:i.metrics.new_users_today.toLocaleString(),change:"Today",changeType:"positive",icon:Lc,gradient:"bg-primary"},{name:"Pending Disputes",value:i.metrics.pending_disputes.toLocaleString(),change:"Active",changeType:"negative",icon:Cc,gradient:"bg-primary"}];return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:p.map((x,g)=>{const h=x.icon;return e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-white/20 hover:scale-105 hover:bg-white/90",style:{animationDelay:`${g*50}ms`},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`flex items-center justify-center w-12 h-12 ${x.gradient} rounded-xl shadow-md`,children:e.jsx(h,{className:"w-6 h-6 text-white"})}),e.jsx("div",{className:`text-sm font-semibold px-3 py-1 rounded-full ${x.changeType==="positive","text-primary bg-secondary border border-primary/20"}`,children:x.change})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:x.value}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:x.name})]})]},x.name)})})},a0=[{name:"Revenue Growth",value:"12.5%",icon:ml,color:"emerald",gradient:"from-emerald-400 to-teal-500"},{name:"Booking Growth",value:"8.2%",icon:fs,color:"blue",gradient:"from-blue-400 to-cyan-500"},{name:"User Growth",value:"15.3%",icon:ml,color:"purple",gradient:"from-purple-400 to-indigo-500"}],i0=[{type:"New Bookings",count:47,color:"blue",icon:fs,gradient:"from-blue-400 to-cyan-500"},{type:"Completed Bookings",count:32,color:"emerald",icon:fs,gradient:"from-emerald-400 to-teal-500"},{type:"New Disputes",count:3,color:"red",icon:Cc,gradient:"from-red-400 to-rose-500"},{type:"Payments Received",count:28,color:"green",icon:Vs,gradient:"from-green-400 to-emerald-500"}],l0=()=>e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-white/90 to-blue-50/50 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx("div",{className:"w-2 h-6 bg-gradient-to-b from-blue-500 to-indigo-600 rounded-full mr-3"}),"Growth Overview"]}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:a0.map(r=>{const l=r.icon;return e.jsxs("div",{className:"text-center group",children:[e.jsx("div",{className:`flex items-center justify-center w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br ${r.gradient} shadow-lg group-hover:scale-110 transition-transform duration-300`,children:e.jsx(l,{className:"w-8 h-8 text-white"})}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:r.value}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:r.name})]},r.name)})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-white/90 to-purple-50/50 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx("div",{className:"w-2 h-6 bg-gradient-to-b from-purple-500 to-pink-600 rounded-full mr-3"}),"Recent Activity"]}),e.jsx("div",{className:"space-y-4",children:i0.map(r=>{const l=r.icon;return e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/60 backdrop-blur-sm hover:bg-white/80 transition-all duration-200 border border-white/30 hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-xl bg-gradient-to-br ${r.gradient} shadow-md`,children:e.jsx(l,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"font-semibold text-gray-900",children:r.type})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:r.count}),e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Today"})]})]},r.type)})})]})]}),o0=({dateFrom:r,dateTo:l})=>{const{data:i,loading:d,error:u}=Xg(r,l);if(d)return e.jsxs("div",{className:"bg-gradient-to-br from-white/90 to-emerald-50/50 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 animate-pulse",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-32 h-8 bg-gray-200 rounded"}),e.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded-full"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:e.jsx("div",{className:"space-y-4",children:[...Array(6)].map((h,v)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-8 h-6 bg-gray-200 rounded"}),e.jsx("div",{className:"flex-1 h-6 bg-gray-200 rounded-full"}),e.jsx("div",{className:"w-16 h-6 bg-gray-200 rounded"})]},v))})})]});if(u||!i)return e.jsx("div",{className:"text-red-500 p-4 bg-red-50 rounded-lg",children:u||"Failed to load revenue insights"});const p=Math.max(...i.trend.map(h=>h.total_revenue));i.trend.reduce((h,v)=>h+v.total_revenue,0);const x=Math.max(...i.payment_methods.map(h=>h.total_amount)),g=Math.max(...i.category_revenue.map(h=>h.total_revenue));return e.jsxs("div",{className:"bg-gradient-to-br from-white/90 to-emerald-50/50 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx("div",{className:"w-2 h-6 bg-gradient-to-b from-emerald-500 to-teal-600 rounded-full mr-3"}),"Revenue Insights"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-6 border border-white/30",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-6 flex items-center",children:[e.jsx(ml,{className:"w-5 h-5 mr-2 text-emerald-600"}),"Revenue Over Time"]}),e.jsx("div",{className:"space-y-4",children:i.trend.map((h,v)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"w-20 text-sm font-semibold text-gray-700",children:h.period}),e.jsxs("div",{className:"flex-1 bg-gray-200 rounded-full h-6 relative overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-400 via-teal-500 to-blue-500 h-6 rounded-full transition-all duration-1000 shadow-sm",style:{width:`${p>0?h.total_revenue/p*100:0}%`,animationDelay:`${v*200}ms`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})]}),e.jsxs("span",{className:"w-20 text-sm font-bold text-gray-900 text-right",children:["$",h.total_revenue.toLocaleString()]})]},h.period))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-6 border border-white/30",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(Vs,{className:"w-5 h-5 mr-2 text-blue-600"}),"Payment Methods"]}),e.jsx("div",{className:"space-y-3",children:i.payment_methods.map((h,v)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/40 rounded-lg border border-white/20",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-gradient-to-r from-blue-400 to-blue-600 shadow-sm"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700 capitalize",children:h.method})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-blue-600 h-2.5 rounded-full transition-all duration-1000",style:{width:`${x>0?h.total_amount/x*100:0}%`,animationDelay:`${v*150}ms`}})}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 min-w-[80px] text-right",children:["$",h.total_amount.toLocaleString()]})]})]},h.method))})]}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-6 border border-white/30",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(Ig,{className:"w-5 h-5 mr-2 text-purple-600"}),"Revenue by Category"]}),e.jsx("div",{className:"space-y-3",children:i.category_revenue.map((h,v)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 capitalize",children:h.category}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["$",h.total_revenue.toLocaleString()]})]}),e.jsx("div",{className:"bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-400 to-purple-600 h-3 rounded-full transition-all duration-1000 shadow-sm",style:{width:`${g>0?h.total_revenue/g*100:0}%`,animationDelay:`${v*200}ms`}})})]},h.category))})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-6 flex items-center",children:[e.jsx(Ir,{className:"w-5 h-5 mr-2 text-yellow-500"}),"Top Earning Providers"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:i.top_providers.map((h,v)=>e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm p-6 rounded-xl border border-white/30 hover:bg-white/80 hover:shadow-lg transition-all duration-300 hover:scale-105",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-bold shadow-md",children:h.name.split(" ").map(j=>j[0]).join("")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900 truncate",children:h.name}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:h.business_name})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xl font-bold text-emerald-600",children:["$",h.total_earnings.toLocaleString()]}),e.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-100 px-2 py-1 rounded-full",children:[e.jsx(Ir,{className:"w-4 h-4 text-yellow-500 fill-current"}),e.jsxs("span",{className:"text-sm font-semibold text-yellow-700",children:[h.booking_count," bookings"]})]})]})]},h.name))})]})]})},c0=({dateFrom:r,dateTo:l})=>{const{data:i,loading:d,error:u}=e0(r,l);if(d)return e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 animate-pulse",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-32 h-8 bg-gray-200 rounded"}),e.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded-full"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((y,_)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded"}),e.jsx("div",{className:"w-32 h-4 bg-gray-200 rounded"})]},_))})]});if(u||!i)return e.jsx("div",{className:"text-red-500 p-4 bg-red-50 rounded-lg",children:u||"Failed to load user analytics"});const p=i.activity_metrics||{};i.engagement_metrics;const x=p.total_users||0,g=p.active_users_30d||0,h=p.verified_users||0,v=p.users_with_bookings||0,j=[{name:"Total Users",value:x.toLocaleString(),change:`${h} verified`,changeType:"positive",icon:ur,gradient:"from-blue-400 to-cyan-500"},{name:"Active Users (30d)",value:g.toLocaleString(),change:"Last 30 days",changeType:"positive",icon:Lc,gradient:"from-green-400 to-emerald-500"},{name:"Users with Bookings",value:v.toLocaleString(),change:`${x>0?Math.round(v/x*100):0}% of total`,changeType:"positive",icon:bp,gradient:"from-purple-400 to-indigo-500"},{name:"Verified Users",value:h.toLocaleString(),change:`${x>0?Math.round(h/x*100):0}% verified`,changeType:"positive",icon:Kg,gradient:"from-red-400 to-rose-500"}];return e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"User Analytics"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleString()]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:j.map(y=>{const _=y.icon;return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`flex items-center justify-center w-16 h-16 bg-gradient-to-br ${y.gradient} rounded-xl shadow-md`,children:e.jsx(_,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.value}),e.jsx("p",{className:"text-sm text-gray-600",children:y.name})]}),e.jsx("div",{className:`text-sm font-medium px-3 py-1 rounded-full inline-block ${y.changeType==="positive"?"text-emerald-700 bg-emerald-100 border border-emerald-200":"text-red-700 bg-red-100 border border-red-200"}`,children:y.change})]},y.name)})})]})},d0=({dateFrom:r,dateTo:l})=>{const{data:i,loading:d,error:u}=t0(r,l);if(d)return e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 animate-pulse",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-32 h-8 bg-gray-200 rounded"}),e.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded-full"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((y,_)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded"}),e.jsx("div",{className:"w-32 h-4 bg-gray-200 rounded"})]},_))})]});if(u||!i)return e.jsx("div",{className:"text-red-500 p-4 bg-red-50 rounded-lg",children:u||"Failed to load booking analytics"});const p=i.booking_trend&&i.booking_trend.length>0?i.booking_trend[i.booking_trend.length-1]:null,x=i.booking_trend?i.booking_trend.reduce((y,_)=>y+_.total_bookings,0):0,g=i.booking_trend?i.booking_trend.reduce((y,_)=>y+_.completed_bookings,0):0,h=i.booking_trend?i.booking_trend.reduce((y,_)=>y+_.cancelled_bookings,0):0,v=i.booking_trend&&i.booking_trend.length>0?i.booking_trend.reduce((y,_)=>y+_.completion_rate,0)/i.booking_trend.length:0,j=[{name:"Total Bookings",value:x.toLocaleString(),change:`${p?.total_bookings||0} today`,changeType:"positive",icon:fs,gradient:"from-blue-400 to-cyan-500"},{name:"Completed Bookings",value:g.toLocaleString(),change:`${v.toFixed(1)}% avg completion`,changeType:"positive",icon:ns,gradient:"from-green-400 to-emerald-500"},{name:"Cancelled Bookings",value:h.toLocaleString(),change:`${(h/x*100).toFixed(1)}% cancellation rate`,changeType:"negative",icon:or,gradient:"from-red-400 to-rose-500"},{name:"Peak Hour",value:`${i.peak_booking_times&&i.peak_booking_times.length>0?i.peak_booking_times.reduce((y,_)=>y.booking_count>_.booking_count?y:_).hour:0}:00`,change:"Most Active",changeType:"positive",icon:as,gradient:"from-yellow-400 to-orange-500"},{name:"Search to Booking",value:`${i.conversion_funnel.search_to_booking_rate.toFixed(1)}%`,change:`${i.conversion_funnel.searches.toLocaleString()} searches`,changeType:"positive",icon:dr,gradient:"from-purple-400 to-indigo-500"},{name:"Profile Views",value:i.conversion_funnel.profile_views.toLocaleString(),change:`${(i.conversion_funnel.profile_views/i.conversion_funnel.searches*100).toFixed(1)}% view rate`,changeType:"positive",icon:_s,gradient:"from-orange-400 to-red-500"}];return e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Booking Analytics"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleString()]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(y=>{const _=y.icon;return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`flex items-center justify-center w-16 h-16 bg-gradient-to-br ${y.gradient} rounded-xl shadow-md`,children:e.jsx(_,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.value}),e.jsx("p",{className:"text-sm text-gray-600",children:y.name})]}),e.jsx("div",{className:`text-sm font-medium px-3 py-1 rounded-full inline-block ${y.changeType==="positive"?"text-emerald-700 bg-emerald-100 border border-emerald-200":y.changeType==="negative"?"text-red-700 bg-red-100 border border-red-200":"text-yellow-700 bg-yellow-100 border border-yellow-200"}`,children:y.change})]},y.name)})})]})},u0=({dateFrom:r,dateTo:l})=>{const{data:i,loading:d,error:u}=s0(r,l);if(d)return e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 animate-pulse",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-32 h-8 bg-gray-200 rounded"}),e.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded-full"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((v,j)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded"}),e.jsx("div",{className:"w-32 h-4 bg-gray-200 rounded"})]},j))})]});if(u||!i)return e.jsx("div",{className:"text-red-500 p-4 bg-red-50 rounded-lg",children:u||"Failed to load provider analytics"});const p=i.registration_trend&&i.registration_trend.length>0?i.registration_trend[i.registration_trend.length-1]:null,x=i.status_distribution?i.status_distribution.reduce((v,j)=>v+j.count,0):0,g=i.status_distribution?i.status_distribution.filter(v=>v.verification_status==="verified").reduce((v,j)=>v+j.count,0):0,h=[{name:"Total Providers",value:x.toLocaleString(),change:`${p?.new_providers||0} new today`,changeType:"positive",icon:ul,gradient:"from-blue-400 to-cyan-500"},{name:"Verified Providers",value:g.toLocaleString(),change:`${(g/x*100).toFixed(1)}% verified`,changeType:"positive",icon:Lc,gradient:"from-green-400 to-emerald-500"},{name:"Average Rating",value:i.performance_metrics.avg_platform_rating.toFixed(1),change:`${i.performance_metrics.avg_completion_rate.toFixed(1)}% completion`,changeType:"positive",icon:Ir,gradient:"from-yellow-400 to-orange-500"},{name:"Active Providers",value:i.performance_metrics.active_providers.toLocaleString(),change:`${(i.performance_metrics.active_providers/x*100).toFixed(1)}% active`,changeType:"positive",icon:dr,gradient:"from-purple-400 to-indigo-500"},{name:"Top Performer",value:i.top_performers[0]?.name||"N/A",change:`${i.top_performers[0]?.rating.toFixed(1)||"0"} rating`,changeType:"positive",icon:as,gradient:"from-pink-400 to-rose-500"},{name:"Category Leaders",value:i.category_distribution.length.toString(),change:`${i.category_distribution[0]?.category||"N/A"} leading`,changeType:"positive",icon:_s,gradient:"from-orange-400 to-red-500"}];return e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Provider Analytics"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleString()]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(v=>{const j=v.icon;return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`flex items-center justify-center w-16 h-16 bg-gradient-to-br ${v.gradient} rounded-xl shadow-md`,children:e.jsx(j,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.value}),e.jsx("p",{className:"text-sm text-gray-600",children:v.name})]}),e.jsx("div",{className:`text-sm font-medium px-3 py-1 rounded-full inline-block ${v.changeType==="positive"?"text-emerald-700 bg-emerald-100 border border-emerald-200":"text-red-700 bg-red-100 border border-red-200"}`,children:v.change})]},v.name)})})]})},m0=()=>{const{data:r,loading:l,error:i}=r0();if(l)return e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 animate-pulse",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-32 h-8 bg-gray-200 rounded"}),e.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded-full"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((u,p)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded"}),e.jsx("div",{className:"w-32 h-4 bg-gray-200 rounded"})]},p))})]});if(i||!r)return e.jsx("div",{className:"text-red-500 p-4 bg-red-50 rounded-lg",children:i||"Failed to load system performance data"});const d=[{name:"Response Time",value:`${r.current_metrics.avg_response_time_ms}ms`,change:`${r.current_metrics.avg_response_time_ms<200?"Good":"Slow"}`,changeType:r.current_metrics.avg_response_time_ms<200?"positive":"negative",icon:as,gradient:"from-blue-400 to-cyan-500"},{name:"DB Query Time",value:`${r.current_metrics.avg_db_query_time_ms}ms`,change:`${r.current_metrics.avg_db_query_time_ms<100?"Fast":"Slow"}`,changeType:r.current_metrics.avg_db_query_time_ms<100?"positive":"negative",icon:Sg,gradient:"from-purple-400 to-indigo-500"},{name:"Server Load",value:`${r.current_metrics.avg_server_load}%`,change:`${r.current_metrics.avg_server_load<80?"Normal":"High"}`,changeType:r.current_metrics.avg_server_load<80?"positive":"negative",icon:Fg,gradient:"from-emerald-400 to-teal-500"},{name:"Memory Usage",value:`${r.current_metrics.avg_memory_usage}%`,change:`${r.current_metrics.avg_memory_usage<80?"Good":"High"}`,changeType:r.current_metrics.avg_memory_usage<80?"positive":"negative",icon:Cg,gradient:"from-orange-400 to-red-500"},{name:"Error Rate",value:`${r.current_metrics.avg_error_rate}%`,change:`${r.current_metrics.avg_error_rate<1?"Low":"High"}`,changeType:r.current_metrics.avg_error_rate<1?"positive":"negative",icon:_s,gradient:"from-pink-400 to-rose-500"},{name:"Uptime",value:`${r.current_metrics.avg_uptime}%`,change:`${r.current_metrics.avg_uptime>99.9?"Excellent":"Good"}`,changeType:"positive",icon:vg,gradient:"from-yellow-400 to-orange-500"}];return e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"System Performance"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleString()]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(u=>{const p=u.icon;return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`flex items-center justify-center w-16 h-16 bg-gradient-to-br ${u.gradient} rounded-xl shadow-md`,children:e.jsx(p,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.value}),e.jsx("p",{className:"text-sm text-gray-600",children:u.name})]}),e.jsx("div",{className:`text-sm font-medium px-3 py-1 rounded-full inline-block ${u.changeType==="positive"?"text-emerald-700 bg-emerald-100 border border-emerald-200":"text-red-700 bg-red-100 border border-red-200"}`,children:u.change})]},u.name)})})]})},Um=({isMobile:r,toggleSidebar:l})=>{const{user:i,logout:d}=Ut(),u=Ws(),p=Is(),x=u.pathname==="/admin/finance-panel",h=new URLSearchParams(u.search).get("tab")||"overview",v=[{id:"overview",label:"Overview",icon:ml},{id:"bookings",label:"Bookings",icon:fs},{id:"vendors",label:"Vendors",icon:Og},{id:"settlements",label:"Settlements",icon:ws},{id:"payouts",label:"Payouts",icon:Vs},{id:"gst",label:"GST Reports",icon:Hs},{id:"transactions",label:"Transactions",icon:dr},{id:"refunds",label:"Refunds",icon:Cc},...i?.role==="admin"?[{id:"staff",label:"Financial Staff",icon:Nt}]:[]],j=[{name:"Dashboard",to:"/admin/dashboard",icon:e.jsx(zm,{size:20})},{name:"Vendors",to:"/admin/providers",icon:e.jsx(ln,{size:20})},{name:"Users",to:"/admin/users",icon:e.jsx(Nt,{size:20})},{name:"Categories",to:"/admin/categories",icon:e.jsx(zg,{size:20})},{name:"Prescriptions",to:"/admin/prescriptions",icon:e.jsx(ic,{size:20})},{name:"Orders",to:"/admin/orders",icon:e.jsx(an,{size:20})},{name:"Leads",to:"/admin/leads",icon:e.jsx(kg,{size:20}),badge:"New"},{name:"Helping Staff Panel",to:"/admin/helping-staff-panel",icon:e.jsx(ic,{size:20})},{name:"Commission",to:"/admin/commission",icon:e.jsx(Np,{size:20})},{name:"Finance",to:"/admin/finance",icon:e.jsx(Mm,{size:20})},{name:"Transactions",to:"/admin/transactions",icon:e.jsx(Mm,{size:20})},{name:"Coupons",to:"/admin/coupons",icon:e.jsx(Bg,{size:20})},{name:"Helpdesk",to:"/admin/helpdesk",icon:e.jsx(ar,{size:20})}],y=[{name:"Dashboard",to:"/provider",icon:e.jsx(zm,{size:20})},{name:"Opportunities",to:"/provider/opportunities",icon:e.jsx(Oa,{size:20}),badge:"New"},{name:"My Tasks",to:"/provider/tasks",icon:e.jsx(Ac,{size:20})},{name:"Raise Request",to:"/provider/request",icon:e.jsx(ic,{size:20})},{name:"Previous Work",to:"/provider/history",icon:e.jsx(Tg,{size:20})},{name:"Profile",to:"/provider/profile",icon:e.jsx(Nt,{size:20})}],_=[{name:"My Services",to:"/user",icon:e.jsx(wg,{size:20})},{name:"Book Service",to:"/user/new-service",icon:e.jsx(ks,{size:20})},{name:"Payment History",to:"/user/payments",icon:e.jsx(Vs,{size:20})},{name:"Report Issue",to:"/user/report",icon:e.jsx(_s,{size:20})}],N=[{name:"Home",to:"/",icon:e.jsx(Pg,{size:20})},{name:"Login",to:"/login",icon:e.jsx(Nt,{size:20})}],P=(()=>{if(!i)return N;switch(i.role){case"admin":return j;case"provider":return y;case"user":return _;default:return N}})();return e.jsxs("div",{className:`h-screen bg-gradient-to-b from-primary via-primary/95 to-primary text-white flex flex-col transition-all duration-300 ${r?"fixed top-0 left-0 z-40 w-64 shadow-2xl transform":"w-64"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-primary/30",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-secondary flex items-center justify-center shadow-lg ring-2 ring-primary/40",children:e.jsx(ln,{size:20,className:"text-primary"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-secondary rounded-full border-2 border-primary"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-secondary to-secondary/80 bg-clip-text text-transparent",children:"KwikMedi Platform"}),e.jsx("div",{className:"text-xs text-secondary/80 mt-0.5",children:i?.role==="admin"?"Admin Portal":i?.role==="provider"?"Vendor Hub":i?.role==="user"?"Customer Portal":"Welcome"})]})]}),r&&e.jsx("button",{onClick:l,className:"p-2 rounded-lg hover:bg-primary/40 transition-colors",children:e.jsx(ut,{size:20})})]}),i&&e.jsx("div",{className:"p-6 border-b border-primary/30",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-secondary flex items-center justify-center shadow-lg",children:e.jsx(Nt,{size:20,className:"text-primary"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-secondary rounded-full border-2 border-primary flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-white truncate",children:i.name||"User"}),e.jsx("p",{className:"text-sm text-secondary/80 truncate",children:i.email})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto py-6 px-4",children:[e.jsx("nav",{className:"space-y-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 pb-4 border-b border-primary/30",children:e.jsx("h3",{className:"text-sm font-semibold text-secondary/80 mb-2 px-3",children:"Finance Panel"})}),v.map(b=>{const k=b.icon,T=h===b.id;return e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>{p(`/admin/finance-panel?tab=${b.id}`),r&&l()},className:`w-full group flex items-center space-x-3 p-3 rounded-xl transition-all duration-200 ${T?"bg-secondary text-primary shadow-lg transform scale-[1.02]":"text-secondary/80 hover:bg-primary/40 hover:text-white hover:transform hover:scale-[1.02]"}`,children:[e.jsx("div",{className:"relative",children:e.jsx(k,{size:20})}),e.jsx("span",{className:"font-medium",children:b.label})]})},b.id)})]}):P.map(b=>e.jsxs("div",{className:"relative",children:[e.jsxs(cl,{to:b.to,className:({isActive:k})=>`group flex items-center justify-between p-3 rounded-xl transition-all duration-200 ${k?"bg-secondary text-primary shadow-lg transform scale-[1.02]":"text-secondary/80 hover:bg-primary/40 hover:text-white hover:transform hover:scale-[1.02]"}`,onClick:r?l:void 0,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[b.icon,b.badge&&e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-secondary rounded-full"})]}),e.jsx("span",{className:"font-medium",children:b.name})]}),b.badge&&e.jsx("span",{className:"px-2 py-1 text-xs bg-secondary text-primary font-semibold rounded-full",children:b.badge})]}),e.jsx("div",{className:`absolute inset-0 rounded-xl bg-secondary/20 transition-opacity duration-300 ${window.location.pathname===b.to?"opacity-100":"opacity-0"}`,style:{zIndex:-1}})]},b.name))}),i?.role==="user"&&e.jsxs("div",{className:"mt-8 p-4 bg-secondary/20 rounded-xl border border-primary/30",children:[e.jsx("h3",{className:"text-sm font-semibold text-secondary mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(cl,{to:"/user/orders",className:"flex items-center space-x-2 p-2 rounded-lg text-secondary hover:bg-primary/30 transition-colors",children:[e.jsx(qg,{size:16}),e.jsx("span",{className:"text-sm",children:"Place Order"})]}),e.jsxs(cl,{to:"/user/prescriptions",className:"flex items-center space-x-2 p-2 rounded-lg text-secondary hover:bg-primary/30 transition-colors",children:[e.jsx(Ir,{size:16}),e.jsx("span",{className:"text-sm",children:"Upload Prescription"})]})]})]})]}),i&&e.jsx("div",{className:"p-4 border-t border-primary/30",children:e.jsxs("button",{onClick:d,className:"flex items-center justify-center w-full p-3 rounded-xl text-secondary/80 hover:bg-primary/40 hover:text-secondary transition-all duration-200 group",children:[e.jsx(Tc,{size:20,className:"mr-3 group-hover:transform group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]})},p0=({toggleSidebar:r})=>{const l=Is(),{user:i,logout:d,refreshUserData:u}=Ut(),[p,x]=m.useState(!1),[g,h]=m.useState(!1),[v,j]=m.useState(0),[y,_]=m.useState(!1),N=m.useRef(null),B=m.useRef(null),P=m.useRef(),b=m.useRef(),k=()=>{d(),l("/login")},T=async()=>{_(!0);try{await u(),await new Promise(se=>setTimeout(se,100)),console.log("Header refresh completed")}catch(se){console.error("Error refreshing user data:",se)}finally{setTimeout(()=>_(!1),1e3)}},U=()=>{j(se=>se+1),b.current&&clearTimeout(b.current),v>=2?(T(),j(0)):b.current=setTimeout(()=>{j(0)},2e3)},O=[{id:1,type:"service",title:"Service Completed",message:"Your AC repair service has been completed successfully.",time:"2 hours ago",read:!1},{id:2,type:"promotion",title:"Special Offer",message:"Get 20% off on your next home cleaning service.",time:"1 day ago",read:!1},{id:3,type:"reminder",title:"Upcoming Service",message:"Your plumbing service is scheduled for tomorrow at 10:00 AM.",time:"2 days ago",read:!0}],A=O.filter(se=>!se.read).length;m.useEffect(()=>{const se=H=>{N.current&&!N.current.contains(H.target)&&x(!1),B.current&&!B.current.contains(H.target)&&h(!1)},re=H=>{H.ctrlKey&&H.shiftKey&&H.key==="R"&&(H.preventDefault(),T())};return document.addEventListener("mousedown",se),document.addEventListener("keydown",re),()=>{document.removeEventListener("mousedown",se),document.removeEventListener("keydown",re),P.current&&clearTimeout(P.current),b.current&&clearTimeout(b.current)}},[]),m.useEffect(()=>{i&&i.id&&u()},[i?.id]);const me=se=>{switch(se){case"service":return e.jsx(Ir,{size:16,className:"text-orange-500"});case"promotion":return e.jsx(Lm,{size:16,className:"text-amber-500"});case"reminder":return e.jsx(as,{size:16,className:"text-rose-400"});default:return e.jsx(Oa,{size:16,className:"text-orange-300"})}};return e.jsxs("header",{className:"bg-gradient-to-r from-orange-50/95 via-white/95 to-orange-50/95 backdrop-blur-sm shadow-sm border-b border-orange-100/70 h-16 flex items-center justify-between px-4 lg:px-6 relative z-30 text-orange-950",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("button",{onClick:r,className:"p-2 rounded-xl text-orange-500 hover:bg-orange-100/80 hover:text-orange-700 lg:hidden transition-all duration-200",children:e.jsx(Lg,{size:24})})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>h(!g),className:"relative p-2 rounded-xl text-orange-500 hover:bg-orange-100/80 hover:text-orange-700 transition-all duration-200 group",children:[e.jsx(Oa,{size:20}),A>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-orange-500 to-amber-400 text-white text-xs rounded-full flex items-center justify-center font-semibold animate-pulse",children:A})]}),g&&e.jsxs("div",{ref:B,className:"absolute right-0 mt-2 w-80 bg-white/95 rounded-xl shadow-xl border border-orange-100 py-2 z-50 transform transition-all duration-200 ease-in-out",children:[e.jsx("div",{className:"px-4 py-3 border-b border-orange-100 bg-gradient-to-r from-orange-50 to-amber-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-orange-900",children:"Notifications"}),e.jsxs("span",{className:"text-xs text-orange-500",children:[A," new"]})]})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:O.map(se=>e.jsx("div",{className:`px-4 py-3 hover:bg-orange-50/60 cursor-pointer transition-colors duration-200 ${se.read?"":"bg-orange-50/70"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"mt-1",children:me(se.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium text-orange-900 text-sm",children:se.title}),!se.read&&e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full ml-2"})]}),e.jsx("p",{className:"text-orange-700/80 text-sm mt-1",children:se.message}),e.jsx("p",{className:"text-orange-400 text-xs mt-1",children:se.time})]})]})},se.id))}),e.jsx("div",{className:"px-4 py-3 border-t border-orange-100 bg-orange-50/60",children:e.jsx("button",{className:"w-full text-center text-sm text-orange-600 hover:text-orange-700 font-medium",children:"View all notifications"})})]})]}),i?e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center space-x-3 cursor-pointer p-2 rounded-xl hover:bg-orange-100/60 transition-all duration-200",onClick:()=>x(!p),onDoubleClick:U,children:[e.jsxs("div",{className:"hidden sm:block text-right",children:[e.jsx("p",{className:"text-sm font-medium text-orange-900",children:i.name||"User"}),e.jsx("p",{className:"text-xs text-orange-500 capitalize",children:i.role})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-500 to-amber-400 flex items-center justify-center shadow-md",children:y?e.jsx(ws,{size:20,className:"text-orange-50 animate-spin"}):e.jsx(Nt,{size:20,className:"text-white"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-emerald-500 rounded-full border-2 border-white"}),y&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-orange-500 rounded-full border-2 border-white animate-pulse"})]}),e.jsx(Rr,{size:16,className:"text-orange-400 hidden sm:block"})]}),p&&e.jsxs("div",{ref:N,className:"absolute right-0 mt-2 w-80 bg-white/95 rounded-xl shadow-xl border border-orange-100 py-3 z-50 transform transition-all duration-200 ease-in-out",children:[e.jsx("div",{className:"px-4 py-3 border-b border-orange-100 bg-gradient-to-r from-orange-50 to-amber-50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-orange-500 to-amber-400 flex items-center justify-center shadow-md",children:e.jsx(Nt,{size:24,className:"text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-orange-900 truncate",children:i.name||"User"}),e.jsx("p",{className:"text-sm text-orange-600 truncate",children:i.email}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700 capitalize",children:i.role}),e.jsxs("span",{className:"flex items-center text-xs text-emerald-600",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1"}),"Online"]})]})]})]})}),e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fs,{size:16,className:"text-orange-400"}),e.jsx("span",{className:"text-orange-600",children:"Member since"})]}),e.jsx("span",{className:"text-orange-900",children:"Jan 2024"})]}),i.role==="user"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ir,{size:16,className:"text-orange-400"}),e.jsx("span",{className:"text-orange-600",children:"Services booked"})]}),e.jsx("span",{className:"text-orange-900",children:"12"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Lm,{size:16,className:"text-orange-400"}),e.jsx("span",{className:"text-orange-600",children:"Loyalty points"})]}),e.jsx("span",{className:"text-amber-600 font-semibold",children:"850"})]})]})]})}),e.jsx("div",{className:"px-4 py-2 border-t border-orange-100 bg-orange-50/60",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>l(`/${i.role}/profile`),className:"w-full flex items-center space-x-3 text-sm text-orange-700 hover:bg-orange-100/70 py-2 px-3 rounded-lg transition-colors duration-200",children:[e.jsx(zc,{size:16}),e.jsx("span",{children:"Account Settings"})]}),e.jsxs("button",{onClick:k,className:"w-full flex items-center space-x-3 text-sm text-red-600 hover:bg-red-50 py-2 px-3 rounded-lg transition-colors duration-200",children:[e.jsx(Tc,{size:16}),e.jsx("span",{children:"Sign Out"})]})]})})]})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>l("/login"),className:"px-4 py-2 text-sm font-medium text-orange-700 hover:text-orange-900 transition-colors duration-200",children:"Sign In"}),e.jsx("button",{onClick:()=>l("/register"),className:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-orange-500 to-amber-400 hover:from-orange-600 hover:to-amber-500 rounded-lg transition-all duration-200",children:"Get Started"})]})]})]})},Lt=({children:r})=>{const{user:l}=Ut(),[i,d]=m.useState(!1),u=()=>{d(!i)};return e.jsxs("div",{className:"flex h-screen bg-secondary",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(Um,{isMobile:!1,toggleSidebar:u})}),i&&e.jsxs("div",{className:"lg:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30",onClick:u}),e.jsx(Um,{isMobile:!0,toggleSidebar:u})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(p0,{toggleSidebar:u}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:r})]})]})},x0=()=>{const[r,l]=m.useState("30d"),[i,d]=m.useState(""),[u,p]=m.useState("");m.useEffect(()=>{const g=new Date,h=g.toISOString().split("T")[0];let v;switch(r){case"7d":v=new Date(g.setDate(g.getDate()-7)).toISOString().split("T")[0];break;case"30d":v=new Date(g.setDate(g.getDate()-30)).toISOString().split("T")[0];break;case"90d":v=new Date(g.setDate(g.getDate()-90)).toISOString().split("T")[0];break;case"1y":v=new Date(g.setFullYear(g.getFullYear()-1)).toISOString().split("T")[0];break;default:v=new Date(g.setDate(g.getDate()-7)).toISOString().split("T")[0]}d(v),p(h)},[r]);const x=(g,h)=>{d(g),p(h)};return e.jsx(Lt,{children:e.jsxs("div",{className:"min-h-screen bg-secondary",children:[e.jsx(Gg,{dateFrom:i,dateTo:u,onDateRangeChange:x}),e.jsx("div",{className:"pt-20 pb-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8",children:[e.jsx(n0,{dateFrom:i,dateTo:u}),e.jsx(l0,{}),e.jsx(o0,{dateFrom:i,dateTo:u}),e.jsx(c0,{dateFrom:i,dateTo:u}),e.jsx(d0,{dateFrom:i,dateTo:u}),e.jsx(u0,{dateFrom:i,dateTo:u}),e.jsx(m0,{})]})})]})})},Be=({children:r,className:l=""})=>e.jsx("div",{className:`bg-white rounded-lg shadow-card overflow-hidden ${l}`,children:r}),Ze=({children:r,className:l=""})=>e.jsx("div",{className:`p-6 border-b border-gray-200 ${l}`,children:r}),Ye=({children:r,className:l=""})=>e.jsx("h3",{className:`text-lg font-semibold text-gray-900 ${l}`,children:r}),He=({children:r,className:l=""})=>e.jsx("div",{className:`p-6 ${l}`,children:r});function wp(r){var l,i,d="";if(typeof r=="string"||typeof r=="number")d+=r;else if(typeof r=="object")if(Array.isArray(r)){var u=r.length;for(l=0;l<u;l++)r[l]&&(i=wp(r[l]))&&(d&&(d+=" "),d+=i)}else for(i in r)r[i]&&(d&&(d+=" "),d+=i);return d}function h0(){for(var r,l,i=0,d="",u=arguments.length;i<u;i++)(r=arguments[i])&&(l=wp(r))&&(d&&(d+=" "),d+=l);return d}const f0=(r,l)=>{const i=new Array(r.length+l.length);for(let d=0;d<r.length;d++)i[d]=r[d];for(let d=0;d<l.length;d++)i[r.length+d]=l[d];return i},g0=(r,l)=>({classGroupId:r,validator:l}),_p=(r=new Map,l=null,i)=>({nextPart:r,validators:l,classGroupId:i}),pl="-",Bm=[],y0="arbitrary..",v0=r=>{const l=b0(r),{conflictingClassGroups:i,conflictingClassGroupModifiers:d}=r;return{getClassGroupId:x=>{if(x.startsWith("[")&&x.endsWith("]"))return j0(x);const g=x.split(pl),h=g[0]===""&&g.length>1?1:0;return kp(g,h,l)},getConflictingClassGroupIds:(x,g)=>{if(g){const h=d[x],v=i[x];return h?v?f0(v,h):h:v||Bm}return i[x]||Bm}}},kp=(r,l,i)=>{if(r.length-l===0)return i.classGroupId;const u=r[l],p=i.nextPart.get(u);if(p){const v=kp(r,l+1,p);if(v)return v}const x=i.validators;if(x===null)return;const g=l===0?r.join(pl):r.slice(l).join(pl),h=x.length;for(let v=0;v<h;v++){const j=x[v];if(j.validator(g))return j.classGroupId}},j0=r=>r.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const l=r.slice(1,-1),i=l.indexOf(":"),d=l.slice(0,i);return d?y0+d:void 0})(),b0=r=>{const{theme:l,classGroups:i}=r;return N0(i,l)},N0=(r,l)=>{const i=_p();for(const d in r){const u=r[d];Mc(u,i,d,l)}return i},Mc=(r,l,i,d)=>{const u=r.length;for(let p=0;p<u;p++){const x=r[p];w0(x,l,i,d)}},w0=(r,l,i,d)=>{if(typeof r=="string"){_0(r,l,i);return}if(typeof r=="function"){k0(r,l,i,d);return}S0(r,l,i,d)},_0=(r,l,i)=>{const d=r===""?l:Sp(l,r);d.classGroupId=i},k0=(r,l,i,d)=>{if(C0(r)){Mc(r(d),l,i,d);return}l.validators===null&&(l.validators=[]),l.validators.push(g0(i,r))},S0=(r,l,i,d)=>{const u=Object.entries(r),p=u.length;for(let x=0;x<p;x++){const[g,h]=u[x];Mc(h,Sp(l,g),i,d)}},Sp=(r,l)=>{let i=r;const d=l.split(pl),u=d.length;for(let p=0;p<u;p++){const x=d[p];let g=i.nextPart.get(x);g||(g=_p(),i.nextPart.set(x,g)),i=g}return i},C0=r=>"isThemeGetter"in r&&r.isThemeGetter===!0,P0=r=>{if(r<1)return{get:()=>{},set:()=>{}};let l=0,i=Object.create(null),d=Object.create(null);const u=(p,x)=>{i[p]=x,l++,l>r&&(l=0,d=i,i=Object.create(null))};return{get(p){let x=i[p];if(x!==void 0)return x;if((x=d[p])!==void 0)return u(p,x),x},set(p,x){p in i?i[p]=x:u(p,x)}}},gc="!",Hm=":",E0=[],Vm=(r,l,i,d,u)=>({modifiers:r,hasImportantModifier:l,baseClassName:i,maybePostfixModifierPosition:d,isExternal:u}),A0=r=>{const{prefix:l,experimentalParseClassName:i}=r;let d=u=>{const p=[];let x=0,g=0,h=0,v;const j=u.length;for(let P=0;P<j;P++){const b=u[P];if(x===0&&g===0){if(b===Hm){p.push(u.slice(h,P)),h=P+1;continue}if(b==="/"){v=P;continue}}b==="["?x++:b==="]"?x--:b==="("?g++:b===")"&&g--}const y=p.length===0?u:u.slice(h);let _=y,N=!1;y.endsWith(gc)?(_=y.slice(0,-1),N=!0):y.startsWith(gc)&&(_=y.slice(1),N=!0);const B=v&&v>h?v-h:void 0;return Vm(p,N,_,B)};if(l){const u=l+Hm,p=d;d=x=>x.startsWith(u)?p(x.slice(u.length)):Vm(E0,!1,x,void 0,!0)}if(i){const u=d;d=p=>i({className:p,parseClassName:u})}return d},T0=r=>{const l=new Map;return r.orderSensitiveModifiers.forEach((i,d)=>{l.set(i,1e6+d)}),i=>{const d=[];let u=[];for(let p=0;p<i.length;p++){const x=i[p],g=x[0]==="[",h=l.has(x);g||h?(u.length>0&&(u.sort(),d.push(...u),u=[]),d.push(x)):u.push(x)}return u.length>0&&(u.sort(),d.push(...u)),d}},z0=r=>({cache:P0(r.cacheSize),parseClassName:A0(r),sortModifiers:T0(r),...v0(r)}),L0=/\s+/,M0=(r,l)=>{const{parseClassName:i,getClassGroupId:d,getConflictingClassGroupIds:u,sortModifiers:p}=l,x=[],g=r.trim().split(L0);let h="";for(let v=g.length-1;v>=0;v-=1){const j=g[v],{isExternal:y,modifiers:_,hasImportantModifier:N,baseClassName:B,maybePostfixModifierPosition:P}=i(j);if(y){h=j+(h.length>0?" "+h:h);continue}let b=!!P,k=d(b?B.substring(0,P):B);if(!k){if(!b){h=j+(h.length>0?" "+h:h);continue}if(k=d(B),!k){h=j+(h.length>0?" "+h:h);continue}b=!1}const T=_.length===0?"":_.length===1?_[0]:p(_).join(":"),U=N?T+gc:T,O=U+k;if(x.indexOf(O)>-1)continue;x.push(O);const A=u(k,b);for(let me=0;me<A.length;++me){const se=A[me];x.push(U+se)}h=j+(h.length>0?" "+h:h)}return h},$0=(...r)=>{let l=0,i,d,u="";for(;l<r.length;)(i=r[l++])&&(d=Cp(i))&&(u&&(u+=" "),u+=d);return u},Cp=r=>{if(typeof r=="string")return r;let l,i="";for(let d=0;d<r.length;d++)r[d]&&(l=Cp(r[d]))&&(i&&(i+=" "),i+=l);return i},I0=(r,...l)=>{let i,d,u,p;const x=h=>{const v=l.reduce((j,y)=>y(j),r());return i=z0(v),d=i.cache.get,u=i.cache.set,p=g,g(h)},g=h=>{const v=d(h);if(v)return v;const j=M0(h,i);return u(h,j),j};return p=x,(...h)=>p($0(...h))},D0=[],zt=r=>{const l=i=>i[r]||D0;return l.isThemeGetter=!0,l},Pp=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Ep=/^\((?:(\w[\w-]*):)?(.+)\)$/i,R0=/^\d+\/\d+$/,F0=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,O0=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,U0=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,B0=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,H0=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,In=r=>R0.test(r),Xe=r=>!!r&&!Number.isNaN(Number(r)),zr=r=>!!r&&Number.isInteger(Number(r)),lc=r=>r.endsWith("%")&&Xe(r.slice(0,-1)),nr=r=>F0.test(r),V0=()=>!0,K0=r=>O0.test(r)&&!U0.test(r),Ap=()=>!1,q0=r=>B0.test(r),W0=r=>H0.test(r),J0=r=>!Ie(r)&&!De(r),G0=r=>Xn(r,Lp,Ap),Ie=r=>Pp.test(r),sn=r=>Xn(r,Mp,K0),oc=r=>Xn(r,ey,Xe),Km=r=>Xn(r,Tp,Ap),Q0=r=>Xn(r,zp,W0),Xi=r=>Xn(r,$p,q0),De=r=>Ep.test(r),Da=r=>ea(r,Mp),Z0=r=>ea(r,ty),qm=r=>ea(r,Tp),Y0=r=>ea(r,Lp),X0=r=>ea(r,zp),el=r=>ea(r,$p,!0),Xn=(r,l,i)=>{const d=Pp.exec(r);return d?d[1]?l(d[1]):i(d[2]):!1},ea=(r,l,i=!1)=>{const d=Ep.exec(r);return d?d[1]?l(d[1]):i:!1},Tp=r=>r==="position"||r==="percentage",zp=r=>r==="image"||r==="url",Lp=r=>r==="length"||r==="size"||r==="bg-size",Mp=r=>r==="length",ey=r=>r==="number",ty=r=>r==="family-name",$p=r=>r==="shadow",sy=()=>{const r=zt("color"),l=zt("font"),i=zt("text"),d=zt("font-weight"),u=zt("tracking"),p=zt("leading"),x=zt("breakpoint"),g=zt("container"),h=zt("spacing"),v=zt("radius"),j=zt("shadow"),y=zt("inset-shadow"),_=zt("text-shadow"),N=zt("drop-shadow"),B=zt("blur"),P=zt("perspective"),b=zt("aspect"),k=zt("ease"),T=zt("animate"),U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],O=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...O(),De,Ie],me=()=>["auto","hidden","clip","visible","scroll"],se=()=>["auto","contain","none"],re=()=>[De,Ie,h],H=()=>[In,"full","auto",...re()],K=()=>[zr,"none","subgrid",De,Ie],I=()=>["auto",{span:["full",zr,De,Ie]},zr,De,Ie],X=()=>[zr,"auto",De,Ie],z=()=>["auto","min","max","fr",De,Ie],E=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Z=()=>["start","end","center","stretch","center-safe","end-safe"],ne=()=>["auto",...re()],ae=()=>[In,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...re()],F=()=>[r,De,Ie],ee=()=>[...O(),qm,Km,{position:[De,Ie]}],le=()=>["no-repeat",{repeat:["","x","y","space","round"]}],M=()=>["auto","cover","contain",Y0,G0,{size:[De,Ie]}],Y=()=>[lc,Da,sn],je=()=>["","none","full",v,De,Ie],we=()=>["",Xe,Da,sn],W=()=>["solid","dashed","dotted","double"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ue=()=>[Xe,lc,qm,Km],he=()=>["","none",B,De,Ie],Ae=()=>["none",Xe,De,Ie],w=()=>["none",Xe,De,Ie],$=()=>[Xe,De,Ie],G=()=>[In,"full",...re()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[nr],breakpoint:[nr],color:[V0],container:[nr],"drop-shadow":[nr],ease:["in","out","in-out"],font:[J0],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[nr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[nr],shadow:[nr],spacing:["px",Xe],text:[nr],"text-shadow":[nr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",In,Ie,De,b]}],container:["container"],columns:[{columns:[Xe,Ie,De,g]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:me()}],"overflow-x":[{"overflow-x":me()}],"overflow-y":[{"overflow-y":me()}],overscroll:[{overscroll:se()}],"overscroll-x":[{"overscroll-x":se()}],"overscroll-y":[{"overscroll-y":se()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:H()}],"inset-x":[{"inset-x":H()}],"inset-y":[{"inset-y":H()}],start:[{start:H()}],end:[{end:H()}],top:[{top:H()}],right:[{right:H()}],bottom:[{bottom:H()}],left:[{left:H()}],visibility:["visible","invisible","collapse"],z:[{z:[zr,"auto",De,Ie]}],basis:[{basis:[In,"full","auto",g,...re()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Xe,In,"auto","initial","none",Ie]}],grow:[{grow:["",Xe,De,Ie]}],shrink:[{shrink:["",Xe,De,Ie]}],order:[{order:[zr,"first","last","none",De,Ie]}],"grid-cols":[{"grid-cols":K()}],"col-start-end":[{col:I()}],"col-start":[{"col-start":X()}],"col-end":[{"col-end":X()}],"grid-rows":[{"grid-rows":K()}],"row-start-end":[{row:I()}],"row-start":[{"row-start":X()}],"row-end":[{"row-end":X()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":z()}],"auto-rows":[{"auto-rows":z()}],gap:[{gap:re()}],"gap-x":[{"gap-x":re()}],"gap-y":[{"gap-y":re()}],"justify-content":[{justify:[...E(),"normal"]}],"justify-items":[{"justify-items":[...Z(),"normal"]}],"justify-self":[{"justify-self":["auto",...Z()]}],"align-content":[{content:["normal",...E()]}],"align-items":[{items:[...Z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Z(),{baseline:["","last"]}]}],"place-content":[{"place-content":E()}],"place-items":[{"place-items":[...Z(),"baseline"]}],"place-self":[{"place-self":["auto",...Z()]}],p:[{p:re()}],px:[{px:re()}],py:[{py:re()}],ps:[{ps:re()}],pe:[{pe:re()}],pt:[{pt:re()}],pr:[{pr:re()}],pb:[{pb:re()}],pl:[{pl:re()}],m:[{m:ne()}],mx:[{mx:ne()}],my:[{my:ne()}],ms:[{ms:ne()}],me:[{me:ne()}],mt:[{mt:ne()}],mr:[{mr:ne()}],mb:[{mb:ne()}],ml:[{ml:ne()}],"space-x":[{"space-x":re()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":re()}],"space-y-reverse":["space-y-reverse"],size:[{size:ae()}],w:[{w:[g,"screen",...ae()]}],"min-w":[{"min-w":[g,"screen","none",...ae()]}],"max-w":[{"max-w":[g,"screen","none","prose",{screen:[x]},...ae()]}],h:[{h:["screen","lh",...ae()]}],"min-h":[{"min-h":["screen","lh","none",...ae()]}],"max-h":[{"max-h":["screen","lh",...ae()]}],"font-size":[{text:["base",i,Da,sn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[d,De,oc]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",lc,Ie]}],"font-family":[{font:[Z0,Ie,l]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[u,De,Ie]}],"line-clamp":[{"line-clamp":[Xe,"none",De,oc]}],leading:[{leading:[p,...re()]}],"list-image":[{"list-image":["none",De,Ie]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",De,Ie]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:[Xe,"from-font","auto",De,sn]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[Xe,"auto",De,Ie]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:re()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",De,Ie]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",De,Ie]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ee()}],"bg-repeat":[{bg:le()}],"bg-size":[{bg:M()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},zr,De,Ie],radial:["",De,Ie],conic:[zr,De,Ie]},X0,Q0]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:Y()}],"gradient-via-pos":[{via:Y()}],"gradient-to-pos":[{to:Y()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:je()}],"rounded-s":[{"rounded-s":je()}],"rounded-e":[{"rounded-e":je()}],"rounded-t":[{"rounded-t":je()}],"rounded-r":[{"rounded-r":je()}],"rounded-b":[{"rounded-b":je()}],"rounded-l":[{"rounded-l":je()}],"rounded-ss":[{"rounded-ss":je()}],"rounded-se":[{"rounded-se":je()}],"rounded-ee":[{"rounded-ee":je()}],"rounded-es":[{"rounded-es":je()}],"rounded-tl":[{"rounded-tl":je()}],"rounded-tr":[{"rounded-tr":je()}],"rounded-br":[{"rounded-br":je()}],"rounded-bl":[{"rounded-bl":je()}],"border-w":[{border:we()}],"border-w-x":[{"border-x":we()}],"border-w-y":[{"border-y":we()}],"border-w-s":[{"border-s":we()}],"border-w-e":[{"border-e":we()}],"border-w-t":[{"border-t":we()}],"border-w-r":[{"border-r":we()}],"border-w-b":[{"border-b":we()}],"border-w-l":[{"border-l":we()}],"divide-x":[{"divide-x":we()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":we()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...W(),"hidden","none"]}],"divide-style":[{divide:[...W(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...W(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Xe,De,Ie]}],"outline-w":[{outline:["",Xe,Da,sn]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",j,el,Xi]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",y,el,Xi]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:we()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[Xe,sn]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":we()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",_,el,Xi]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[Xe,De,Ie]}],"mix-blend":[{"mix-blend":[...ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Xe]}],"mask-image-linear-from-pos":[{"mask-linear-from":ue()}],"mask-image-linear-to-pos":[{"mask-linear-to":ue()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":ue()}],"mask-image-t-to-pos":[{"mask-t-to":ue()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":ue()}],"mask-image-r-to-pos":[{"mask-r-to":ue()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":ue()}],"mask-image-b-to-pos":[{"mask-b-to":ue()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":ue()}],"mask-image-l-to-pos":[{"mask-l-to":ue()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":ue()}],"mask-image-x-to-pos":[{"mask-x-to":ue()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":ue()}],"mask-image-y-to-pos":[{"mask-y-to":ue()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[De,Ie]}],"mask-image-radial-from-pos":[{"mask-radial-from":ue()}],"mask-image-radial-to-pos":[{"mask-radial-to":ue()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":O()}],"mask-image-conic-pos":[{"mask-conic":[Xe]}],"mask-image-conic-from-pos":[{"mask-conic-from":ue()}],"mask-image-conic-to-pos":[{"mask-conic-to":ue()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ee()}],"mask-repeat":[{mask:le()}],"mask-size":[{mask:M()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",De,Ie]}],filter:[{filter:["","none",De,Ie]}],blur:[{blur:he()}],brightness:[{brightness:[Xe,De,Ie]}],contrast:[{contrast:[Xe,De,Ie]}],"drop-shadow":[{"drop-shadow":["","none",N,el,Xi]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",Xe,De,Ie]}],"hue-rotate":[{"hue-rotate":[Xe,De,Ie]}],invert:[{invert:["",Xe,De,Ie]}],saturate:[{saturate:[Xe,De,Ie]}],sepia:[{sepia:["",Xe,De,Ie]}],"backdrop-filter":[{"backdrop-filter":["","none",De,Ie]}],"backdrop-blur":[{"backdrop-blur":he()}],"backdrop-brightness":[{"backdrop-brightness":[Xe,De,Ie]}],"backdrop-contrast":[{"backdrop-contrast":[Xe,De,Ie]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Xe,De,Ie]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Xe,De,Ie]}],"backdrop-invert":[{"backdrop-invert":["",Xe,De,Ie]}],"backdrop-opacity":[{"backdrop-opacity":[Xe,De,Ie]}],"backdrop-saturate":[{"backdrop-saturate":[Xe,De,Ie]}],"backdrop-sepia":[{"backdrop-sepia":["",Xe,De,Ie]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":re()}],"border-spacing-x":[{"border-spacing-x":re()}],"border-spacing-y":[{"border-spacing-y":re()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",De,Ie]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Xe,"initial",De,Ie]}],ease:[{ease:["linear","initial",k,De,Ie]}],delay:[{delay:[Xe,De,Ie]}],animate:[{animate:["none",T,De,Ie]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[P,De,Ie]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:Ae()}],"rotate-x":[{"rotate-x":Ae()}],"rotate-y":[{"rotate-y":Ae()}],"rotate-z":[{"rotate-z":Ae()}],scale:[{scale:w()}],"scale-x":[{"scale-x":w()}],"scale-y":[{"scale-y":w()}],"scale-z":[{"scale-z":w()}],"scale-3d":["scale-3d"],skew:[{skew:$()}],"skew-x":[{"skew-x":$()}],"skew-y":[{"skew-y":$()}],transform:[{transform:[De,Ie,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:G()}],"translate-x":[{"translate-x":G()}],"translate-y":[{"translate-y":G()}],"translate-z":[{"translate-z":G()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",De,Ie]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":re()}],"scroll-mx":[{"scroll-mx":re()}],"scroll-my":[{"scroll-my":re()}],"scroll-ms":[{"scroll-ms":re()}],"scroll-me":[{"scroll-me":re()}],"scroll-mt":[{"scroll-mt":re()}],"scroll-mr":[{"scroll-mr":re()}],"scroll-mb":[{"scroll-mb":re()}],"scroll-ml":[{"scroll-ml":re()}],"scroll-p":[{"scroll-p":re()}],"scroll-px":[{"scroll-px":re()}],"scroll-py":[{"scroll-py":re()}],"scroll-ps":[{"scroll-ps":re()}],"scroll-pe":[{"scroll-pe":re()}],"scroll-pt":[{"scroll-pt":re()}],"scroll-pr":[{"scroll-pr":re()}],"scroll-pb":[{"scroll-pb":re()}],"scroll-pl":[{"scroll-pl":re()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",De,Ie]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[Xe,Da,sn,oc]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},ry=I0(sy);function xl(...r){return ry(h0(r))}const $c=({value:r,onValueChange:l,children:i,className:d})=>e.jsx("div",{className:xl("w-full",d),children:xs.Children.map(i,u=>xs.isValidElement(u)?xs.cloneElement(u,{children:xs.Children.map(u.props.children,p=>{if(xs.isValidElement(p)){const x=p.props.value===r;return xs.cloneElement(p,{onValueChange:l,className:xl(p.props.className,x?"bg-secondary text-primary":"text-gray-500 hover:text-primary")})}return p})}):u)}),Ic=({children:r,className:l})=>e.jsx("div",{className:xl("inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-500",l),children:r}),Kn=({value:r,children:l,className:i,onValueChange:d})=>e.jsx("button",{className:xl("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",i),onClick:()=>d?.(r),children:l}),ny=({fieldVisibility:r})=>e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[r.name&&e.jsx("th",{className:"text-left pb-4",children:"Provider"}),r.contact&&e.jsx("th",{className:"text-left pb-4",children:"Contact"}),r.location&&e.jsx("th",{className:"text-left pb-4",children:"Location"}),r.status&&e.jsx("th",{className:"text-left pb-4",children:"Status"}),r.verification&&e.jsx("th",{className:"text-left pb-4",children:"Verification"}),r.earnings&&e.jsx("th",{className:"text-left pb-4",children:"Earnings"}),r.experience&&e.jsx("th",{className:"text-left pb-4",children:"Experience"}),r.featured&&e.jsx("th",{className:"text-left pb-4",children:"Featured"}),r.action&&e.jsx("th",{className:"text-left pb-4",children:"Actions"})]})}),ie=({variant:r="primary",size:l="md",children:i,fullWidth:d=!1,isLoading:u=!1,className:p="",disabled:x,...g})=>{const h="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",v={primary:"bg-primary hover:bg-primary-dark text-secondary-dark",secondary:"bg-secondary text-white hover:bg-secondary-light",outline:"border border-primary bg-transparent text-secondary-dark hover:bg-primary/10",ghost:"bg-transparent hover:bg-gray-100 text-gray-800",link:"bg-transparent underline-offset-4 hover:underline text-primary p-0 h-auto"},j={sm:"h-9 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"},y=d?"w-full":"";return e.jsxs("button",{className:`${h} ${v[r]} ${j[l]} ${y} ${p}`,disabled:x||u,...g,children:[u?e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current\\",xmlns:"http://www.w3.org/2000/svg\\",fill:"none\\",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25\\",cx:"12\\",cy:"12\\",r:"10\\",stroke:"currentColor\\",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,i]})},ay=({provider:r,onStatusAction:l})=>e.jsxs("div",{className:"flex items-center space-x-2",children:[r.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(ie,{onClick:()=>l(r.id,"approve"),className:"flex items-center space-x-1 bg-green-600 hover:bg-green-700 text-white text-xs px-2 py-1",children:[e.jsx(ns,{size:12}),e.jsx("span",{children:"Approve"})]}),e.jsxs(ie,{onClick:()=>l(r.id,"reject"),className:"flex items-center space-x-1 bg-red-600 hover:bg-red-700 text-white text-xs px-2 py-1",children:[e.jsx(or,{size:12}),e.jsx("span",{children:"Reject"})]})]}),r.status==="approved"&&e.jsxs(ie,{onClick:()=>l(r.id,"suspend"),className:"flex items-center space-x-1 bg-yellow-600 hover:bg-yellow-700 text-white text-xs px-2 py-1",children:[e.jsx(Ks,{size:12}),e.jsx("span",{children:"Suspend"})]}),r.status==="suspended"&&e.jsxs(ie,{onClick:()=>l(r.id,"reinstate"),className:"flex items-center space-x-1 bg-blue-600 hover:bg-blue-700 text-white text-xs px-2 py-1",children:[e.jsx(ns,{size:12}),e.jsx("span",{children:"Reinstate"})]}),r.status==="blocked"&&e.jsxs(ie,{onClick:()=>l(r.id,"approve"),className:"flex items-center space-x-1 bg-blue-600 hover:bg-blue-700 text-white text-xs px-2 py-1",children:[e.jsx(ns,{size:12}),e.jsx("span",{children:"Approve"})]})]}),iy=({provider:r,formatDate:l})=>{const i=u=>{switch(u){case"approved":return"bg-green-100 text-green-700";case"pending":return"bg-yellow-100 text-yellow-700";case"blocked":return"bg-red-100 text-red-700";case"suspended":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},d=u=>{switch(u){case"approved":return e.jsx(ns,{size:14,className:"text-green-600"});case"pending":return e.jsx(as,{size:14,className:"text-yellow-600"});case"blocked":return e.jsx(or,{size:14,className:"text-red-600"});case"suspended":return e.jsx(Ks,{size:14,className:"text-orange-600"});default:return null}};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[d(r.status),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i(r.status)}`,children:r.status.charAt(0).toUpperCase()+r.status.slice(1)})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Joined: ",l(r.created_at)]})]})},ly=({provider:r,fieldVisibility:l,expandingUsers:i,onStatusAction:d,onToggleDropdown:u,formatDate:p,formatCurrency:x,isExpanded:g=!1,isLoading:h=!1})=>{const v=h&&i.has(r.id),j=g||i.has(r.id);return e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors duration-150",children:[e.jsx("td",{className:"py-4",children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(ie,{variant:"outline",size:"sm",onClick:()=>u(r.id),className:"transition-all duration-200 hover:bg-blue-50 hover:border-blue-300 hover:shadow-md",disabled:v,children:v?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(cn,{size:14,className:"mr-1"}),e.jsx("span",{children:j?"Hide":"Details"}),j?e.jsx(Zn,{size:14,className:"ml-1"}):e.jsx(Rr,{size:14,className:"ml-1"})]})})})}),l.name&&e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-primary",children:r.name.charAt(0)})}),e.jsx("div",{children:e.jsx("p",{className:"font-medium text-gray-900",children:r.name})})]})}),l.contact&&e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($r,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-sm",children:r.email})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dn,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-sm",children:r.phone})]})]})}),l.location&&e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm",children:[r.city,", ",r.state]}),e.jsx("div",{className:"text-sm text-gray-500",children:r.pincode})]})}),l.status&&e.jsx("td",{className:"py-4",children:e.jsx(iy,{provider:r,formatDate:p})}),l.verification&&e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[r.verification_status==="verified"?e.jsx(Ks,{size:16,className:"text-green-500"}):e.jsx(Ks,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm",children:r.verification_status})]})}),l.earnings&&e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium",children:x(r.total_earnings)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Commission: ",r.commission_rate,"%"]})]})}),l.experience&&e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(as,{size:14,className:"text-gray-400"}),e.jsxs("span",{className:"text-sm",children:[r.experience_years," years"]})]})}),l.featured&&e.jsx("td",{className:"py-4",children:r.is_featured?e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:"Featured"}):e.jsx("span",{className:"text-gray-400 text-xs",children:"Not Featured"})}),l.action&&e.jsx("td",{className:"py-4",children:e.jsx(ay,{provider:r,onStatusAction:d})})]})},oy=({provider:r,formatDate:l,serviceCatalog:i})=>{const d=!!(r.bank_details&&(r.bank_details.account_holder_name||r.bank_details.bank_name||r.bank_details.account_number||r.bank_details.ifsc_code)),u=m.useMemo(()=>{const j=new Map;return Object.entries(i.categories).forEach(([y,_])=>{j.set(Number(y),_.name)}),r.subcategory_links?.forEach(y=>{y.category_name&&y.category_id&&j.set(y.category_id,y.category_name)}),j},[r.subcategory_links,i]),p=m.useMemo(()=>{const j=new Map,y=(_,N)=>{const B=_!==null?`cat-${_}`:`misc-${N}`;return j.has(B)||j.set(B,{key:B,category_id:_,category_name:N,subcategories:[],services:[]}),j.get(B)};return(r.category_ids??[]).forEach(_=>{const N=u.get(_)||`Category ${_}`;y(_,N)}),(r.subcategory_links??[]).forEach(_=>{const N=_.category_id||null,B=N&&_.subcategory_id?i.categories[N]?.services?.[_.subcategory_id]??null:null,P=_.category_name||(N?u.get(N)||`Category ${N}`:"Other");y(N,P).subcategories.push({id:_.subcategory_id||null,rawName:_.subcategory_name,catalogName:B})}),(r.services??[]).forEach(_=>{const N=_.category_name||"General",P=(r.category_ids??[]).find(k=>u.get(k)===_.category_name)??null;y(P,N).services.push(_)}),j.size===0&&(r.services?.length??0)>0&&j.set("general",{key:"general",category_id:null,category_name:"Services",subcategories:[],services:r.services??[]}),Array.from(j.values())},[r.category_ids,r.subcategory_links,r.services,u,i]),x=p.length>0,[g,h]=m.useState(new Set),v=j=>{h(y=>{const _=new Set(y);return _.has(j)?_.delete(j):_.add(j),_})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx(ur,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-blue-900",children:"Provider Overview"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-purple-600 text-xs",children:""})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Provider ID"})]}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["#",r.id]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-green-600 text-xs",children:""})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Joined Date"})]}),e.jsx("p",{className:"text-sm text-gray-800",children:l(r.created_at)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx($r,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-purple-900",children:"Contact Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-purple-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-2",children:e.jsx($r,{size:16,className:"text-blue-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Email"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-800",children:r.email}),r.email_verified&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Verified"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-purple-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(dn,{size:16,className:"text-green-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Phone"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-800",children:r.phone}),r.phone_verified&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Verified"})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 rounded-lg p-4 border border-amber-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx(lr,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-amber-900",children:"Location Information"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-amber-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-amber-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(lr,{size:16,className:"text-amber-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Address"})]}),e.jsx("p",{className:"text-sm text-gray-800",children:r.address}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[r.city,", ",r.state," - ",r.pincode]})]})]}),r.services&&r.services.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-rose-50 to-pink-50 rounded-lg p-4 border border-rose-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-rose-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Ec,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-rose-900",children:"Services"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.services.map(j=>e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-rose-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:j.service_name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${j.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:j.status})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:j.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:[j.duration_minutes," mins"]}),e.jsxs("span",{className:"font-medium text-primary",children:["",j.price_min," - ",j.price_max]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:j.category_name})})]},j.id))})]}),r.service_areas&&r.service_areas.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 rounded-lg p-4 border border-teal-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-teal-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx(lr,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-teal-900",children:"Service Areas"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.service_areas.map((j,y)=>e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-teal-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:j.area_name}),j.is_primary&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:"Primary"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[j.city,", ",j.state]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Pincode: ",j.pincode]})]},y))})]}),r.documents&&r.documents.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg p-4 border border-orange-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Hs,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-orange-900",children:"Documents"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.documents.map(j=>e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-orange-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"font-medium text-gray-900 capitalize",children:j.document_type}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${j.status==="approved"?"bg-green-100 text-green-800":j.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:j.status})]}),e.jsx("p",{className:"text-sm text-gray-600",children:j.document_name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Uploaded: ",l(j.uploaded_at)]}),j.verified_at&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Verified: ",l(j.verified_at)]}),j.rejection_reason&&e.jsxs("div",{className:"mt-2 p-2 bg-red-50 rounded-md",children:[e.jsx("p",{className:"text-sm font-medium text-red-700",children:"Rejection Reason"}),e.jsx("p",{className:"text-sm text-red-600 mt-1",children:j.rejection_reason})]}),j.document_url&&e.jsx(ie,{variant:"outline",size:"sm",className:"mt-3 w-full",onClick:()=>window.open(j.document_url,"_blank","noopener,noreferrer"),children:"View Document"})]},j.id))})]}),x&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg p-4 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Ag,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-blue-900",children:"Service Coverage"})]}),e.jsx("div",{className:"space-y-3",children:p.map(j=>{const y=g.has(j.key)||j.services.length===0;return e.jsxs("div",{className:"bg-white rounded-lg border border-blue-100 shadow-sm",children:[e.jsxs("button",{type:"button",onClick:()=>v(j.key),className:"w-full flex items-center justify-between px-4 py-3 text-left",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:j.category_name}),j.category_id!==null&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Category ID: ",j.category_id]}),j.services.length>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[j.services.length," service",j.services.length>1?"s":""]})]}),j.services.length>0&&e.jsx(Rr,{size:16,className:`text-blue-500 transition-transform ${y?"rotate-180":""}`})]}),j.subcategories.length>0&&e.jsxs("div",{className:"px-4 pb-3",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 block mb-2",children:"Services"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:j.subcategories.map((_,N)=>{const B=_.catalogName||(_.id?i.servicesById[_.id]:null)||_.rawName||(j.services.find(P=>P.id===_.id)?.service_name??null)||`Service ${_.id||N+1}`;return e.jsxs("div",{className:"px-3 py-2 rounded-lg bg-blue-50 border border-blue-100 text-sm text-blue-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Hn,{size:14,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:B}),_.id&&e.jsxs("p",{className:"text-xs text-blue-400",children:["Service ID: ",_.id]})]})]}),j.services.length>0&&e.jsx("button",{type:"button",onClick:()=>v(j.key),className:"text-xs text-blue-500 hover:underline",children:"View details"})]},`${j.key}-${_.id??N}`)})})]}),j.services.length>0&&y&&e.jsx("div",{className:"border-t border-blue-50 bg-blue-50/50 px-4 py-3 space-y-2",children:j.services.map(_=>e.jsxs("div",{className:"bg-white rounded-lg border border-blue-100 p-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:_.service_name}),(_.price_min||_.price_max)&&e.jsxs("span",{className:"text-xs font-semibold text-blue-600",children:["",_.price_min," - ",_.price_max]})]}),_.description&&e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:_.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-gray-500",children:[_.duration_minutes>0&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 rounded-full",children:["Duration: ",_.duration_minutes," mins"]}),_.status&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 rounded-full capitalize",children:["Status: ",_.status]})]})]},`${j.key}-service-${_.id}`))})]},j.key)})})]}),d&&r.bank_details&&e.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-cyan-50 rounded-lg p-4 border border-slate-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-cyan-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Vs,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-cyan-900",children:"Account Verification"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-slate-100",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Account Holder Name"}),e.jsx("p",{className:"text-sm text-gray-800",children:r.bank_details.account_holder_name||"N/A"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-slate-100",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Bank Name"}),e.jsx("p",{className:"text-sm text-gray-800",children:r.bank_details.bank_name||"N/A"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-slate-100",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Account Number"}),e.jsx("p",{className:"text-sm text-gray-800",children:r.bank_details.account_number||"N/A"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-slate-100",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 block mb-1",children:"IFSC Code"}),e.jsx("p",{className:"text-sm text-gray-800 uppercase",children:r.bank_details.ifsc_code||"N/A"})]})]})]}),r.portfolio&&r.portfolio.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 rounded-lg p-4 border border-indigo-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Eg,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-indigo-900",children:"Portfolio"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.portfolio.map(j=>e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-indigo-100",children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:j.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:j.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-gray-200",children:[e.jsx("img",{src:j.before_image,alt:"Before",className:"object-cover w-full h-full"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xs",children:"Before"})]}),e.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-gray-200",children:[e.jsx("img",{src:j.after_image,alt:"After",className:"object-cover w-full h-full"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xs",children:"After"})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:["Created: ",l(j.created_at)]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${j.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:j.status})]})]},j.id))})]})]})},cy=({searchTerm:r,onSearchChange:l})=>e.jsxs("div",{className:"relative w-64",children:[e.jsx(is,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search providers...",className:"pl-8 pr-4 py-2 w-full rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/20",value:r,onChange:i=>l(i.target.value)})]}),dy=({showFieldManagement:r,onToggleSettings:l,fieldVisibility:i,onToggleField:d,onResetFields:u})=>e.jsxs("div",{className:"relative",children:[e.jsxs(ie,{variant:"outline",size:"sm",onClick:l,className:"hover:bg-gray-100",children:[e.jsx(zc,{size:16,className:"mr-2"}),"Fields"]}),r&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-50 max-h-[400px] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 pb-3 border-b border-gray-100 flex-shrink-0",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Field Visibility"}),e.jsx(ie,{variant:"ghost",size:"sm",onClick:l,className:"h-6 w-6 p-0",children:e.jsx(ut,{size:14})})]}),e.jsx("div",{className:"overflow-y-auto flex-1 px-4 py-3 min-h-0",children:e.jsx("div",{className:"space-y-2",children:Object.entries(i).map(([p,x])=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:()=>d(p),disabled:["name","status","action"].includes(p),className:`rounded border-gray-300 text-primary focus:ring-primary ${["name","status","action"].includes(p)?"opacity-50":""}`}),e.jsxs("span",{className:`text-sm capitalize ${["name","status","action"].includes(p)?"font-medium":""}`,children:[p.replace(/([A-Z])/g," $1").trim(),["name","status","action"].includes(p)&&" (Required)"]})]},p))})}),e.jsx("div",{className:"p-4 pt-3 border-t border-gray-200 flex-shrink-0",children:e.jsx(ie,{variant:"outline",size:"sm",onClick:u,className:"w-full",children:"Reset to Default"})})]})]}),uy=({currentPage:r,totalPages:l,startIndex:i,itemsPerPage:d,totalItems:u,onPageChange:p})=>e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",i+1," to ",Math.min(i+d,u)," of ",u," providers"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{onClick:()=>p(Math.max(r-1,1)),disabled:r===1,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(on,{size:16})}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",r," of ",l]}),e.jsx(ie,{onClick:()=>p(Math.min(r+1,l)),disabled:r===l,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Js,{size:16})})]})]}),my=({isOpen:r,providerId:l,action:i,reason:d,notes:u,onClose:p,onConfirm:x,onReasonChange:g,onNotesChange:h})=>{if(!r||!l||!i)return null;const v=()=>{switch(i){case"approve":return"Approve Provider";case"reject":return"Reject Provider";case"suspend":return"Suspend Provider";case"reinstate":return"Reinstate Provider";default:return""}},j=()=>{switch(i){case"approve":return"bg-green-600 text-white hover:bg-green-700";case"reject":return"bg-red-600 text-white hover:bg-red-700";case"suspend":return"bg-yellow-600 text-white hover:bg-yellow-700";case"reinstate":return"bg-blue-600 text-white hover:bg-blue-700";default:return""}},y=()=>{switch(i){case"approve":return"Approve";case"reject":return"Reject";case"suspend":return"Suspend";case"reinstate":return"Reinstate";default:return""}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:v()}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason"}),e.jsx("textarea",{className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",rows:3,placeholder:"Enter reason for this action...",value:d,onChange:_=>g(_.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),e.jsx("textarea",{className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",rows:3,placeholder:"Enter any additional notes...",value:u,onChange:_=>h(_.target.value)})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx(ie,{variant:"outline",onClick:p,children:"Cancel"}),e.jsx(ie,{variant:"outline",onClick:()=>x(l,i,d,u),className:j(),children:y()})]})]})})},py=({isOpen:r,providerId:l,documentId:i,action:d,reason:u,onClose:p,onConfirm:x,onReasonChange:g})=>!r||!l||!i||!d?null:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:d==="approve"?"Approve Document":"Reject Document"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason"}),e.jsx("textarea",{className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",rows:3,placeholder:"Enter reason for this action...",value:u,onChange:h=>g(h.target.value)})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx(ie,{variant:"outline",onClick:p,children:"Cancel"}),e.jsx(ie,{variant:"outline",onClick:()=>x(l,i,d,u),className:`${d==="approve"?"bg-green-600 text-white hover:bg-green-700":"bg-red-600 text-white hover:bg-red-700"}`,children:d==="approve"?"Approve":"Reject"})]})]})}),xy={},cc={pending:{status:"pending",verification_status:"pending"},verification_in_progress:{status:"pending",verification_status:"pending"},in_progress:{status:"pending",verification_status:"pending"},approved:{status:"approved",verification_status:"verified"},verified:{status:"approved",verification_status:"verified"},active:{status:"approved",verification_status:"verified"},rejected:{status:"blocked",verification_status:"rejected"},blocked:{status:"blocked",verification_status:"rejected"},suspend:{status:"suspended",verification_status:"verified"},suspended:{status:"suspended",verification_status:"verified"}},hy=r=>{if(!r)return cc.pending;const l=r.toLowerCase();return cc[l]||cc.pending},Dt=(r,l=0)=>{if(r==null||r==="")return l;const i=Number(r);return Number.isFinite(i)?i:l},Un=(r,l=!1)=>{if(r==null)return l;if(typeof r=="string"){const i=r.trim().toLowerCase();if(["true","1","yes","verified","approved"].includes(i))return!0;if(["false","0","no","pending","rejected"].includes(i))return!1}return!!r},ot=(r,l="")=>{if(r==null)return l;const i=String(r).trim();return i.length>0?i:l},qn=(r,l=null)=>{if(r==null)return l;const i=String(r).trim();return i.length>0?i:l},fy=r=>{if(!r)return[];if(Array.isArray(r))return r.map(l=>ot(l)).filter(Boolean);if(typeof r=="string"){try{const l=JSON.parse(r);if(Array.isArray(l))return l.map(i=>ot(i)).filter(Boolean)}catch{return r.split(",").map(l=>l.trim()).filter(Boolean)}return r?[r]:[]}return[]},gy=r=>Array.isArray(r)?r.map((l,i)=>({id:Dt(l?.id,i+1),service_name:ot(l?.service_name??l?.title,`Service ${i+1}`),description:ot(l?.description,""),price_min:Dt(l?.price_min??l?.price??l?.price_original,0),price_max:Dt(l?.price_max??l?.price??l?.price_original,0),duration_minutes:Dt(l?.duration_minutes??l?.duration,0),status:ot(l?.status,"active"),category_name:ot(l?.category_name??l?.category,"General")})):[],yy=(r,l,i)=>Array.isArray(r)?r.map((d,u)=>({pincode:ot(d?.pincode,""),area_name:ot(d?.area_name??d?.name,`Area ${u+1}`),city:ot(d?.city,l),state:ot(d?.state,i),is_primary:Un(d?.is_primary??d?.primary,u===0)})):[],vy=(r,l)=>{if(Array.isArray(r?.documents)&&r.documents.length>0)return r.documents.map((x,g)=>({id:Dt(x?.id,g+1),document_type:ot(x?.document_type??x?.type,`document_${g+1}`),document_name:ot(x?.document_name??x?.document_type??x?.type,`Document ${g+1}`),status:ot(x?.status,x?.verified_at?"approved":x?.rejection_reason?"rejected":"submitted"),uploaded_at:ot(x?.uploaded_at,r?.created_at||l?.created_at||new Date().toISOString()),verified_at:x?.verified_at??null,rejection_reason:x?.rejection_reason??null,document_url:qn(x?.document_url??x?.url??x?.file_url??x?.path??x?.link??null,null)}));const i=[],d=new Set,u=(x,g)=>{const h=x.trim();if(!h)return;const v=h.toLowerCase();d.has(v)||(d.add(v),i.push({id:i.length+1,document_type:h,document_name:h,status:"submitted",uploaded_at:r?.created_at||l?.created_at||new Date().toISOString(),verified_at:null,rejection_reason:null,document_url:qn(g??null,null)}))};return r?.documents&&typeof r.documents=="object"&&Object.entries(r.documents).forEach(([x,g])=>{if(!g)return;const h=x.replace(/_url|_doc_url/g,"").replace(/_/g," ").trim();if(h){if(Array.isArray(g))g.forEach((v,j)=>{if(!v)return;const y=g.length>1?`${h} ${j+1}`:h;if(typeof v=="string")u(y,v);else if(typeof v=="object"){const _=v.url??v?.document_url??v?.path??v?.file_url;_&&u(y,String(_))}});else if(typeof g=="string")u(h,g);else if(typeof g=="object"){const v=g.url??g?.document_url??g?.path??g?.file_url;v&&u(h,String(v))}}}),[{key:"profile_photo_url",label:"Profile Photo"},{key:"aadhaar_doc_url",label:"Aadhaar Document"},{key:"pan_doc_url",label:"PAN Document"},{key:"degree_doc_url",label:"Degree Document"}].forEach(({key:x,label:g})=>{r?.[x]&&u(g,r[x])}),i.length===0&&l?.documents?l.documents:i},jy=(r,l)=>{if(Array.isArray(r?.portfolio)&&r.portfolio.length>0)return r.portfolio;const i=fy(r?.previous_work_images);return i.length===0?l?.portfolio??[]:i.map((d,u)=>({id:u+1,title:`Work ${u+1}`,description:"",image_path:d,before_image:d,after_image:d,display_order:u+1,status:"active",created_at:r?.created_at||l?.created_at||new Date().toISOString()}))},by=(r,l)=>{if(!r&&!l)return null;const i=r||l;return i?{account_holder_name:ot(i.account_holder_name,l?.account_holder_name??""),bank_name:ot(i.bank_name,l?.bank_name??""),account_number:ot(i.account_number,l?.account_number??""),ifsc_code:ot(i.ifsc_code,l?.ifsc_code??"")}:null},Ny=(r,l)=>Array.isArray(r)?r.map(i=>Dt(i)).filter(i=>Number.isFinite(i)&&i>0):l||[],wy=(r,l)=>{if(Array.isArray(r)){const i=[];return r.forEach((d,u)=>{const p=Dt(d?.category_id,d?.category?Number(d?.category):0),x=Dt(d?.subcategory_id,u+1);!p&&!x||i.push({category_id:p,subcategory_id:x,category_name:qn(d?.category_name??d?.category??null,null),subcategory_name:qn(d?.subcategory_name??d?.subcategory??null,null)})}),i}return l||[]},Dn=(r,l)=>{if(!r&&l)return l;if(!r)return{id:0,name:"",email:"",phone:"",business_name:"",address:"",pincode:"",city:"",state:"",profile_image:null,business_logo:null,experience_years:0,description:null,status:"pending",verification_status:"pending",email_verified:!1,phone_verified:!1,identity_verified:!1,documents_verified:!1,average_rating:0,total_reviews:0,total_bookings:0,total_earnings:0,commission_rate:0,is_featured:!1,created_at:new Date().toISOString(),services:[],service_areas:[],documents:[],portfolio:[]};const i=r?.details?{...r.details,...r}:r,{status:d,verification_status:u}=hy(i?.status),p=ot(i?.city,l?.city??""),x=ot(i?.state,l?.state??""),g=gy(i?.services),h=yy(i?.service_areas,p,x),v=vy(i,l),j=jy(i,l),y=by(i?.bank_details,l?.bank_details),_=Ny(i?.categories,l?.category_ids),N=wy(i?.subcategories,l?.subcategory_links),B=ot(i?.created_at,l?.created_at??new Date().toISOString()),P=i?.average_rating??i?.rating,b=i?.total_reviews??(Array.isArray(i?.reviews)?i.reviews.length:void 0),k=i?.total_bookings??i?.completed_appointments;return{id:Dt(i?.id??i?.provider_id,l?.id??0),name:ot(i?.full_name??i?.name,l?.name??""),email:ot(i?.email,l?.email??""),phone:ot(i?.phone_number??i?.phone,l?.phone??""),business_name:ot(i?.business_name,l?.business_name??""),address:ot(i?.address,l?.address??""),pincode:ot(i?.pincode,l?.pincode??""),city:p,state:x,profile_image:qn(i?.profile_photo_url??i?.profile_image??i?.documents?.profile_photo_url,l?.profile_image??null),business_logo:qn(i?.business_logo,l?.business_logo??null),experience_years:Dt(i?.experience_years,l?.experience_years??0),description:i?.description??l?.description??null,status:d,verification_status:u,email_verified:Un(i?.email_verified,l?.email_verified??!1),phone_verified:Un(i?.phone_verified,l?.phone_verified??!1),identity_verified:Un(i?.identity_verified,l?.identity_verified??!1),documents_verified:Un(i?.documents_verified,l?.documents_verified??d==="approved"),average_rating:Dt(P,l?.average_rating??0),total_reviews:Dt(b,l?.total_reviews??0),total_bookings:Dt(k,l?.total_bookings??0),total_earnings:Dt(i?.total_earnings,l?.total_earnings??0),commission_rate:Dt(i?.commission_rate,l?.commission_rate??0),is_featured:Un(i?.is_featured,l?.is_featured??!1),created_at:B,services:g.length>0?g:l?.services??[],service_areas:h.length>0?h:l?.service_areas??[],documents:v.length>0?v:l?.documents??[],portfolio:j.length>0?j:l?.portfolio??[],bank_details:y,category_ids:_,subcategory_links:N}},tl=(r,l)=>{if(!l)return r;const i=r.findIndex(u=>u.id===l.id);if(i===-1)return r;const d=[...r];return d[i]=l,d},_y={approve:{apiAction:"approve",nextStatus:"approved",verification:"verified"},reject:{apiAction:"reject",nextStatus:"blocked",verification:"rejected"},suspend:{apiAction:"suspend",nextStatus:"suspended",verification:"verified"},reinstate:{apiAction:"reinstate",nextStatus:"approved",verification:"verified"}},ky=()=>{const{addToast:r}=_t(),[l,i]=m.useState([]),[d,u]=m.useState(!0),[p,x]=m.useState(""),[g,h]=m.useState(1),[v,j]=m.useState(new Set),[y,_]=m.useState(!1),[N,B]=m.useState({name:!0,status:!0,action:!0,contact:!0,location:!1,verification:!1,earnings:!1,experience:!1,featured:!1}),P=5,b=xy?.VITE_API_BASE_URL||"/api",[k,T]=m.useState("all"),[U,O]=m.useState([]),[A,me]=m.useState(!1),[se,re]=m.useState({isOpen:!1,providerId:null,action:null,reason:"",notes:""}),[H,K]=m.useState({isOpen:!1,providerId:null,documentId:null,action:null}),[I,X]=m.useState({categories:{},servicesById:{}}),z=m.useCallback(async()=>{const $=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");try{const[G,ge]=await Promise.all([fetch(`${b}/admin/categories`,{headers:{"Content-Type":"application/json",...$?{Authorization:`Bearer ${$}`}:{}}}),fetch(`${b}/admin/services`,{headers:{"Content-Type":"application/json",...$?{Authorization:`Bearer ${$}`}:{}}})]),ve=await G.json(),Se=await ge.json();if(G.ok&&Array.isArray(ve.categories)){const Re={};ve.categories.forEach(Qe=>{const ze=Dt(Qe?.id,0);if(!ze)return;const te={},Pe=Array.isArray(Qe?.subcategories)?Qe.subcategories:Qe?.services;Array.isArray(Pe)&&Pe.forEach((ke,be)=>{const Le=Dt(ke?.id,be+1);Le&&(te[Le]=ot(ke?.name??ke?.title??ke?.service_name,`Service ${Le}`))}),Re[ze]={name:ot(Qe?.name,`Category ${ze}`),services:te}});const xe={};ge.ok&&Array.isArray(Se.services)&&Se.services.forEach((Qe,ze)=>{const te=Dt(Qe?.id,ze+1);te&&(xe[te]=ot(Qe?.title??Qe?.name??Qe?.service_name,`Service ${te}`))}),X({categories:Re,servicesById:xe})}else throw new Error(ve.message||"Failed to fetch categories")}catch(G){console.error("Error fetching categories catalog:",G);const ge=G instanceof Error?G.message:"Failed to fetch categories";r(ge,"error")}},[b,r]),E=m.useCallback(async($=!1)=>{const G=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");if(!G){r("Please login to view providers","error"),$&&u(!1);return}$&&u(!0);try{const ge=await fetch(`${b}/admin/providers`,{headers:{Authorization:`Bearer ${G}`,"Content-Type":"application/json"}});if(!ge.ok)throw new Error(`HTTP error! status: ${ge.status}`);const ve=ge.headers.get("content-type");if(!ve||!ve.includes("application/json")){console.warn("Response is not JSON, treating as empty list"),i([]);return}const Se=await ge.text();if(!Se||Se.trim()===""){console.warn("Empty response body, treating as empty list"),i([]);return}let Re;try{Re=JSON.parse(Se)}catch(xe){throw console.error("JSON parse error:",xe,"Response text:",Se),new Error("Invalid JSON response from server")}if(Array.isArray(Re.data)){const xe=Re.data.map(Qe=>Dn(Qe));i(xe)}else if(Re.success===!1)console.warn("API returned error:",Re.message),i([]);else throw new Error(Re.message||"Failed to fetch providers")}catch(ge){console.error("Error fetching providers:",ge);const ve=ge instanceof Error?ge.message:"Failed to fetch providers";r(ve,"error"),i([])}finally{$&&u(!1)}},[b,r]),Z=m.useCallback(async()=>{me(!0);const $=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");if(!$){r("Please login to view pending providers","error"),me(!1);return}try{const G=await fetch(`${b}/admin/providers?list=pending`,{headers:{Authorization:`Bearer ${$}`,"Content-Type":"application/json"}});if(!G.ok)throw new Error(`HTTP error! status: ${G.status}`);const ge=G.headers.get("content-type");if(!ge||!ge.includes("application/json")){console.warn("Response is not JSON, treating as empty list"),O([]);return}const ve=await G.text();if(!ve||ve.trim()===""){console.warn("Empty response body, treating as empty list"),O([]);return}let Se;try{Se=JSON.parse(ve)}catch(Re){throw console.error("JSON parse error:",Re,"Response text:",ve),new Error("Invalid JSON response from server")}if(Array.isArray(Se.data)){const Re=Se.data.map(xe=>Dn(xe));O(Re)}else if(Se.success===!1)console.warn("API returned error:",Se.message),O([]);else throw new Error(Se.message||"Failed to fetch pending providers")}catch(G){console.error("Error fetching pending providers:",G);const ge=G instanceof Error?G.message:"Failed to fetch pending providers";r(ge,"error"),O([])}finally{me(!1)}},[b,r]);m.useEffect(()=>{E(!0),Z(),z()},[E,Z,z]),m.useEffect(()=>{k==="pending"||E(),Z()},[k,Z,E]),m.useEffect(()=>{const $=setInterval(()=>{E(),Z()},3e4);return()=>clearInterval($)},[Z,E]);const ne=async $=>{const G=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");if(!G){r("Please login to view provider details","error");return}try{const ge=await fetch(`${b}/admin/providers?provider_id=${$}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${G}`}}),ve=await ge.json(),Se=Array.isArray(ve?.data)?ve.data[0]:ve?.data;if(ge.ok&&Se){const Re=Se;let xe=null;i(Qe=>{const ze=Qe.find(te=>te.id===$);return xe=Dn(Re,ze),tl(Qe,xe)}),O(Qe=>{if(!xe){const ze=Qe.find(te=>te.id===$);xe=Dn(Re,ze)}return tl(Qe,xe)})}else throw new Error(ve.message||"Failed to fetch provider details")}catch(ge){console.error("Error fetching provider details:",ge),r(ge instanceof Error?ge.message:"Failed to fetch provider details","error")}},ae=$=>{const G=new Set(v);v.has($)?G.delete($):(G.add($),ne($)),j(G)},F=$=>{$==="name"||$==="status"||$==="action"||B(G=>({...G,[$]:!G[$]}))},ee=()=>{B({name:!0,status:!0,action:!0,contact:!0,location:!1,verification:!1,earnings:!1,experience:!1,featured:!1})},le=()=>{re({isOpen:!1,providerId:null,action:null,reason:"",notes:""})},M=($,G)=>{if(G==="reject"||G==="suspend"){re({isOpen:!0,providerId:$,action:G,reason:"",notes:""});return}ce($,G)},Y=l.filter($=>$.name.toLowerCase().includes(p.toLowerCase())||$.email.toLowerCase().includes(p.toLowerCase())||$.phone.includes(p)||$.city.toLowerCase().includes(p.toLowerCase())),je=Math.ceil(Y.length/P),we=(g-1)*P,W=Y.slice(we,we+P),ce=async($,G,ge,ve)=>{const Se=_y[G];if(!Se)return;const Re=(ve||ge||"").trim();if((G==="reject"||G==="suspend")&&!Re){r("Please provide a reason for this action","error");return}try{const xe=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");if(!xe){r("Please login to verify provider","error");return}const Qe={action:Se.apiAction};Re&&(Qe.notes=Re);const ze=await fetch(`${b}/admin/provider/verify/${$}`,{method:"PUT",headers:{Authorization:`Bearer ${xe}`,"Content-Type":"application/json"},body:JSON.stringify(Qe)});if(!ze.ok){let ke="Failed to update provider status";try{const be=await ze.json();ke=be.message||be.error?.message||ke}catch{ke=`Failed to update provider status: ${ze.status} ${ze.statusText}`}throw new Error(ke)}let te={};if(ze.status!==204)try{const ke=ze.headers.get("content-type");if(ke&&ke.includes("application/json")){const be=await ze.text();be&&be.trim()&&(te=JSON.parse(be))}}catch(ke){console.warn("Failed to parse response JSON, but response was successful. Provider status was updated:",ke),te={}}const Pe=Se.nextStatus!=="pending";if(te.provider){const ke=te.provider;let be=null;i(Le=>{const at=Le.find(C=>C.id===$);return be=Dn(ke,at),tl(Le,be)}),O(Le=>{if(!be){const mt=Le.find(C=>C.id===$);be=Dn(ke,mt)}const at=tl(Le,be);return Pe?at.filter(mt=>mt.id!==$):at})}else i(ke=>ke.map(be=>be.id===$?{...be,status:Se.nextStatus,verification_status:Se.verification}:be)),O(ke=>{const be=ke.map(Le=>Le.id===$?{...Le,status:Se.nextStatus,verification_status:Se.verification}:Le);return Pe?be.filter(Le=>Le.id!==$):be});le(),r(te.message||`Provider ${G}d successfully`,"success");try{await E()}catch(ke){console.error("Error refreshing providers list:",ke)}try{await Z()}catch(ke){console.error("Error refreshing pending providers list:",ke)}}catch(xe){console.error("Error updating provider status:",xe),r(xe instanceof Error?xe.message:"Failed to update provider status","error")}},ue=async($,G,ge,ve)=>{try{const Se=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");if(!Se){r("Please login to update document","error");return}const xe=await(await fetch(`${b}/admin/providers/${$}/documents/${G}`,{method:"POST",headers:{Authorization:`Bearer ${Se}`,"Content-Type":"application/json"},body:JSON.stringify({action:ge,reason:ve})})).json();xe.success&&(i(Qe=>Qe.map(ze=>ze.id===$?{...ze,documents:ze.documents?.map(te=>te.id===G?{...te,status:ge==="approve"?"approved":"rejected",rejection_reason:ve||null}:te)}:ze)),r(xe.message,"success"))}catch(Se){console.error("Error updating document status:",Se),r("Failed to update document status","error")}},he=$=>$?new Date($).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",Ae=$=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format($),w=()=>{const $=k==="pending"?U:W;return k==="pending"&&!A&&U.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:Object.values(N).filter(Boolean).length+1,className:"py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(ur,{size:24,className:"text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Pending Providers"}),e.jsx("p",{className:"text-gray-500 max-w-sm",children:"There are currently no vendors waiting for approval."})]})})}):A&&k==="pending"?e.jsx("tr",{children:e.jsx("td",{colSpan:Object.values(N).filter(Boolean).length+1,className:"py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading pending providers..."})]})})}):$.map(G=>e.jsxs(xs.Fragment,{children:[e.jsx(ly,{provider:G,fieldVisibility:N,expandingUsers:v,onStatusAction:M,onToggleDropdown:ae,formatDate:he,formatCurrency:Ae,isExpanded:v.has(G.id)}),v.has(G.id)&&e.jsx("tr",{className:"bg-gradient-to-r from-gray-50 to-blue-50/30 border-l-4 border-primary/20",children:e.jsx("td",{colSpan:Object.values(N).filter(Boolean).length+1,className:"p-6",children:e.jsx(oy,{provider:G,formatDate:he,serviceCatalog:I})})})]},G.id))};return e.jsxs(Lt,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Vendors"}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(ur,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"About"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-blue-600 text-xs",children:""})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Description"})]}),e.jsx("p",{className:"text-sm text-gray-800",children:"Manage and approve pharmacy vendor profiles, monitor their performance, and handle verification requests."})]})]})]}),d&&k==="all"?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading vendors..."})]}):e.jsxs(Be,{children:[e.jsxs(Ze,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Ye,{children:"Vendors"}),e.jsx($c,{value:k,onValueChange:$=>T($),children:e.jsxs(Ic,{children:[e.jsxs(Kn,{value:"all",className:"relative",children:["All Trainers",e.jsx("span",{className:"absolute -top-1 -right-1 bg-gray-200 text-gray-700 text-xs px-2 py-0.5 rounded-full",children:l.length})]}),e.jsxs(Kn,{value:"pending",className:"relative",children:["Pending Trainers",e.jsx("span",{className:"absolute -top-1 -right-1 bg-yellow-100 text-yellow-700 text-xs px-2 py-0.5 rounded-full",children:U.length})]})]})})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(dy,{showFieldManagement:y,onToggleSettings:()=>_(!y),fieldVisibility:N,onToggleField:F,onResetFields:ee}),e.jsx(cy,{searchTerm:p,onSearchChange:x})]})]}),e.jsxs(He,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx(ny,{fieldVisibility:N}),e.jsx("tbody",{children:w()})]})}),k==="all"&&je>1&&e.jsx(uy,{currentPage:g,totalPages:je,startIndex:we,itemsPerPage:P,totalItems:Y.length,onPageChange:h})]})]}),e.jsx(my,{isOpen:se.isOpen,providerId:se.providerId,action:se.action,reason:se.reason,notes:se.notes,onClose:le,onConfirm:ce,onReasonChange:$=>re(G=>({...G,reason:$})),onNotesChange:$=>re(G=>({...G,notes:$}))}),e.jsx(py,{isOpen:H.isOpen,providerId:H.providerId,documentId:H.documentId,action:H.action,reason:H.reason,onClose:()=>K({isOpen:!1,providerId:null,documentId:null,action:null}),onConfirm:ue,onReasonChange:$=>K(G=>({...G,reason:$}))})]})},Sy=({isOpen:r,onClose:l,onConfirm:i,userName:d})=>r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:e.jsx(_s,{className:"h-6 w-6 text-red-600"})})}),e.jsx("h3",{className:"text-lg font-semibold text-center mb-2",children:"Delete User"}),e.jsxs("p",{className:"text-gray-600 text-center mb-6",children:["Are you sure you want to delete ",d,"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(ie,{variant:"outline",onClick:l,className:"hover:bg-gray-100",children:"Cancel"}),e.jsx(ie,{onClick:i,className:"bg-red-600 text-white hover:bg-red-700 border-red-600 hover:border-red-700",children:"Delete"})]})]})}):null,Wn=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading users..."})]}),Cy=({currentPage:r,totalPages:l,startIndex:i,itemsPerPage:d,totalItems:u,onPageChange:p})=>l<=1?null:e.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",i+1," to ",Math.min(i+d,u)," of ",u," users"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>p(Math.max(r-1,1)),disabled:r===1,className:"hover:bg-gray-100",children:[e.jsx(on,{size:16}),"Previous"]}),e.jsxs("span",{className:"px-3 py-1 text-sm text-gray-600 bg-gray-100 rounded",children:[r," of ",l]}),e.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>p(Math.min(r+1,l)),disabled:r===l,className:"hover:bg-gray-100",children:["Next",e.jsx(Js,{size:16})]})]})]}),Ip=({searchTerm:r,onSearchChange:l})=>e.jsxs("div",{className:"relative w-64",children:[e.jsx(is,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search users...",className:"pl-8 pr-4 py-2 w-full rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/20",value:r,onChange:i=>l(i.target.value)})]}),Py=({user:r,formatDate:l,getActivityIcon:i})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Nt,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-blue-900",children:"User Overview"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-purple-600 text-xs",children:""})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"User ID"})]}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["#",r.id]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-green-600 text-xs",children:""})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Joined Date"})]}),e.jsx("p",{className:"text-sm text-gray-800",children:l(r.created_at)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-orange-600 text-xs",children:""})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Last Login"})]}),e.jsx("p",{className:"text-sm text-gray-800",children:l(r.last_login)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-lg flex items-center justify-center mr-3",children:e.jsx($r,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Contact Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-2",children:e.jsx($r,{size:16,className:"text-blue-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Email"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-800",children:r.email}),r.email_verified&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Verified"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(dn,{size:16,className:"text-green-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Phone"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-800",children:r.phone}),r.phone_verified&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Verified"})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx(lr,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-purple-900",children:"Location Information"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-purple-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(lr,{size:16,className:"text-purple-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Address"})]}),e.jsx("p",{className:"text-sm text-gray-800",children:r.address}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[r.city,", ",r.state," - ",r.pincode]})]})]})]}),Ey=({columnVisibility:r})=>e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[r.name&&e.jsx("th",{className:"text-left pb-4",children:"Name"}),r.contact&&e.jsx("th",{className:"text-left pb-4",children:"Contact"}),r.location&&e.jsx("th",{className:"text-left pb-4",children:"Location"}),r.status&&e.jsx("th",{className:"text-left pb-4",children:"Status"}),r.activity&&e.jsx("th",{className:"text-left pb-4",children:"Activity"}),r.actions&&e.jsx("th",{className:"text-left pb-4",children:"Actions"})]})}),Ay=({user:r,columnVisibility:l,expandingUsers:i,onStatusChange:d,onToggleDropdown:u,onDelete:p,formatDate:x})=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors duration-150",children:[l.name&&e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center ring-2 ring-primary/10",children:e.jsx("span",{className:"text-sm font-semibold text-primary",children:r.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",r.id]})]})]})}),l.contact&&e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($r,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-sm",children:r.email}),r.email_verified&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ks,{size:14,className:"text-green-500"}),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"Verified"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dn,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-sm",children:r.phone}),r.phone_verified&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ks,{size:14,className:"text-green-500"}),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"Verified"})]})]})]})}),l.location&&e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"font-medium",children:[r.city,", ",r.state]}),e.jsxs("p",{className:"text-gray-500 flex items-center",children:[e.jsx(lr,{size:12,className:"mr-1"}),r.pincode]})]})}),l.status&&e.jsx("td",{className:"py-4",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${r.status==="active"?"bg-green-100 text-green-700 border border-green-200":r.status==="suspended"?"bg-red-100 text-red-700 border border-red-200":"bg-gray-100 text-gray-700 border border-gray-200"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${r.status==="active"?"bg-green-500":r.status==="suspended"?"bg-red-500":"bg-gray-500"}`}),r.status==="inactive"?"Active":r.status.charAt(0).toUpperCase()+r.status.slice(1)]})}),l.activity&&e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fs,{size:14,className:"text-gray-400"}),e.jsxs("span",{className:"text-sm",children:["Last: ",x(r.last_login)]})]}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center space-x-3",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(fs,{size:12,className:"mr-1"}),r.total_bookings," bookings"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Vs,{size:12,className:"mr-1"}),"",r.total_spent.toLocaleString()]})]})]})}),l.actions&&e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:r.status,onChange:g=>d(r.id,g.target.value),className:"px-3 py-1.5 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"suspended",children:"Suspended"})]}),e.jsx(ie,{variant:"outline",size:"sm",onClick:()=>u(r.id),className:"transition-all duration-200 hover:bg-blue-50 hover:border-blue-300 hover:shadow-md",disabled:i.has(r.id),children:i.has(r.id)?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(cn,{size:14,className:"mr-1"}),e.jsx("span",{children:"Details"}),r.expanded?e.jsx(Zn,{size:14,className:"ml-1"}):e.jsx(Rr,{size:14,className:"ml-1"})]})}),e.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>p(r.id,r.name),className:"transition-all duration-200 hover:bg-red-600 hover:shadow-lg text-red-600 border-red-200",children:[e.jsx(ut,{size:14,className:"mr-1"}),"Delete"]})]})})]}),Ty={},dc=Ty?.VITE_API_BASE_URL||"https://kwikmedi.mycartly.in/api",zy=r=>({id:r.id||0,name:r.full_name||r.name||"Unknown",email:r.email||"",phone:r.phone_number||r.phone||"",address:r.address||"",pincode:r.pincode||"",city:r.city||"",state:r.state||"",profile_image:r.profile_photo_url||r.profile_image||"",status:r.status==="active"||r.status==="inactive"||r.status==="suspended"?r.status:"active",email_verified:r.email_verified!==void 0?r.email_verified:!0,phone_verified:r.phone_verified!==void 0?r.phone_verified:!0,created_at:r.created_at||new Date().toISOString(),updated_at:r.updated_at||r.created_at||new Date().toISOString(),last_login:r.last_login||r.updated_at||r.created_at||new Date().toISOString(),total_bookings:r.total_bookings||r.completed_appointments||0,total_spent:r.total_spent||0,recent_activities:(r.recent_activities||r.activities||[]).map(l=>({activity_type:l.activity_type||l.type||"unknown",description:l.description||"",ip_address:l.ip_address||"",created_at:l.created_at||new Date().toISOString()})),expanded:!1}),Ly=()=>{const[r,l]=m.useState([]),[i,d]=m.useState(!0),[u,p]=m.useState(""),[x,g]=m.useState(1),[h,v]=m.useState(new Set),j={name:!0,contact:!0,location:!0,status:!0,activity:!0,actions:!0},y=5,{addToast:_}=_t(),{user:N}=Ut(),[B,P]=m.useState({isOpen:!1,userId:null,userName:""}),b=m.useCallback(async()=>{const K=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");if(!K){_("Please login to view users","error"),d(!1);return}try{d(!0);const I=await fetch(`${dc}/admin/users`,{headers:{Authorization:`Bearer ${K}`,"Content-Type":"application/json"}});if(!I.ok){if(I.status===401){_("Authentication failed. Please log in again.","error"),d(!1);return}throw new Error(`HTTP error! status: ${I.status}`)}const X=I.headers.get("content-type");if(!X||!X.includes("application/json")){console.warn("Response is not JSON, treating as empty list"),l([]),d(!1);return}const z=await I.text();if(!z||z.trim()===""){console.warn("Empty response body, treating as empty list"),l([]),d(!1);return}let E;try{E=JSON.parse(z)}catch(ae){throw console.error("JSON parse error:",ae,"Response text:",z),new Error("Invalid JSON response from server")}let Z=[];if(Array.isArray(E.data))Z=E.data;else if(Array.isArray(E.users))Z=E.users;else if(Array.isArray(E))Z=E;else if(E.success===!1){console.warn("API returned error:",E.message),l([]),d(!1);return}else throw new Error(E.message||"Invalid response format from server");const ne=Z.map(ae=>zy(ae));l(ne)}catch(I){console.error("Error fetching users:",I);const X=I instanceof Error?I.message:"Failed to fetch users";_(X,"error"),l([])}finally{d(!1)}},[_]);m.useEffect(()=>{b()},[b]);const k=r.filter(K=>K.name.toLowerCase().includes(u.toLowerCase())||K.email.toLowerCase().includes(u.toLowerCase())||K.phone.includes(u)||K.city.toLowerCase().includes(u.toLowerCase())),T=Math.ceil(k.length/y),U=(x-1)*y,O=k.slice(U,U+y),A=async(K,I)=>{const X=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");if(!X){_("Please login to update user status","error");return}let z={};const E=N?.name||N?.full_name||"Admin User";I==="suspended"?z={action:"suspend",notes:"User suspended by admin",admin_name:E}:z={action:"activate"};try{l(r.map(ee=>ee.id===K?{...ee,status:I,updated_at:new Date().toISOString()}:ee));const Z=await fetch(`${dc}/admin/users/${K}/status`,{method:"PUT",headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"},body:JSON.stringify(z)});let ne=null;const ae=Z.headers.get("content-type");if(ae&&ae.includes("application/json")&&Z.status!==204)try{const ee=await Z.text();ee&&ee.trim()&&(ne=JSON.parse(ee))}catch(ee){console.warn("Could not parse response:",ee)}if(!Z.ok){b();let ee="Failed to update user status";throw ne?ee=ne.message||ne.error?.message||ee:Z.status===404?ee="User status update endpoint not found. The API endpoint may not be implemented yet.":Z.status===401?ee="Authentication failed. Please log in again.":Z.status===403?ee="You do not have permission to update user status.":ee=`Server error: ${Z.status} ${Z.statusText}`,new Error(ee)}_(ne?.message||`User status updated to ${I}`,"success"),b()}catch(Z){console.error("Error updating user status:",Z);const ne=Z instanceof Error?Z.message:"Failed to update user status";_(ne,"error"),b()}},me=async K=>{const I=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");if(!I){_("Please login to delete user","error");return}try{if(!(await fetch(`${dc}/admin/users/${K}`,{method:"DELETE",headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"}})).ok)throw new Error("Failed to delete user");l(r.filter(z=>z.id!==K)),_("User deleted successfully","success"),P({isOpen:!1,userId:null,userName:""})}catch(X){console.error("Error deleting user:",X),_("Failed to delete user","error"),P({isOpen:!1,userId:null,userName:""})}},se=K=>{r.find(X=>X.id===K)?.expanded||(v(X=>new Set(X).add(K)),setTimeout(()=>{v(X=>{const z=new Set(X);return z.delete(K),z})},300)),l(X=>X.map(z=>z.id===K?{...z,expanded:!z.expanded}:z))},re=K=>new Date(K).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),H=(K,I)=>{P({isOpen:!0,userId:K,userName:I})};return e.jsxs(Lt,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Users"}),e.jsx("p",{className:"text-gray-600",children:"Manage user accounts, orders, and engagement activity."})]}),i?e.jsx(Wn,{}):e.jsxs(Be,{children:[e.jsxs(Ze,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(Ye,{children:"All Users"}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(Ip,{searchTerm:u,onSearchChange:p})})]}),e.jsxs(He,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx(Ey,{columnVisibility:j}),e.jsx("tbody",{children:O.map(K=>e.jsxs(xs.Fragment,{children:[e.jsx(Ay,{user:K,columnVisibility:j,expandingUsers:h,onStatusChange:A,onToggleDropdown:se,onDelete:H,formatDate:re}),K.expanded&&e.jsx("tr",{className:"bg-gradient-to-r from-gray-50 to-blue-50/30 border-l-4 border-primary/20",children:e.jsx("td",{colSpan:Object.values(j).filter(Boolean).length,className:"py-6 px-6",children:e.jsx(Py,{user:K,formatDate:re})})})]},K.id))})]})}),T>1&&e.jsx(Cy,{currentPage:x,totalPages:T,startIndex:U,itemsPerPage:y,totalItems:k.length,onPageChange:g})]})]}),e.jsx(Sy,{isOpen:B.isOpen,onClose:()=>P({isOpen:!1,userId:null,userName:""}),onConfirm:()=>B.userId&&me(B.userId),userName:B.userName})]})},My=({searchTerm:r,onSearchChange:l})=>e.jsxs("div",{className:"relative w-64",children:[e.jsx(is,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search categories...",className:"pl-8 pr-4 py-2 w-full rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/20",value:r,onChange:i=>l(i.target.value)})]}),$y=({currentPage:r,totalPages:l,startIndex:i,itemsPerPage:d,totalItems:u,onPageChange:p})=>e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",i+1," to ",Math.min(i+d,u)," of ",u," categories"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{onClick:()=>p(Math.max(r-1,1)),disabled:r===1,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(on,{size:16})}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",r," of ",l]}),e.jsx(ie,{onClick:()=>p(Math.min(r+1,l)),disabled:r===l,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Js,{size:16})})]})]}),Iy=({isOpen:r,onClose:l,onSave:i,category:d,isSubmitting:u=!1,initialImageUrl:p})=>{const[x,g]=m.useState({name:"",description:"",icon:"",image:"",status:"active",sort_order:0}),[h,v]=m.useState(null);m.useEffect(()=>{d?(g({name:d.name,description:"",icon:"",image:typeof p=="string"?p:"",status:"active",sort_order:0}),v(typeof p=="string"&&p?p:null)):(g({name:"",description:"",icon:"",image:"",status:"active",sort_order:0}),v(null))},[d,r,p]);const j=y=>{y.preventDefault(),i(x)};return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:d?"Edit Category":"Add New Category"}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:e.jsx(ut,{size:20})})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:y=>g({...x,name:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image (upload a file or paste a URL)"}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx("div",{children:e.jsxs("label",{className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md cursor-pointer bg-gray-50 hover:bg-gray-100",children:[e.jsx(jp,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Choose file"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:y=>{const _=y.target.files&&y.target.files[0];if(_){const N=URL.createObjectURL(_);v(N),g({...x,image:_})}}})]})}),e.jsx("div",{children:e.jsx("input",{type:"url",value:typeof x.image=="string"?x.image:"",onChange:y=>{g({...x,image:y.target.value}),v(y.target.value||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"/public/images/cat.jpg or https://..."})})]}),h&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:h,alt:"Preview",className:"max-h-24 max-w-full rounded border"})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(ie,{type:"button",onClick:l,className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx(ie,{type:"submit",disabled:u,className:"bg-primary hover:bg-primary/90 text-white",children:u?"Saving...":d?"Update":"Create"})]})]})]})}):null},Dy=({isOpen:r,onClose:l,onConfirm:i,category:d,isSubmitting:u=!1})=>r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Delete Category"}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:e.jsx(ut,{size:20})})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-600 mb-4",children:['Are you sure you want to delete "',d?.name,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(ie,{onClick:l,className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx(ie,{onClick:i,disabled:u,className:"bg-red-600 hover:bg-red-700 text-white",children:u?"Deleting...":"Delete"})]})]})]})}):null,Dp={},rs=Dp?.VITE_API_BASE_URL||"https://kwikmedi.mycartly.in",Ry=Dp?.VITE_BACKEND_BASE_URL||"https://kwikmedi.mycartly.in",Fy=r=>{const l=typeof r=="string"?r.trim():"";if(!l)return"";if(/^https?:\/\//i.test(l))return l;let i=l.replace(/\\/g,"/");return i.startsWith("public/")?i=i.slice(7):i.startsWith("/public/")&&(i=i.slice(8)),i=i.startsWith("/")?i:`/${i}`,`${Ry}${i}`},Oy=()=>{const{addToast:r}=_t(),[l,i]=m.useState("categories"),[d,u]=m.useState([]),[p,x]=m.useState([]),[g,h]=m.useState(!1),[v,j]=m.useState(!1),[y,_]=m.useState(""),[N,B]=m.useState(""),[P,b]=m.useState(1),[k,T]=m.useState(1),[U,O]=m.useState(!1),[A,me]=m.useState("add"),[se,re]=m.useState(null),[H,K]=m.useState(!1),[I,X]=m.useState(!1),[z,E]=m.useState([]),[Z,ne]=m.useState(!1),[ae,F]=m.useState([]),[ee,le]=m.useState(!1),[M,Y]=m.useState(!1),[je,we]=m.useState(null),[W,ce]=m.useState("add"),[ue,he]=m.useState(!1),[Ae,w]=m.useState(null),[$,G]=m.useState([]),[ge,ve]=m.useState(!1),[Se,Re]=m.useState(null),[xe,Qe]=m.useState("all"),[ze,te]=m.useState("all"),[Pe,ke]=m.useState(!1),be=10,Le=async()=>{h(!0);try{const V=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token"),_e=await fetch(`${rs}/api/admin/categories`,{method:"GET",headers:{"Content-Type":"application/json",...V?{Authorization:`Bearer ${V}`}:{}}}),Te=await _e.json();if(_e.ok&&Te.categories&&Array.isArray(Te.categories)){const tt=Te.categories.map(st=>({id:st.id,name:st.name,image_url:typeof st.image_url=="string"?st.image_url:"",created_at:st.created_at||new Date().toISOString(),updated_at:st.updated_at||new Date().toISOString()}));u(tt)}else throw new Error(Te.message||"Failed to fetch categories")}catch(V){console.error("Error fetching categories:",V);const _e=V instanceof Error?V.message:"Failed to fetch categories";r(_e,"error")}finally{h(!1)}};m.useEffect(()=>{Le()},[]),m.useEffect(()=>{l==="inventory"&&at()},[l]);const at=async()=>{j(!0);try{const V=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token"),_e=new URLSearchParams;N&&_e.append("search",N);const Te=await fetch(`${rs}/api/admin/inventory?${_e.toString()}`,{method:"GET",headers:{"Content-Type":"application/json",...V?{Authorization:`Bearer ${V}`}:{}}});if(!Te.ok){const tt=await Te.json().catch(()=>({}));throw console.error("Inventory fetch error:",Te.status,tt),new Error(tt.error?.message||tt.message||`Failed to fetch inventory: ${Te.statusText}`)}const Ue=await Te.json();if(Ue.inventory&&Array.isArray(Ue.inventory)){const tt=Ue.inventory.map(st=>({...st,price:Number(st.price||0),stock_quantity:Number(st.stock_quantity||0),low_stock_threshold:Number(st.low_stock_threshold||0)}));x(tt)}else console.warn("Unexpected inventory response format:",Ue),x([])}catch(V){console.error("Error fetching inventory:",V);const _e=V instanceof Error?V.message:"Failed to fetch inventory";r(_e,"error"),x([])}finally{j(!1)}},mt=async V=>{const _e=V.target.files?.[0];if(_e){if(!_e.name.toLowerCase().endsWith(".xlsx")&&!_e.name.toLowerCase().endsWith(".xls")){r("Please upload an Excel file (.xlsx or .xls)","error");return}X(!0);try{const Te=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token"),Ue=new FormData;Ue.append("inventory_file",_e);const tt=await fetch(`${rs}/api/admin/inventory/upload`,{method:"POST",headers:{...Te?{Authorization:`Bearer ${Te}`}:{}},body:Ue}),st=await tt.json();if(tt.ok)r(`Inventory uploaded: ${st.inserted} new, ${st.updated} updated`,"success"),at();else throw new Error(st.error?.message||st.message||"Failed to upload inventory")}catch(Te){console.error("Error uploading inventory:",Te);const Ue=Te instanceof Error?Te.message:"Failed to upload inventory";r(Ue,"error")}finally{X(!1),V.target.value=""}}},C=V=>{we(V),ce("edit"),le(!0)},Me=async V=>{if(confirm(`Are you sure you want to delete "${V.medicine_name}"?`))try{const _e=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");if(!_e){r("Please login to delete inventory","error");return}const Te=await fetch(`${rs}/api/admin/inventory/${V.id}`,{method:"DELETE",headers:{..._e?{Authorization:`Bearer ${_e}`}:{}}}),Ue=await Te.json();if(Te.ok)r("Inventory item deleted successfully","success"),at();else throw new Error(Ue.error?.message||Ue.message||"Failed to delete inventory item")}catch(_e){console.error("Error deleting inventory:",_e);const Te=_e instanceof Error?_e.message:"Failed to delete inventory item";r(Te,"error")}},qe=async V=>{Y(!0);try{const _e=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");if(!_e){r("Please login to add inventory","error");return}const Te=W==="edit"&&je?"PUT":"POST",Ue=W==="edit"&&je?`${rs}/api/admin/inventory/${je.id}`:`${rs}/api/admin/inventory`,tt=await fetch(Ue,{method:Te,headers:{..._e?{Authorization:`Bearer ${_e}`}:{}},body:V}),st=await tt.json();if(tt.ok)r(`Inventory item ${W==="edit"?"updated":"added"} successfully`,"success"),le(!1),we(null),ce("add"),at();else throw new Error(st.error?.message||st.message||`Failed to ${W==="edit"?"update":"add"} inventory item`)}catch(_e){console.error(`Error ${W==="edit"?"updating":"adding"} inventory:`,_e);const Te=_e instanceof Error?_e.message:`Failed to ${W==="edit"?"update":"add"} inventory item`;r(Te,"error")}finally{Y(!1)}},it=async(V,_e)=>{try{const Te=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token"),Ue=await fetch(`${rs}/api/admin/inventory/${V}/categories`,{method:"PUT",headers:{"Content-Type":"application/json",...Te?{Authorization:`Bearer ${Te}`}:{}},body:JSON.stringify({category_ids:_e})}),tt=await Ue.json();if(Ue.ok)r("Categories assigned successfully","success"),at();else throw new Error(tt.error?.message||tt.message||"Failed to assign categories")}catch(Te){console.error("Error assigning categories:",Te);const Ue=Te instanceof Error?Te.message:"Failed to assign categories";r(Ue,"error")}},ft=async()=>{if(z.length===0||ae.length===0){r("Please select inventory items and categories","error");return}try{const V=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token"),_e=await fetch(`${rs}/api/admin/inventory/bulk-assign-categories`,{method:"POST",headers:{"Content-Type":"application/json",...V?{Authorization:`Bearer ${V}`}:{}},body:JSON.stringify({inventory_ids:z,category_ids:ae})}),Te=await _e.json();if(_e.ok)r(`Categories assigned to ${Te.items_updated} items`,"success"),E([]),F([]),ne(!1),at();else throw new Error(Te.error?.message||Te.message||"Failed to assign categories")}catch(V){console.error("Error bulk assigning categories:",V);const _e=V instanceof Error?V.message:"Failed to assign categories";r(_e,"error")}},Bt=V=>{E(_e=>_e.includes(V)?_e.filter(Te=>Te!==V):[..._e,V])},Ve=()=>{z.length===Ht.length?E([]):E(Ht.map(V=>V.id))},mr=async()=>{if(z.length===0){r("Please select inventory items to delete","error");return}if(confirm(`Are you sure you want to delete ${z.length} inventory item(s)?`))try{const V=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");if(!V){r("Please login to delete inventory","error");return}const _e=await fetch(`${rs}/api/admin/inventory/bulk-delete`,{method:"POST",headers:{"Content-Type":"application/json",...V?{Authorization:`Bearer ${V}`}:{}},body:JSON.stringify({inventory_ids:z})}),Te=await _e.json();if(_e.ok)r(`Successfully deleted ${Te.deleted_count} inventory item(s)`,"success"),E([]),at();else throw new Error(Te.error?.message||Te.message||"Failed to delete inventory items")}catch(V){console.error("Error bulk deleting inventory:",V);const _e=V instanceof Error?V.message:"Failed to delete inventory items";r(_e,"error")}},ta=()=>{Re(null),Qe("all"),te("all"),ke(!1)},Ds=Se!==null||xe!=="all"||ze!=="all"||Pe,R=()=>{me("add"),re(null),O(!0)},Ne=V=>{me("edit"),re(V),O(!0)},Ke=V=>{me("delete"),re(V),O(!0)},kt=async V=>{K(!0);try{const _e=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");if(!_e){r("Please login to save category","error"),K(!1);return}const Te=Ue=>{if(!Ue)return"Request failed";if(typeof Ue=="string")return Ue;if(Ue.message&&typeof Ue.message=="string")return Ue.message;if(Ue.error&&typeof Ue.error=="string")return Ue.error;if(Ue.errors&&typeof Ue.errors=="object"){const tt=Object.keys(Ue.errors)[0],st=Array.isArray(Ue.errors[tt])?Ue.errors[tt][0]:Ue.errors[tt];return typeof st=="string"?st:"Validation failed"}try{return JSON.stringify(Ue)}catch{return"Unknown error"}};if(A==="add"){let Ue;if(V.image instanceof File){const Rt=new FormData;Rt.append("name",V.name),Rt.append("image",V.image),Ue=await fetch(`${rs}/api/admin/categories`,{method:"POST",headers:{Authorization:`Bearer ${_e}`},body:Rt})}else{const Rt={name:V.name};typeof V.image=="string"&&V.image.trim()!==""&&(Rt.image=V.image),Ue=await fetch(`${rs}/api/admin/categories`,{method:"POST",headers:{Authorization:`Bearer ${_e}`,"Content-Type":"application/json"},body:JSON.stringify(Rt)})}const tt=await Ue.text(),st=(()=>{try{return tt?JSON.parse(tt):{}}catch{return{raw:tt}}})();if(Ue.ok&&st.category)await Le(),r("Category created successfully","success"),O(!1);else throw new Error(Te(st)||"Failed to create category")}else if(A==="edit"&&se){let Ue;if(V.image instanceof File){const Rt=new FormData;Rt.append("name",V.name),Rt.append("image",V.image),Ue=await fetch(`${rs}/api/admin/categories/${se.id}`,{method:"PUT",headers:{Authorization:`Bearer ${_e}`},body:Rt})}else{const Rt={name:V.name};typeof V.image=="string"&&V.image.trim()!==""&&(Rt.image=V.image),Ue=await fetch(`${rs}/api/admin/categories/${se.id}`,{method:"PUT",headers:{Authorization:`Bearer ${_e}`,"Content-Type":"application/json"},body:JSON.stringify(Rt)})}const tt=await Ue.text(),st=(()=>{try{return tt?JSON.parse(tt):{}}catch{return{raw:tt}}})();if(Ue.ok&&st.category)await Le(),r("Category updated successfully","success"),O(!1);else throw new Error(Te(st)||"Failed to update category")}}catch(_e){console.error("Error saving category:",_e);const Te=_e instanceof Error?_e.message:typeof _e=="string"?_e:"Failed to save category";r(Te,"error")}finally{K(!1)}},lt=async()=>{if(se){K(!0);try{const V=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");if(!V){r("Please login to delete category","error"),K(!1);return}const _e=await fetch(`${rs}/api/admin/categories/${se.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${V}`,"Content-Type":"application/json"}}),Te=await _e.json();if(_e.ok)u(Ue=>Ue.filter(tt=>tt.id!==se.id)),r("Category deleted successfully","success"),O(!1),Le();else throw new Error(Te.message||Te.error||"Failed to delete category")}catch(V){console.error("Error deleting category:",V);const _e=V instanceof Error?V.message:"Failed to delete category";r(_e,"error")}finally{K(!1)}}},vt=d.filter(V=>V.name.toLowerCase().includes(y.toLowerCase())),ls=Math.ceil(vt.length/be),os=(P-1)*be,cs=vt.slice(os,os+be),Ss=V=>new Date(V).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Ht=p.filter(V=>!(!(V.medicine_name.toLowerCase().includes(N.toLowerCase())||V.manufacturer_name?.toLowerCase().includes(N.toLowerCase()))||Se!==null&&!V.category_ids.includes(Se)||xe==="yes"&&!V.is_discontinued||xe==="no"&&V.is_discontinued||ze==="required"&&!V.prescription_required||ze==="not_required"&&V.prescription_required||Pe&&V.stock_quantity>(V.low_stock_threshold||0))),Gs=Math.ceil(Ht.length/be),Fr=(k-1)*be,Or=Ht.slice(Fr,Fr+be);return e.jsxs(Lt,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Categories & Inventory"}),e.jsx("p",{className:"text-gray-600",children:"Manage categories and platform inventory with category assignment."})]}),e.jsxs($c,{value:l,onValueChange:V=>i(V),children:[e.jsxs(Ic,{className:"mb-6",children:[e.jsx(Kn,{value:"categories",children:"Categories"}),e.jsx(Kn,{value:"inventory",children:"Inventory"})]}),l==="categories"&&e.jsxs(e.Fragment,{children:[g?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading categories..."})]}):e.jsxs(Be,{children:[e.jsxs(Ze,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(Ye,{children:"All Categories"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(My,{searchTerm:y,onSearchChange:_}),e.jsxs(ie,{onClick:R,className:"flex items-center space-x-2",children:[e.jsx(ks,{size:16}),e.jsx("span",{children:"Add Category"})]})]})]}),e.jsxs(He,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left pb-4",children:"Image"}),e.jsx("th",{className:"text-left pb-4",children:"Name"}),e.jsx("th",{className:"text-left pb-4",children:"Published"}),e.jsx("th",{className:"text-left pb-4",children:"Actions"})]})}),e.jsx("tbody",{children:cs.map(V=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors duration-150",children:[e.jsx("td",{className:"py-4",children:V.image_url?e.jsx("img",{src:Fy(V.image_url),alt:V.name,className:"h-10 w-10 rounded object-cover border",onError:_e=>{const Te=_e.currentTarget;Te.src!==V.image_url&&(Te.src=V.image_url)}}):e.jsx("div",{className:"h-10 w-10 rounded bg-gray-100 border"})}),e.jsxs("td",{className:"py-4",children:[e.jsx("div",{className:"text-gray-900 font-medium",children:V.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",V.id]})]}),e.jsx("td",{className:"py-4",children:e.jsx("div",{className:"text-sm text-gray-600",children:Ss(V.created_at)})}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{onClick:()=>Ne(V),children:"Edit"}),e.jsx(ie,{onClick:()=>Ke(V),className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete"})]})})]},V.id))})]})}),ls>1&&e.jsx($y,{currentPage:P,totalPages:ls,startIndex:os,itemsPerPage:be,totalItems:vt.length,onPageChange:b})]})]}),(A==="add"||A==="edit")&&e.jsx(Iy,{isOpen:U,onClose:()=>O(!1),onSave:kt,category:se?{id:se.id,name:se.name,description:"",icon:"",status:"active",total_services:0,created_at:se.created_at,updated_at:se.updated_at}:void 0,initialImageUrl:se?.image_url,isSubmitting:H}),A==="delete"&&e.jsx(Dy,{isOpen:U,onClose:()=>O(!1),onConfirm:lt,category:se,isSubmitting:H})]}),l==="inventory"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"relative flex-1 max-w-md",children:e.jsx("input",{type:"text",placeholder:"Search inventory by name or manufacturer...",value:N,onChange:V=>B(V.target.value),className:"w-full px-4 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})}),z.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(ie,{onClick:()=>ne(!0),className:"flex items-center gap-2",children:[e.jsx(_g,{size:16}),"Assign Categories (",z.length,")"]}),e.jsxs(ie,{onClick:mr,className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(Dr,{size:16}),"Delete (",z.length,")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ie,{onClick:()=>ve(!ge),className:`flex items-center gap-2 ${Ds?"bg-primary text-white":""}`,children:[e.jsx(Ua,{size:16}),"Filters",Ds&&e.jsx("span",{className:"ml-1 bg-white text-primary rounded-full w-5 h-5 flex items-center justify-center text-xs",children:[Se!==null,xe!=="all",ze!=="all",Pe].filter(Boolean).length})]}),e.jsxs(ie,{onClick:()=>le(!0),className:"flex items-center gap-2",children:[e.jsx(ks,{size:16}),"Add Inventory"]}),e.jsxs("label",{className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors cursor-pointer flex items-center gap-2",children:[e.jsx(jp,{size:16}),I?"Uploading...":"Upload Excel",e.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:mt,className:"hidden",disabled:I})]})]})]}),ge&&e.jsxs(Be,{className:"mb-6",children:[e.jsxs(Ze,{className:"flex items-center justify-between pb-3",children:[e.jsx(Ye,{className:"text-lg",children:"Filters"}),e.jsxs("div",{className:"flex items-center gap-2",children:[Ds&&e.jsxs(ie,{onClick:ta,className:"text-xs flex items-center gap-1",size:"sm",children:[e.jsx(or,{size:14}),"Clear All"]}),e.jsx("button",{onClick:()=>ve(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ut,{size:20})})]})]}),e.jsx(He,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category"}),e.jsxs("select",{value:Se||"",onChange:V=>Re(V.target.value?parseInt(V.target.value):null),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"All Categories"}),d.map(V=>e.jsx("option",{value:V.id,children:V.name},V.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Discontinued"}),e.jsxs("select",{value:xe,onChange:V=>Qe(V.target.value),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"yes",children:"Discontinued"}),e.jsx("option",{value:"no",children:"Active"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Prescription"}),e.jsxs("select",{value:ze,onChange:V=>te(V.target.value),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"required",children:"Required"}),e.jsx("option",{value:"not_required",children:"Not Required"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Stock Status"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Pe,onChange:V=>ke(V.target.checked),className:"w-4 h-4 text-primary border-primary/20 rounded focus:ring-primary"}),e.jsx("span",{className:"text-sm",children:"Low Stock Only"})]})]})]})})]}),v?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading inventory..."})]}):e.jsxs(Be,{children:[e.jsx(Ze,{children:e.jsx(Ye,{children:"Platform Inventory"})}),e.jsxs(He,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50",children:[e.jsx("th",{className:"text-left pb-4 px-2",children:e.jsx("input",{type:"checkbox",checked:z.length===Ht.length&&Ht.length>0,onChange:Ve,className:"w-4 h-4 text-primary border-primary/20 rounded focus:ring-primary"})}),e.jsx("th",{className:"text-left pb-4 px-2",children:"Name"}),e.jsx("th",{className:"text-left pb-4 px-2",children:"Price"}),e.jsx("th",{className:"text-left pb-4 px-2",children:"Discontinued"}),e.jsx("th",{className:"text-left pb-4 px-2",children:"Prescription"}),e.jsx("th",{className:"text-left pb-4 px-2",children:"Manufacturer"}),e.jsx("th",{className:"text-left pb-4 px-2",children:"Type"}),e.jsx("th",{className:"text-left pb-4 px-2",children:"Pack Size"}),e.jsx("th",{className:"text-left pb-4 px-2",children:"Composition"}),e.jsx("th",{className:"text-left pb-4 px-2",children:"Stock"}),e.jsx("th",{className:"text-left pb-4 px-2",children:"Low Stock"}),e.jsx("th",{className:"text-left pb-4 px-2",children:"Justification"}),e.jsx("th",{className:"text-left pb-4 px-2",children:"Description"}),e.jsx("th",{className:"text-left pb-4 px-2",children:"Images"}),e.jsx("th",{className:"text-left pb-4 px-2",children:"Categories"}),e.jsx("th",{className:"text-left pb-4 px-2",children:"Actions"})]})}),e.jsx("tbody",{children:Or.map(V=>e.jsxs("tr",{className:"border-b hover:bg-secondary/50 transition-colors",children:[e.jsx("td",{className:"py-3 px-2",children:e.jsx("input",{type:"checkbox",checked:z.includes(V.id),onChange:()=>Bt(V.id),className:"w-4 h-4 text-primary border-primary/20 rounded focus:ring-primary"})}),e.jsx("td",{className:"py-3 px-2",children:e.jsx("div",{className:"font-medium max-w-[150px]",children:V.medicine_name})}),e.jsxs("td",{className:"py-3 px-2 font-medium",children:["",Number(V.price||0).toFixed(2)]}),e.jsx("td",{className:"py-3 px-2",children:V.is_discontinued?e.jsx("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded",children:"Yes"}):e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-700 rounded",children:"No"})}),e.jsx("td",{className:"py-3 px-2",children:V.prescription_required?e.jsx("span",{className:"px-2 py-1 text-xs bg-primary/20 text-primary rounded",children:"Required"}):e.jsx("span",{className:"text-xs text-gray-400",children:"Not Required"})}),e.jsx("td",{className:"py-3 px-2 text-sm text-gray-600 max-w-[120px]",children:V.manufacturer_name||"-"}),e.jsx("td",{className:"py-3 px-2 text-sm max-w-[100px]",children:V.medicine_type||"-"}),e.jsx("td",{className:"py-3 px-2 text-sm max-w-[100px]",children:V.pack_size_label||"-"}),e.jsxs("td",{className:"py-3 px-2 text-xs max-w-[150px]",children:[V.short_composition1&&e.jsx("div",{children:V.short_composition1}),V.short_composition2&&e.jsx("div",{className:"text-gray-500",children:V.short_composition2}),!V.short_composition1&&!V.short_composition2&&"-"]}),e.jsx("td",{className:"py-3 px-2",children:e.jsx("span",{className:V.stock_quantity<=(V.low_stock_threshold||0)?"text-red-600 font-medium":"",children:V.stock_quantity})}),e.jsx("td",{className:"py-3 px-2 text-sm",children:V.low_stock_threshold||0}),e.jsx("td",{className:"py-3 px-2 text-xs max-w-[200px]",children:V.justification?e.jsx("div",{className:"truncate",title:V.justification,children:V.justification}):"-"}),e.jsx("td",{className:"py-3 px-2 text-xs max-w-[200px]",children:V.description?e.jsx("div",{className:"truncate",title:V.description,children:V.description}):"-"}),e.jsx("td",{className:"py-3 px-2",children:V.images?e.jsxs("div",{className:"flex gap-1",children:[V.images.split(",").slice(0,2).map((_e,Te)=>e.jsx("img",{src:_e.trim(),alt:`${V.medicine_name} ${Te+1}`,className:"w-10 h-10 object-cover rounded border",onError:Ue=>{Ue.target.style.display="none"}},Te)),V.images.split(",").length>2&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",V.images.split(",").length-2]})]}):"-"}),e.jsx("td",{className:"py-3 px-2",children:e.jsx("div",{className:"flex flex-wrap gap-1 max-w-[150px]",children:V.category_names.length>0?V.category_names.map((_e,Te)=>e.jsx("span",{className:"px-2 py-1 text-xs bg-secondary text-primary rounded-full",children:_e},Te)):e.jsx("span",{className:"text-xs text-gray-400",children:"No categories"})})}),e.jsx("td",{className:"py-3 px-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ie,{onClick:()=>{w(V),G(V.category_ids),he(!0)},className:"px-2 py-1 text-xs flex items-center gap-1 bg-blue-600 hover:bg-blue-700 text-white",size:"sm",title:"Assign Categories",children:[e.jsx(an,{size:14}),"Categories"]}),e.jsxs(ie,{onClick:()=>C(V),className:"px-2 py-1 text-xs flex items-center gap-1",size:"sm",children:[e.jsx(vp,{size:14}),"Edit"]}),e.jsxs(ie,{onClick:()=>Me(V),className:"px-2 py-1 text-xs bg-red-600 hover:bg-red-700 text-white flex items-center gap-1",size:"sm",children:[e.jsx(Dr,{size:14}),"Delete"]})]})})]},V.id))})]})}),Gs>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Fr+1," to ",Math.min(Fr+be,Ht.length)," of ",Ht.length," items"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{onClick:()=>T(V=>Math.max(1,V-1)),disabled:k===1,children:"Previous"}),e.jsx(ie,{onClick:()=>T(V=>Math.min(Gs,V+1)),disabled:k===Gs,children:"Next"})]})]}),Ht.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(an,{className:"mx-auto text-primary mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"No inventory items found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Upload an Excel file to get started"})]})]})]}),Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs(Be,{className:"w-full max-w-md mx-4",children:[e.jsxs(Ze,{className:"flex items-center justify-between",children:[e.jsx(Ye,{children:"Bulk Assign Categories"}),e.jsx("button",{onClick:()=>{ne(!1),F([])},className:"text-gray-400 hover:text-gray-600",children:e.jsx(ut,{size:20})})]}),e.jsxs(He,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Select Categories (",z.length," items selected)"]}),e.jsx("select",{multiple:!0,value:ae.map(String),onChange:V=>{const _e=Array.from(V.target.selectedOptions,Te=>Number(Te.value));F(_e)},className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",size:Math.min(d.length,8),children:d.map(V=>e.jsx("option",{value:V.id,children:V.name},V.id))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hold Ctrl/Cmd to select multiple categories"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{onClick:()=>{ne(!1),F([])},className:"flex-1 border border-primary/20 text-primary hover:bg-secondary bg-transparent",children:"Cancel"}),e.jsx(ie,{onClick:ft,className:"flex-1",disabled:ae.length===0,children:"Assign"})]})]})]})}),ue&&Ae&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs(Be,{className:"w-full max-w-md mx-4",children:[e.jsxs(Ze,{className:"flex items-center justify-between",children:[e.jsxs(Ye,{children:["Assign Categories to ",Ae.medicine_name]}),e.jsx("button",{onClick:()=>{he(!1),w(null),G([])},className:"text-gray-400 hover:text-gray-600",children:e.jsx(ut,{size:20})})]}),e.jsxs(He,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Categories"}),e.jsx("select",{multiple:!0,value:$.map(String),onChange:V=>{const _e=Array.from(V.target.selectedOptions,Te=>Number(Te.value));G(_e)},className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",size:Math.min(d.length,8),children:d.map(V=>e.jsx("option",{value:V.id,children:V.name},V.id))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hold Ctrl/Cmd to select multiple categories"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{onClick:()=>{he(!1),w(null),G([])},className:"flex-1 border border-primary/20 text-primary hover:bg-secondary bg-transparent",children:"Cancel"}),e.jsx(ie,{onClick:async()=>{Ae&&(await it(Ae.id,$),he(!1),w(null),G([]))},className:"flex-1",disabled:$.length===0,children:"Assign"})]})]})]})}),ee&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(Be,{className:"w-full max-w-7xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ze,{children:e.jsx(Ye,{children:W==="edit"?"Edit Inventory Item":"Add New Inventory Item"})}),e.jsx(He,{children:e.jsx(Uy,{categories:d,onSubmit:qe,onCancel:()=>{le(!1),we(null),ce("add")},isSubmitting:M,initialData:je,mode:W})})]})})]})]})]})},Uy=({categories:r,onSubmit:l,onCancel:i,isSubmitting:d,initialData:u,mode:p="add"})=>{const[x,g]=m.useState({medicine_name:u?.medicine_name||"",price:u?.price?.toString()||"",is_discontinued:u?.is_discontinued||!1,prescription_required:u?.prescription_required||!1,manufacturer_name:u?.manufacturer_name||"",medicine_type:u?.medicine_type||"",pack_size_label:u?.pack_size_label||"",short_composition1:u?.short_composition1||"",short_composition2:u?.short_composition2||"",stock_quantity:u?.stock_quantity?.toString()||"",low_stock_threshold:u?.low_stock_threshold?.toString()||"",justification:u?.justification||"",description:u?.description||"",category_ids:u?.category_ids||[]}),[h,v]=m.useState([]),[j,y]=m.useState(u?.images?u.images.split(",").filter(b=>b.trim()):[]),_=b=>{b.preventDefault();const k=new FormData;Object.entries(x).forEach(([T,U])=>{T==="category_ids"?x.category_ids.forEach(O=>{k.append("category_ids",O.toString())}):T==="is_discontinued"||T==="prescription_required"?k.append(T,U?"true":"false"):U!==""&&k.append(T,U.toString())}),h.forEach(T=>{k.append("images",T)}),p==="edit"&&j.length>0&&j.forEach(T=>{k.append("existing_images",T)}),l(k)},N=b=>{y(k=>k.filter((T,U)=>U!==b))},B=b=>{if(b.target.files){const k=Array.from(b.target.files);v(T=>[...T,...k])}},P=b=>{v(k=>k.filter((T,U)=>U!==b))};return e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Medicine Name *"}),e.jsx("input",{type:"text",required:!0,value:x.medicine_name,onChange:b=>g({...x,medicine_name:b.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:x.price,onChange:b=>g({...x,price:b.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Manufacturer"}),e.jsx("input",{type:"text",value:x.manufacturer_name,onChange:b=>g({...x,manufacturer_name:b.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type"}),e.jsx("input",{type:"text",value:x.medicine_type,onChange:b=>g({...x,medicine_type:b.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Pack Size"}),e.jsx("input",{type:"text",value:x.pack_size_label,onChange:b=>g({...x,pack_size_label:b.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Stock Quantity"}),e.jsx("input",{type:"number",value:x.stock_quantity,onChange:b=>g({...x,stock_quantity:b.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Low Stock Threshold"}),e.jsx("input",{type:"number",value:x.low_stock_threshold,onChange:b=>g({...x,low_stock_threshold:b.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Composition 1"}),e.jsx("input",{type:"text",value:x.short_composition1,onChange:b=>g({...x,short_composition1:b.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Composition 2"}),e.jsx("input",{type:"text",value:x.short_composition2,onChange:b=>g({...x,short_composition2:b.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Justification (Active Ingredient & Class)"}),e.jsx("textarea",{value:x.justification,onChange:b=>g({...x,justification:b.target.value}),rows:3,className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:b=>g({...x,description:b.target.value}),rows:3,className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Images"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:B,className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),j.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Existing Images:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j.map((b,k)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:b.trim(),alt:`Existing ${k+1}`,className:"w-20 h-20 object-cover rounded border",onError:T=>{T.target.style.display="none"}}),e.jsx("button",{type:"button",onClick:()=>N(k),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs",children:""})]},`existing-${k}`))})]}),h.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"New Images:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.map((b,k)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(b),alt:`Preview ${k+1}`,className:"w-20 h-20 object-cover rounded border"}),e.jsx("button",{type:"button",onClick:()=>P(k),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs",children:""})]},`new-${k}`))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Categories"}),e.jsx("select",{multiple:!0,value:x.category_ids.map(String),onChange:b=>{const k=Array.from(b.target.selectedOptions,T=>Number(T.value));g({...x,category_ids:k})},className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",size:Math.min(r.length,5),children:r.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.is_discontinued,onChange:b=>g({...x,is_discontinued:b.target.checked}),className:"w-4 h-4 text-primary border-primary/20 rounded focus:ring-primary"}),e.jsx("span",{className:"text-sm",children:"Discontinued"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.prescription_required,onChange:b=>g({...x,prescription_required:b.target.checked}),className:"w-4 h-4 text-primary border-primary/20 rounded focus:ring-primary"}),e.jsx("span",{className:"text-sm",children:"Prescription Required"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(ie,{type:"button",onClick:i,className:"flex-1 border border-primary/20 text-primary hover:bg-secondary bg-transparent",disabled:d,children:"Cancel"}),e.jsx(ie,{type:"submit",className:"flex-1",disabled:d,children:d?p==="edit"?"Updating...":"Adding...":p==="edit"?"Update Inventory":"Add Inventory"})]})]})},By={},Hy=By?.VITE_API_BASE_URL||"/api",Ms=(r,l="An error occurred")=>{if(!r)return l;if(typeof r=="string")return r;if(r.message&&typeof r.message=="string")return r.message;if(r.response?.data){const i=r.response.data;if(i.message&&typeof i.message=="string")return i.message;if(i.error){if(typeof i.error=="string")return i.error;if(i.error?.message&&typeof i.error.message=="string")return i.error.message}}if(r.error){if(typeof r.error=="string")return r.error;if(r.error?.message&&typeof r.error.message=="string")return r.error.message}if(typeof r=="object")try{return JSON.stringify(r)}catch{return l}return l};function Vy(){const r=Hy,{addToast:l}=_t(),[i,d]=m.useState("rates"),[u,p]=m.useState(""),[x,g]=m.useState([]),[h,v]=m.useState([]),[j,y]=m.useState(!1),[_,N]=m.useState(!1),[B,P]=m.useState("add"),[b,k]=m.useState(null),[T,U]=m.useState(!1),[O,A]=m.useState({category_id:"",commission_percentage:"",min_commission:"",max_commission:"",effective_from:"",effective_to:"",is_active:!0}),[me,se]=m.useState([]),[re,H]=m.useState(null),[K,I]=m.useState(!1),[X,z]=m.useState({category_id:"",provider_id:"",start_date:"",end_date:"",provider_payment_status:"",group_by_category:!1}),E=async()=>{try{const W=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token"),ue=await(await fetch(`${r}/admin/categories`,{headers:{Authorization:`Bearer ${W}`}})).json();ue.categories&&Array.isArray(ue.categories)&&v(ue.categories.map(he=>({id:he.id,name:he.name})))}catch(W){console.error("Error fetching categories:",W)}},Z=async()=>{y(!0);try{const W=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if(!W)throw new Error("Authentication token not found");const ue=await(await fetch(`${r}/admin/commission/categories`,{headers:{Authorization:`Bearer ${W}`}})).json();if(ue.success&&ue.category_rates)g(ue.category_rates);else{const he=Ms(ue,"Failed to fetch category rates");l(he,"error")}}catch(W){console.error("Error fetching category rates:",W);const ce=Ms(W,"Failed to fetch category rates");l(ce,"error")}finally{y(!1)}},ne=async()=>{I(!0);try{const W=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if(!W)throw new Error("Authentication token not found");const ce=new URLSearchParams;X.category_id&&ce.append("category_id",X.category_id),X.provider_id&&ce.append("provider_id",X.provider_id),X.start_date&&ce.append("start_date",X.start_date),X.end_date&&ce.append("end_date",X.end_date),X.provider_payment_status&&ce.append("provider_payment_status",X.provider_payment_status),X.group_by_category&&ce.append("group_by_category","true");const he=await(await fetch(`${r}/admin/bookings/commission-history?${ce.toString()}`,{headers:{Authorization:`Bearer ${W}`}})).json();if(he.success)se(he.bookings||[]),H(he.summary||null);else{const Ae=Ms(he,"Failed to fetch commission history");l(Ae,"error")}}catch(W){console.error("Error fetching commission history:",W);const ce=Ms(W,"Failed to fetch commission history");l(ce,"error")}finally{I(!1)}},ae=async(W,ce)=>{try{const ue=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if(!ue)throw new Error("Authentication token not found");const Ae=await(await fetch(`${r}/admin/bookings/${W}/provider-payment`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ue}`},body:JSON.stringify({provider_payment_status:ce,admin_name:"Admin"})})).json();if(Ae.success)l(`Provider payment marked as ${ce}`,"success"),ne();else{const w=Ms(Ae,"Failed to update provider payment status");l(w,"error")}}catch(ue){console.error("Error updating provider payment status:",ue);const he=Ms(ue,"Failed to update provider payment status");l(he,"error")}},F=()=>{P("add"),k(null),A({category_id:"",commission_percentage:"",min_commission:"",max_commission:"",effective_from:new Date().toISOString().split("T")[0],effective_to:"",is_active:!0}),N(!0)},ee=W=>{P("edit"),k(W),A({category_id:W.category_id.toString(),commission_percentage:W.commission_percentage.toString(),min_commission:W.min_commission.toString(),max_commission:W.max_commission?.toString()||"",effective_from:W.effective_from.split("T")[0],effective_to:W.effective_to?W.effective_to.split("T")[0]:"",is_active:W.is_active}),N(!0)},le=W=>{P("delete"),k(W),N(!0)},M=async W=>{W.preventDefault(),U(!0);try{const ce=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if(!ce)throw new Error("Authentication token not found");if(B==="add"){const ue={category_id:Number(O.category_id),commission_percentage:Number(O.commission_percentage),min_commission:O.min_commission?Number(O.min_commission):0,max_commission:O.max_commission?Number(O.max_commission):null,effective_from:O.effective_from?new Date(O.effective_from).toISOString():new Date().toISOString(),effective_to:O.effective_to?new Date(O.effective_to).toISOString():null,is_active:O.is_active,created_by:"admin"},Ae=await(await fetch(`${r}/admin/commission/categories`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ce}`},body:JSON.stringify(ue)})).json();if(Ae.success)l("Category commission rate added successfully","success"),N(!1),Z();else{const w=Ms(Ae,"Failed to add category commission rate");l(w,"error")}}else if(B==="edit"&&b){const ue={};O.commission_percentage&&(ue.commission_percentage=Number(O.commission_percentage)),O.min_commission&&(ue.min_commission=Number(O.min_commission)),O.max_commission&&(ue.max_commission=O.max_commission?Number(O.max_commission):null),O.effective_from&&(ue.effective_from=new Date(O.effective_from).toISOString()),O.effective_to&&(ue.effective_to=O.effective_to?new Date(O.effective_to).toISOString():null),O.is_active!==void 0&&(ue.is_active=O.is_active);const Ae=await(await fetch(`${r}/admin/commission/categories/${b.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ce}`},body:JSON.stringify(ue)})).json();if(Ae.success)l("Category commission rate updated successfully","success"),N(!1),Z();else{const w=Ms(Ae,"Failed to update category commission rate");l(w,"error")}}}catch(ce){console.error("Error submitting form:",ce);const ue=Ms(ce,"Error submitting form. Please try again.");l(ue,"error")}finally{U(!1)}},Y=async()=>{if(b){U(!0);try{const W=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if(!W)throw new Error("Authentication token not found");const ue=await(await fetch(`${r}/admin/commission/categories/${b.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${W}`}})).json();if(ue.success)l("Category commission rate deleted successfully","success"),N(!1),Z();else{const he=Ms(ue,"Failed to delete category commission rate");l(he,"error")}}catch(W){console.error("Error deleting category rate:",W);const ce=Ms(W,"Error deleting category rate");l(ce,"error")}finally{U(!1)}}};m.useEffect(()=>{E(),i==="rates"?Z():i==="history"&&ne()},[i]);const je=()=>{if(j)return e.jsx("div",{className:"flex justify-center p-8",children:"Loading category rates..."});const W=x.filter(ce=>ce.category_name.toLowerCase().includes(u.toLowerCase()));return W.length===0?e.jsx("div",{className:"flex justify-center p-8 text-gray-500",children:"No category rates found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-4",children:"Category"}),e.jsx("th",{className:"text-left p-4",children:"Commission %"}),e.jsx("th",{className:"text-left p-4",children:"Min Commission"}),e.jsx("th",{className:"text-left p-4",children:"Max Commission"}),e.jsx("th",{className:"text-left p-4",children:"Effective From"}),e.jsx("th",{className:"text-left p-4",children:"Status"}),e.jsx("th",{className:"text-left p-4",children:"Actions"})]})}),e.jsx("tbody",{children:W.map(ce=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-4 font-medium",children:ce.category_name}),e.jsxs("td",{className:"p-4",children:[ce.commission_percentage,"%"]}),e.jsxs("td",{className:"p-4",children:["",ce.min_commission]}),e.jsxs("td",{className:"p-4",children:["",ce.max_commission||"No limit"]}),e.jsx("td",{className:"p-4",children:new Date(ce.effective_from).toLocaleDateString()}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${ce.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ce.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>ee(ce),children:[e.jsx($g,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs(ie,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>le(ce),children:[e.jsx(Dr,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]},ce.id))})]})})},we=()=>K?e.jsx("div",{className:"flex justify-center p-8",children:"Loading commission history..."}):me.length===0?e.jsx("div",{className:"flex justify-center p-8 text-gray-500",children:"No commission history found"}):e.jsxs("div",{className:"space-y-6",children:[re&&e.jsxs(Be,{children:[e.jsx(Ze,{children:e.jsx(Ye,{children:"Summary"})}),e.jsx(He,{children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold",children:re.total_bookings})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold",children:["",parseFloat(re.total_revenue).toLocaleString("en-IN",{maximumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Commission"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",parseFloat(re.total_commission).toLocaleString("en-IN",{maximumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Provider Payout"}),e.jsxs("p",{className:"text-2xl font-bold",children:["",parseFloat(re.total_provider_payout).toLocaleString("en-IN",{maximumFractionDigits:2})]})]})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-4",children:"Booking ID"}),e.jsx("th",{className:"text-left p-4",children:"Date"}),e.jsx("th",{className:"text-left p-4",children:"Category"}),e.jsx("th",{className:"text-left p-4",children:"Service"}),e.jsx("th",{className:"text-left p-4",children:"Provider"}),e.jsx("th",{className:"text-left p-4",children:"Service Price"}),e.jsx("th",{className:"text-left p-4",children:"Commission"}),e.jsx("th",{className:"text-left p-4",children:"Provider Payout"}),e.jsx("th",{className:"text-left p-4",children:"Payment Status"}),e.jsx("th",{className:"text-left p-4",children:"Actions"})]})}),e.jsx("tbody",{children:me.map(W=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsxs("td",{className:"p-4",children:["#",W.booking_id]}),e.jsx("td",{className:"p-4",children:new Date(W.booking_date).toLocaleDateString()}),e.jsx("td",{className:"p-4",children:W.category.name}),e.jsx("td",{className:"p-4",children:W.service.title}),e.jsx("td",{className:"p-4",children:W.provider.name}),e.jsxs("td",{className:"p-4",children:["",parseFloat(W.payment.service_price).toLocaleString("en-IN",{maximumFractionDigits:2})]}),e.jsxs("td",{className:"p-4 text-green-600 font-medium",children:["",parseFloat(W.payment.commission_amount).toLocaleString("en-IN",{maximumFractionDigits:2}),e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",W.payment.commission_percentage,"%)"]})]}),e.jsxs("td",{className:"p-4",children:["",parseFloat(W.payment.provider_payout).toLocaleString("en-IN",{maximumFractionDigits:2})]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${W.provider_payment.status==="paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:W.provider_payment.status==="paid"?"Paid":"Unpaid"})}),e.jsx("td",{className:"p-4",children:W.provider_payment.status==="unpaid"?e.jsxs(ie,{size:"sm",onClick:()=>ae(W.booking_id,"paid"),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(ns,{className:"h-4 w-4 mr-1"}),"Mark Paid"]}):e.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>ae(W.booking_id,"unpaid"),className:"text-yellow-600",children:[e.jsx(or,{className:"h-4 w-4 mr-1"}),"Mark Unpaid"]})})]},W.booking_id))})]})})]});return e.jsxs(Lt,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Commission Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage category commission rates and view commission booking history."})]}),e.jsxs(Be,{children:[e.jsxs(Ze,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(Ye,{children:"Commission Settings"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[i==="rates"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative w-64",children:[e.jsx(is,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search categories...",className:"pl-8 pr-4 py-2 w-full rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/20",value:u,onChange:W=>p(W.target.value)})]}),e.jsxs(ie,{onClick:F,children:[e.jsx(ks,{className:"h-4 w-4 mr-2"}),"Add New"]})]}),i==="history"&&e.jsxs(ie,{onClick:ne,children:[e.jsx(Ua,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),e.jsxs(He,{children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx($c,{value:i,onValueChange:W=>d(W),className:"w-full",children:e.jsxs(Ic,{className:"grid grid-cols-2 gap-2 p-1 bg-gray-100 rounded-full",children:[e.jsx(Kn,{value:"rates",className:"data-[state=active]:bg-white data-[state=active]:text-primary data-[state=active]:shadow-sm rounded-full py-2.5",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Hn,{className:"h-4 w-4"}),e.jsx("span",{children:"Category Rates"})]})}),e.jsx(Kn,{value:"history",className:"data-[state=active]:bg-white data-[state=active]:text-primary data-[state=active]:shadow-sm rounded-full py-2.5",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(fp,{className:"h-4 w-4"}),e.jsx("span",{children:"Commission History"})]})})]})})}),i==="history"&&e.jsxs(Be,{className:"mb-6",children:[e.jsx(Ze,{children:e.jsxs(Ye,{className:"flex items-center",children:[e.jsx(Ua,{className:"h-5 w-5 mr-2"}),"Filters"]})}),e.jsx(He,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",value:X.category_id,onChange:W=>z({...X,category_id:W.target.value}),children:[e.jsx("option",{value:"",children:"All Categories"}),h.map(W=>e.jsx("option",{value:W.id,children:W.name},W.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provider ID"}),e.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Provider ID",value:X.provider_id,onChange:W=>z({...X,provider_id:W.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",value:X.start_date,onChange:W=>z({...X,start_date:W.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",value:X.end_date,onChange:W=>z({...X,end_date:W.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",value:X.provider_payment_status,onChange:W=>z({...X,provider_payment_status:W.target.value}),children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"unpaid",children:"Unpaid"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(ie,{onClick:ne,className:"w-full",children:"Apply Filters"})})]})})]}),e.jsxs("div",{className:"mt-6",children:[i==="rates"&&je(),i==="history"&&we()]})]})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[B==="add"&&"Add Category Commission Rate",B==="edit"&&"Edit Category Commission Rate",B==="delete"&&"Delete Confirmation"]}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ut,{size:20})})]}),B==="delete"?e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-600 mb-4",children:['Are you sure you want to delete the commission rate for "',b?.category_name,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(ie,{onClick:()=>N(!1),className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx(ie,{onClick:Y,disabled:T,className:"bg-red-600 hover:bg-red-700 text-white",children:T?"Deleting...":"Delete"})]})]}):e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),e.jsxs("select",{required:!0,disabled:B==="edit",value:O.category_id,onChange:W=>A({...O,category_id:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20 disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:"Select Category"}),h.map(W=>e.jsx("option",{value:W.id,children:W.name},W.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Commission Percentage (%) *"}),e.jsx("input",{type:"number",required:!0,step:"0.01",min:"0",max:"100",value:O.commission_percentage,onChange:W=>A({...O,commission_percentage:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Commission ()"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:O.min_commission,onChange:W=>A({...O,min_commission:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Commission ()"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:O.max_commission,onChange:W=>A({...O,max_commission:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"No limit"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Effective From *"}),e.jsx("input",{type:"date",required:!0,value:O.effective_from,onChange:W=>A({...O,effective_from:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Effective To"}),e.jsx("input",{type:"date",value:O.effective_to,onChange:W=>A({...O,effective_to:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:O.is_active,onChange:W=>A({...O,is_active:W.target.checked}),className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(ie,{type:"button",onClick:()=>N(!1),className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx(ie,{type:"submit",disabled:T,className:"bg-primary hover:bg-primary/90 text-white",children:T?"Saving...":B==="add"?"Create":"Update"})]})]})]})})]})}const Ky=({showColumnSettings:r,onToggleSettings:l,columnVisibility:i,onToggleColumn:d,onResetColumns:u})=>e.jsxs("div",{className:"relative",children:[e.jsxs(ie,{variant:"outline",size:"sm",onClick:l,className:"hover:bg-gray-100",children:[e.jsx(zc,{size:16,className:"mr-2"}),"Columns"]}),r&&e.jsx("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-10",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Column Visibility"}),e.jsx(ie,{variant:"ghost",size:"sm",onClick:l,className:"h-6 w-6 p-0",children:e.jsx(ut,{size:14})})]}),e.jsx("div",{className:"space-y-2",children:Object.entries(i).map(([p,x])=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:()=>d(p),disabled:["id","subject","status","actions"].includes(p),className:`rounded border-gray-300 text-primary focus:ring-primary ${["id","subject","status","actions"].includes(p)?"opacity-50":""}`}),e.jsxs("span",{className:`text-sm capitalize ${["id","subject","status","actions"].includes(p)?"font-medium":""}`,children:[p,["id","subject","status","actions"].includes(p)&&" (Required)"]})]},p))}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:e.jsx(ie,{variant:"outline",size:"sm",onClick:u,className:"w-full",children:"Reset to Default"})})]})})]}),qy=({dispute:r,formatDate:l,getStatusColor:i,getPriorityColor:d})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx(_s,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-blue-900",children:"Dispute Overview"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-purple-600 text-xs",children:"#"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Dispute ID"})]}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["#",r.id]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(fs,{size:16,className:"text-green-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Created Date"})]}),e.jsx("p",{className:"text-sm text-gray-800",children:l(r.created_at)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(as,{size:16,className:"text-orange-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Last Updated"})]}),e.jsx("p",{className:"text-sm text-gray-800",children:l(r.updated_at)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Hs,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Subject & Description"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(Hn,{size:16,className:"text-blue-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Subject"})]}),e.jsx("p",{className:"text-sm text-gray-800",children:r.subject})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(ar,{size:16,className:"text-green-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Description"})]}),e.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:r.description})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Nt,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-purple-900",children:"Parties Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-purple-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(Nt,{size:16,className:"text-purple-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"User"})]}),e.jsx("p",{className:"text-sm text-gray-800",children:r.user_name})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-purple-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(pp,{size:16,className:"text-purple-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Provider"})]}),e.jsx("p",{className:"text-sm text-gray-800",children:r.provider_name})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-purple-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(Hn,{size:16,className:"text-purple-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Booking ID"})]}),e.jsxs("p",{className:"text-sm text-gray-800",children:["#",r.booking_id]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-lg p-4 border border-emerald-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-emerald-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Ks,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-emerald-900",children:"Status & Priority"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-emerald-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(Ks,{size:16,className:"text-emerald-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Status"})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i(r.status)}`,children:r.status.split("_").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" ")})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-emerald-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(_s,{size:16,className:"text-emerald-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Priority"})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${d(r.priority)}`,children:r.priority.charAt(0).toUpperCase()+r.priority.slice(1)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-emerald-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(Hn,{size:16,className:"text-emerald-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Type"})]}),e.jsx("p",{className:"text-sm text-gray-800",children:r.dispute_type})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-emerald-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(Nt,{size:16,className:"text-emerald-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Assigned To"})]}),e.jsx("p",{className:"text-sm text-gray-800",children:r.assigned_admin||"Unassigned"})]})]})]}),r.resolution_type&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg p-4 border border-amber-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx(dr,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-amber-900",children:"Resolution Details"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-amber-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-amber-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(Hn,{size:16,className:"text-amber-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Resolution Type"})]}),e.jsx("p",{className:"text-sm text-gray-800 capitalize",children:r.resolution_type.replace("_"," ")})]}),r.resolution_amount&&e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-amber-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-amber-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(dr,{size:16,className:"text-amber-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Resolution Amount"})]}),e.jsxs("p",{className:"text-sm text-gray-800",children:["$",r.resolution_amount.toFixed(2)]})]}),r.resolution_notes&&e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-amber-100 md:col-span-2",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-amber-100 rounded-full flex items-center justify-center mr-2",children:e.jsx(ar,{size:16,className:"text-amber-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Resolution Notes"})]}),e.jsx("p",{className:"text-sm text-gray-800",children:r.resolution_notes})]})]})]})]}),Wy={},rn=Wy?.VITE_API_BASE_URL||"/api",Jy=()=>{const{addToast:r}=_t(),[l,i]=m.useState([]),[d,u]=m.useState(!0),[p,x]=m.useState(""),[g,h]=m.useState(1),[v,j]=m.useState(null),[y,_]=m.useState(!1),[N,B]=m.useState(null),[P,b]=m.useState({status:"",notes:"",resolution_type:"",resolution_amount:0,resolution_notes:""}),[k,T]=m.useState(!1),[U,O]=m.useState(1),[A,me]=m.useState(!1),[se,re]=m.useState({id:!0,subject:!0,parties:!0,type:!0,priority:!0,status:!0,assigned:!0,created:!0,actions:!0}),[H,K]=m.useState([]),[I,X]=m.useState(""),[z,E]=m.useState(!1),[Z,ne]=m.useState(""),[ae,F]=m.useState(!1),[ee,le]=m.useState(!1),M=m.useRef(null),[Y,je]=m.useState({status:"",priority:"",dispute_type:"",assigned_admin:"",overdue:!1,sort_by:"created_at",sort_order:"desc"}),we=10,W=m.useCallback((te=!1)=>{const Pe=localStorage.getItem("KwikMedi_token"),ke={};return Pe&&(ke.Authorization=`Bearer ${Pe}`),te&&(ke["Content-Type"]="application/json"),ke},[]),ce=m.useCallback(async(te,Pe=!1)=>{if(te){Pe||E(!0),ne("");try{const ke=await fetch(`${rn}/api/api/admin/disputes/${te}/messages`,{headers:W()}),be=await ke.json();if(!ke.ok||!be.success){ne(be.message||"Unable to load this conversation.");return}K(be.messages||[]),F(!!be.ticket?.is_blocked),be.ticket&&B(Le=>Le&&Le.id===te?{...Le,...be.ticket}:Le)}catch{ne("Unable to load this conversation. Please retry.")}finally{Pe||E(!1)}}},[W]),ue=()=>[{id:1,subject:"Service quality not as described",description:"The pet trainer arrived late and did not provide the full service as promised. The training session was cut short and the dog did not learn the basic commands as expected.",status:"open",priority:"high",dispute_type:"service_quality",created_at:"2024-01-15T10:30:00Z",updated_at:"2024-01-15T10:30:00Z",assigned_admin:null,user_name:"Sarah Johnson",provider_name:"John Smith",booking_id:"101",is_overdue:!1,amount_disputed:2e3,booking:{total_amount:2e3}},{id:2,subject:"Provider did not show up",description:"The service provider did not arrive at the scheduled time. Multiple attempts to contact them were unsuccessful. The booking was for puppy training session.",status:"in_progress",priority:"urgent",dispute_type:"no_show",created_at:"2024-01-16T14:20:00Z",updated_at:"2024-01-16T15:00:00Z",assigned_admin:"Admin User",user_name:"Emily Rodriguez",provider_name:"Sarah Johnson",booking_id:"102",is_overdue:!0,amount_disputed:2500,booking:{total_amount:2500}},{id:3,subject:"Incorrect service provided",description:"Booked for agility training but received basic obedience training instead. The provider did not inform about the change and charged the full amount.",status:"open",priority:"medium",dispute_type:"service_mismatch",created_at:"2024-01-17T09:15:00Z",updated_at:"2024-01-17T09:15:00Z",assigned_admin:null,user_name:"Michael Chen",provider_name:"Mike Williams",booking_id:"103",is_overdue:!1,amount_disputed:3500,booking:{total_amount:3500}},{id:4,subject:"Payment charged twice",description:"The payment for the booking was charged twice. I have receipts for both transactions. Need refund for the duplicate charge.",status:"resolved",priority:"high",dispute_type:"payment_issue",created_at:"2024-01-10T11:00:00Z",updated_at:"2024-01-18T12:00:00Z",assigned_admin:"Admin User",user_name:"David Wilson",provider_name:"Lisa Anderson",booking_id:"104",is_overdue:!1,amount_disputed:1800,resolution_type:"refund",resolution_amount:1800,resolution_notes:"Duplicate payment confirmed. Full refund processed.",booking:{total_amount:1800}},{id:5,subject:"Provider behavior concerns",description:"The provider was unprofessional during the service. Used inappropriate language and was rough with my pet. I want to cancel future bookings and get a refund.",status:"escalated",priority:"urgent",dispute_type:"provider_conduct",created_at:"2024-01-12T16:00:00Z",updated_at:"2024-01-19T10:00:00Z",assigned_admin:"Senior Admin",user_name:"Jennifer Martinez",provider_name:"John Smith",booking_id:"105",is_overdue:!1,amount_disputed:3e3,booking:{total_amount:3e3}},{id:6,subject:"Service cancelled but no refund",description:"The provider cancelled the service at the last minute due to personal reasons. I was promised a refund but it has not been processed yet.",status:"in_progress",priority:"medium",dispute_type:"cancellation_refund",created_at:"2024-01-13T13:00:00Z",updated_at:"2024-01-20T13:30:00Z",assigned_admin:"Admin User",user_name:"Robert Taylor",provider_name:"Sarah Johnson",booking_id:"106",is_overdue:!1,amount_disputed:2200,booking:{total_amount:2200}},{id:7,subject:"Equipment damage claim",description:"The provider claims that my pet damaged their training equipment during the session. However, the equipment was already damaged when they arrived. I have photos as evidence.",status:"open",priority:"low",dispute_type:"damage_claim",created_at:"2024-01-14T10:00:00Z",updated_at:"2024-01-14T10:00:00Z",assigned_admin:null,user_name:"Amanda White",provider_name:"Mike Williams",booking_id:"107",is_overdue:!1,amount_disputed:4e3,booking:{total_amount:4e3}},{id:8,subject:"Incomplete service delivery",description:"The training session was supposed to be 2 hours but only lasted 1 hour. The provider left early without completing all the planned activities.",status:"resolved",priority:"medium",dispute_type:"incomplete_service",created_at:"2024-01-11T14:00:00Z",updated_at:"2024-01-19T15:00:00Z",assigned_admin:"Admin User",user_name:"Christopher Lee",provider_name:"Mike Williams",booking_id:"108",is_overdue:!1,amount_disputed:3200,resolution_type:"partial_refund",resolution_amount:1600,resolution_notes:"Service was incomplete. Partial refund of 50% processed as compensation.",booking:{total_amount:3200}},{id:9,subject:"Booking time mismatch",description:"I booked for morning 9 AM slot but the provider came at 11 AM. This caused inconvenience as I had to reschedule my other appointments.",status:"open",priority:"low",dispute_type:"scheduling_issue",created_at:"2024-01-15T15:30:00Z",updated_at:"2024-01-15T15:30:00Z",assigned_admin:null,user_name:"James Brown",provider_name:"Lisa Anderson",booking_id:"108",is_overdue:!1,amount_disputed:1500,booking:{total_amount:1500}},{id:10,subject:"Refund processing delay",description:"I cancelled my booking 5 days ago and was told I would receive a refund within 3 business days. The refund has not been processed yet.",status:"in_progress",priority:"high",dispute_type:"refund_delay",created_at:"2024-01-16T09:00:00Z",updated_at:"2024-01-20T09:15:00Z",assigned_admin:"Admin User",user_name:"Patricia Davis",provider_name:"John Smith",booking_id:"109",is_overdue:!0,amount_disputed:2800,booking:{total_amount:2800}}];m.useEffect(()=>{he()},[g,Y,p]),m.useEffect(()=>{console.log("Selected dispute changed:",N)},[N]),m.useEffect(()=>{if(!y||P.status!=="view"||!N)return;ce(N.id,!1);const te=setInterval(()=>{ce(N.id,!0)},8e3);return()=>clearInterval(te)},[y,P.status,N?.id,ce]),m.useEffect(()=>{M.current&&M.current.scrollIntoView({behavior:"smooth"})},[H.length,y]),m.useEffect(()=>{y||(K([]),X(""),ne(""),F(!1),E(!1))},[y]);const he=async()=>{const te=localStorage.getItem("KwikMedi_token"),Pe=te&&te.startsWith("mock_token_");if(!te||Pe){u(!0),setTimeout(()=>{const ke=ue();let be=ke;p&&(be=ke.filter(C=>C.id.toString().includes(p)||C.subject.toLowerCase().includes(p.toLowerCase())||C.user_name.toLowerCase().includes(p.toLowerCase())||C.provider_name.toLowerCase().includes(p.toLowerCase())||C.booking_id.includes(p)||C.dispute_type.toLowerCase().includes(p.toLowerCase()))),Y.status&&(be=be.filter(C=>C.status===Y.status)),Y.priority&&(be=be.filter(C=>C.priority===Y.priority)),Y.dispute_type&&(be=be.filter(C=>C.dispute_type===Y.dispute_type)),Y.assigned_admin&&(be=be.filter(C=>C.assigned_admin?.toLowerCase().includes(Y.assigned_admin.toLowerCase()))),Y.overdue&&(be=be.filter(C=>C.is_overdue===!0));const Le=(g-1)*we,at=be.slice(Le,Le+we),mt=Math.ceil(be.length/we);i(at),O(mt),u(!1)},500);return}try{u(!0);const ke=new URLSearchParams;ke.append("page",g.toString()),ke.append("limit",we.toString()),ke.append("search",p),Object.entries(Y).forEach(([at,mt])=>{mt&&ke.append(at,mt.toString())});const Le=await(await fetch(`${rn}/api/admin/disputes?${ke.toString()}`,{headers:W()})).json();Le.success&&Array.isArray(Le.disputes)?(i(Le.disputes),O(Le.pagination?.total_pages||1)):(console.error("Failed to fetch tickets:",Le.message||"Unknown error"),r(Le.message||"Failed to load support tickets","error"),i([]),O(1))}catch(ke){console.error("Error fetching tickets:",ke),r("Unable to connect to server. Please check your connection.","error"),i([]),O(1)}finally{u(!1)}},Ae=async()=>{if(!N||!I.trim()||ee)return;le(!0),ne("");const te=localStorage.getItem("KwikMedi_user");let Pe;if(te)try{Pe=JSON.parse(te)?.id}catch{Pe=void 0}try{const ke=await fetch(`${rn}/api/api/admin/disputes/${N.id}/messages`,{method:"POST",headers:W(!0),body:JSON.stringify({message:I.trim(),admin_id:Pe})}),be=await ke.json();if(!ke.ok||!be.success){ne(be.message||"Unable to send message.");return}X(""),be.message?K(Le=>[...Le,be.message]):ce(N.id,!0),be.ticket&&(B(Le=>Le&&Le.id===be.ticket.id?{...Le,...be.ticket}:Le),F(!!be.ticket.is_blocked))}catch{ne("Unable to send message. Please retry.")}finally{le(!1)}},w=async()=>{if(!N)return;const te=!ae;let Pe=N.blocked_reason||"Blocked by admin";if(te){const Le=window.prompt("Why are you blocking this user?",Pe);Le!==null&&(Pe=Le||Pe)}else Pe=void 0;E(!0),ne("");const ke=localStorage.getItem("KwikMedi_user");let be;if(ke)try{be=JSON.parse(ke)?.id}catch{be=void 0}try{const Le=await fetch(`${rn}/api/api/admin/disputes/${N.id}/block`,{method:"POST",headers:W(!0),body:JSON.stringify({is_blocked:te,reason:Pe,admin_id:be})}),at=await Le.json();if(!Le.ok||!at.success){ne(at.message||"Unable to update block status.");return}F(te),at.ticket&&B(mt=>mt&&mt.id===at.ticket.id?{...mt,...at.ticket}:mt)}catch{ne("Unable to update block status. Please retry.")}finally{E(!1)}},$=(te,Pe)=>{console.log("Opening modal for dispute:",te),B(te),b({status:Pe,notes:"",resolution_type:"",resolution_amount:0,resolution_notes:""}),K([]),X(""),ne(""),F(!!te.is_blocked),_(!0),ce(te.id)},G=async te=>{if(te.preventDefault(),!!N){T(!0);try{let Pe;P.status==="resolve"?Pe=`${rn}/api/admin/disputes/${N.id}/resolve`:P.status==="escalate"?Pe=`${rn}/api/admin/disputes/${N.id}/escalate`:Pe=`${rn}/api/admin/disputes/${N.id}/status`;let ke;P.status==="escalate"?ke={reason:P.notes,escalate_to_admin:1}:ke=P;const Le=await(await fetch(Pe,{method:"POST",headers:W(!0),body:JSON.stringify(ke)})).json();Le.success?(r(`Dispute ${P.status}ed successfully`,"success"),_(!1),he()):r(Le.message||`Failed to ${P.status} dispute`,"error")}catch(Pe){console.error("Error processing dispute:",Pe),r("Error processing dispute","error")}finally{T(!1)}}},ge=te=>new Date(te).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),ve=te=>{try{return new Date(te).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}catch{return""}},Se=te=>{switch(te){case"resolved":return"bg-green-100 text-green-700";case"closed":return"bg-gray-100 text-gray-700";case"pending":return"bg-yellow-100 text-yellow-700";case"in_progress":return"bg-blue-100 text-blue-700";case"escalated":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},Re=te=>{switch(te){case"urgent":return"bg-red-100 text-red-700";case"high":return"bg-orange-100 text-orange-700";case"medium":return"bg-yellow-100 text-yellow-700";case"low":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},xe=te=>{["id","subject","status","actions"].includes(te)||re(Pe=>({...Pe,[te]:!Pe[te]}))},Qe=()=>{re({id:!0,subject:!0,parties:!0,type:!0,priority:!0,status:!0,assigned:!0,created:!0,actions:!0})},ze=te=>{j(v===te?null:te)};return e.jsxs("div",{children:[d?e.jsx(Wn,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-end space-x-3 mb-4",children:[e.jsx(Ky,{showColumnSettings:A,onToggleSettings:()=>me(!A),columnVisibility:se,onToggleColumn:xe,onResetColumns:Qe}),e.jsx(Ip,{searchTerm:p,onSearchChange:x}),e.jsxs(ie,{onClick:he,className:"flex items-center space-x-1",children:[e.jsx(ws,{size:14}),e.jsx("span",{children:"Refresh"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50",children:[e.jsx("th",{className:"w-12 px-4 py-3"}),se.id&&e.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-32",children:"ID"}),se.subject&&e.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 min-w-[250px]",children:"Subject"}),se.parties&&e.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 min-w-[180px]",children:"Parties"}),se.type&&e.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-36",children:"Type"}),se.priority&&e.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-28",children:"Priority"}),se.status&&e.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-32",children:"Status"}),se.assigned&&e.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-36",children:"Assigned To"}),se.created&&e.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-44",children:"Created"}),se.actions&&e.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 min-w-[280px]",children:"Actions"})]})}),e.jsx("tbody",{children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:Object.values(se).filter(Boolean).length+1,className:"py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(Mr,{className:"w-8 h-8 animate-spin text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Loading support tickets..."})]})})}):l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:Object.values(se).filter(Boolean).length+1,className:"py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(ar,{className:"w-12 h-12 text-gray-300 mb-3"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"No support tickets found"}),e.jsx("p",{className:"text-xs text-gray-500",children:"When users contact support, their tickets will appear here."})]})})}):l.map(te=>e.jsxs(xs.Fragment,{children:[e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors duration-150",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>ze(te.id),className:"p-1 hover:bg-gray-200",children:v===te.id?e.jsx(Zn,{size:16,className:"text-gray-600"}):e.jsx(Rr,{size:16,className:"text-gray-600"})})}),se.id&&e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{className:"font-semibold text-gray-900 text-sm",children:["Ticket #",te.id]}),te.is_overdue&&e.jsxs("div",{className:"text-xs text-red-600 flex items-center mt-1.5 font-medium",children:[e.jsx(as,{size:12,className:"mr-1"}),"Overdue"]}),te.last_message_at&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Last: ",ge(te.last_message_at)]})]}),se.subject&&e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:te.subject}),te.last_message_preview&&e.jsx("div",{className:"text-xs text-gray-600 line-clamp-1 max-w-sm",children:te.last_message_preview}),te.is_blocked&&e.jsx("div",{className:"text-xs text-red-600 font-semibold mt-1.5 flex items-center",children:" User blocked"}),te.booking_id&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Booking: #",te.booking_id]})]}),se.parties&&e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{className:"text-sm text-gray-900 mb-1",children:[e.jsx("span",{className:"font-medium",children:"User:"})," ",te.user_name]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Provider:"})," ",te.provider_name]})]}),se.type&&e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 whitespace-nowrap",children:te.dispute_type})}),se.priority&&e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold whitespace-nowrap ${Re(te.priority)}`,children:te.priority.charAt(0).toUpperCase()+te.priority.slice(1)})}),se.status&&e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold whitespace-nowrap ${Se(te.status)}`,children:te.status.split("_").map(Pe=>Pe.charAt(0).toUpperCase()+Pe.slice(1)).join(" ")})}),se.assigned&&e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"text-sm text-gray-700",children:te.assigned_admin||e.jsx("span",{className:"text-gray-400 italic",children:"Unassigned"})})}),se.created&&e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"text-sm text-gray-700 whitespace-nowrap",children:ge(te.created_at)})}),se.actions&&e.jsx("td",{className:"px-4 py-4",children:e.jsxs(ie,{onClick:()=>$(te,"view"),size:"sm",className:"flex items-center gap-2 bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-lg shadow-sm",children:[e.jsx(ar,{size:16}),e.jsx("span",{children:"Chat"})]})})]}),v===te.id&&e.jsx("tr",{children:e.jsx("td",{colSpan:Object.values(se).filter(Boolean).length+1,className:"bg-gradient-to-r from-gray-50 to-blue-50/30 border-l-4 border-primary/20",children:e.jsx("div",{className:"p-6",children:e.jsx(qy,{dispute:te,formatDate:ge,getStatusColor:Se,getPriorityColor:Re})})})})]},te.id))})]})}),U>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Page ",g," of ",U]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{onClick:()=>h(te=>Math.max(te-1,1)),disabled:g===1,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(on,{size:16})}),e.jsx(ie,{onClick:()=>h(te=>Math.min(te+1,U)),disabled:g===U,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Js,{size:16})})]})]})]}),y&&N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[P.status==="resolve"?"Resolve":P.status==="escalate"?"Escalate":P.status==="in_progress"?"Start Processing":"View"," Dispute"]}),e.jsx("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ut,{size:20})})]}),P.status==="view"&&N?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Ticket ID"}),e.jsxs("p",{className:"text-sm text-gray-900",children:["#",N.id]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Subject"}),e.jsx("p",{className:"text-sm text-gray-900",children:N.subject})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Booking / Order"}),e.jsxs("p",{className:"text-sm text-gray-900",children:["#",N.booking_id||N.order_id||""]})]}),N.last_message_preview&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Last Message Preview"}),e.jsx("p",{className:"text-sm text-gray-900",children:N.last_message_preview})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"User"}),e.jsx("p",{className:"text-sm text-gray-900",children:N.user_name})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Provider"}),e.jsx("p",{className:"text-sm text-gray-900",children:N.provider_name})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Type"}),e.jsx("p",{className:"text-sm text-gray-900",children:N.dispute_type})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Priority"}),e.jsx("p",{className:"text-sm text-gray-900 capitalize",children:N.priority})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Status"}),e.jsx("p",{className:"text-sm text-gray-900 capitalize",children:N.status?N.status.replace("_"," "):""})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:N.description})]})]}),e.jsxs("div",{className:"flex flex-col bg-gray-50 rounded-xl p-4 h-[600px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[e.jsx(ar,{size:18}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-semibold text-sm",children:["Support Thread with ",N.user_name]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Ticket #",N.id]})]})]}),N.last_message_at&&e.jsxs("span",{className:"text-xs text-gray-500",children:["Last: ",ge(N.last_message_at)]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2 mb-3 min-h-0",children:[z?e.jsxs("div",{className:"flex items-center justify-center h-full text-sm text-gray-500",children:[e.jsx(Mr,{className:"w-4 h-4 animate-spin mr-2"}),"Loading conversation"]}):H.length?e.jsx("div",{className:"space-y-3",children:H.map(te=>{const Pe=te.sender_role==="admin";return e.jsx("div",{className:`flex ${Pe?"justify-start":"justify-end"}`,children:e.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-3 text-sm shadow-sm ${Pe?"bg-white text-gray-800 border border-gray-200 rounded-tl-sm":"bg-orange-500 text-white rounded-tr-sm"}`,children:[e.jsx("p",{className:"whitespace-pre-wrap break-words",children:te.message}),e.jsxs("span",{className:`text-[11px] block mt-1.5 ${Pe?"text-gray-500":"text-orange-100"}`,children:[Pe?"You":N.user_name,"  ",ve(te.created_at)]})]})},te.id)})}):e.jsxs("div",{className:"text-sm text-gray-500 text-center py-10",children:[e.jsx(ar,{size:24,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No messages in this thread yet."}),e.jsx("p",{className:"text-xs mt-1",children:"Start the conversation below."})]}),e.jsx("div",{ref:M})]}),Z&&e.jsx("p",{className:"text-sm text-red-600 mb-2 flex-shrink-0",children:Z}),e.jsxs("div",{className:"flex-shrink-0 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:ae?"User is blocked from replying":"Type a reply",value:I,onChange:te=>X(te.target.value),onKeyDown:te=>{te.key==="Enter"&&!te.shiftKey&&(te.preventDefault(),Ae())},disabled:ee||ae}),e.jsxs(ie,{type:"button",onClick:Ae,disabled:!I.trim()||ee||ae,className:"bg-cyan-500 hover:bg-cyan-600 text-white flex items-center space-x-1 px-4",children:[ee?e.jsx(Mr,{className:"w-4 h-4 animate-spin"}):e.jsx(Rg,{size:14}),e.jsx("span",{children:"Send"})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs(ie,{type:"button",onClick:w,className:`flex items-center space-x-2 ${ae?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"} text-white`,children:[e.jsx(jg,{size:14}),e.jsx("span",{children:ae?"Unblock user":"Block user"})]}),ae&&N.blocked_reason&&e.jsx("p",{className:"text-xs text-gray-500 max-w-md truncate",children:N.blocked_reason})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t mt-4",children:e.jsx(ie,{type:"button",onClick:()=>_(!1),className:"bg-gray-200 text-gray-700 hover:bg-gray-300 px-6",children:"Close"})})]}):e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),e.jsx("div",{className:"text-sm text-gray-900",children:N?.subject})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Booking ID"}),e.jsxs("div",{className:"text-sm text-gray-900",children:["#",N?.booking_id]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User"}),e.jsx("div",{className:"text-sm text-gray-900",children:N?.user_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provider"}),e.jsx("div",{className:"text-sm text-gray-900",children:N?.provider_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsx("div",{className:"text-sm text-gray-900",children:N?.dispute_type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsx("div",{className:"text-sm text-gray-900 capitalize",children:N?.priority})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("div",{className:"text-sm text-gray-900 capitalize",children:N?.status?N.status.replace("_"," "):""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assigned To"}),e.jsx("div",{className:"text-sm text-gray-900",children:N?.assigned_admin||"Unassigned"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("div",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:N?.description})]}),P.status==="resolve"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Resolution Type *"}),e.jsxs("select",{required:!0,value:P.resolution_type,onChange:te=>{const Pe=te.target.value,ke={...P,resolution_type:Pe},be=N?.booking?.total_amount||N?.amount_disputed;Pe==="refund"&&be?ke.resolution_amount=be:Pe==="partial_refund"&&be?ke.resolution_amount=be/2:Pe?.includes("refund")||(ke.resolution_amount=0),b(ke)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"",children:"Select resolution type"}),e.jsx("option",{value:"refund",children:"Refund"}),e.jsx("option",{value:"partial_refund",children:"Partial Refund"}),e.jsx("option",{value:"reschedule",children:"Reschedule"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"account_action",children:"Account Action"}),e.jsx("option",{value:"no_action",children:"No Action"}),e.jsx("option",{value:"compensation",children:"Compensation"}),e.jsx("option",{value:"apology",children:"Apology"})]})]}),P.resolution_type?.includes("refund")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Resolution Amount *"}),(N?.booking?.total_amount||N?.amount_disputed)&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Total booking amount: ",(N?.booking?.total_amount||N?.amount_disputed)?.toFixed(2)]}),e.jsx("input",{type:"number",required:!0,value:P.resolution_amount,onChange:te=>b({...P,resolution_amount:parseFloat(te.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Enter amount",max:N?.booking?.total_amount||N?.amount_disputed||void 0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes *"}),e.jsx("textarea",{required:!0,value:P.notes,onChange:te=>b({...P,notes:te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",rows:3,placeholder:`Enter notes for ${P.status}...`})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(ie,{type:"button",onClick:()=>_(!1),className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx(ie,{type:"submit",disabled:k,className:`${P.status==="resolve"?"bg-green-600 hover:bg-green-700":P.status==="escalate"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"} text-white`,children:k?"Processing...":P.status==="resolve"?"Resolve":P.status==="escalate"?"Escalate":P.status==="in_progress"?"Start Processing":"Submit"})]})]})]})})]})},Gy=()=>e.jsxs(Lt,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Support Tickets & Threads"}),e.jsx("p",{className:"text-gray-600",children:"Manage support conversations and resolve user issues through ticket threads."})]}),e.jsxs(Be,{children:[e.jsx(Ze,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:e.jsx(Ye,{children:"All Support Tickets"})}),e.jsx(He,{children:e.jsx(Jy,{})})]})]}),Qy={},Zy=Qy?.VITE_API_BASE_URL||"/api",sl=r=>{if(!r)return"N/A";try{const[l,i]=r.split(":"),d=parseInt(l,10),u=parseInt(i,10),p=d===0?12:d>12?d-12:d,x=d>=12?"PM":"AM",g=u.toString().padStart(2,"0");return`${p}:${g} ${x}`}catch{return r}},Yy=()=>{const{addToast:r}=_t(),[l,i]=m.useState([]),[d,u]=m.useState(!0),[p,x]=m.useState(1),[g,h]=m.useState(null),[v,j]=m.useState(!1),[y,_]=m.useState(null),[N,B]=m.useState({status:"",notes:""}),[P,b]=m.useState(!1),[k,T]=m.useState(1),[U,O]=m.useState({}),[A,me]=m.useState({}),[se,re]=m.useState(!1),[H,K]=m.useState(null),[I,X]=m.useState({id:!0,date:!0,service:!0,parties:!0,location:!0,amount:!0,status:!0,payment:!0,priority:!0,assigned:!0,actions:!0}),[z,E]=m.useState({status:"",payment_status:"",priority:"",date_from:"",date_to:"",city:"",assigned_provider:"",overdue:!1,sort_by:"created_at",sort_order:"desc"}),[Z,ne]=m.useState(!1),[ae,F]=m.useState(!1),[ee,le]=m.useState(null),[M,Y]=m.useState([]),[je,we]=m.useState(!1),[W,ce]=m.useState(null),[ue,he]=m.useState(!1),Ae=10,w=Zy;m.useEffect(()=>{xe()},[p,z]);const $=C=>{const Me=[C.total_amount,C.payment_amount,C.service_price_discounted,C.service_price_original,C.amount,C.price,C.subcategory?.price,C.subcategory?.amount,C.service?.price_discounted,C.service?.price_original,C.service?.price];for(const qe of Me)if(!(qe==null||qe===""||qe==="0"||qe===0)){if(typeof qe=="number"){if(Number.isFinite(qe))return qe}else if(typeof qe=="string"){const it=parseFloat(qe.replace(/[,\s]/g,""));if(!isNaN(it))return it}}return 0},G=C=>C.assigned_provider_name||C.assigned_provider||C.provider?.full_name||C.provider?.name||(C.provider_id?`Provider #${C.provider_id}`:null),ge=C=>C.service_title||C.service?.service_name||C.service?.title||C.service_name||C.subcategory?.service_name||C.subcategory?.name||C.category?.name||"Unknown Service",ve=async C=>{const Me=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if(Me){me(qe=>({...qe,[C]:!0}));try{const qe=await fetch(`${w}/admin/booking/session-history/${C}`,{headers:{Authorization:`Bearer ${Me}`,"Content-Type":"application/json"}});if(qe.ok){const it=await qe.json();O(ft=>({...ft,[C]:it.sessions||[]}))}}catch(qe){console.error("Failed to load session history:",qe),r("Failed to load session history","error")}finally{me(qe=>({...qe,[C]:!1}))}}},Se=async C=>{const Me=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if(Me)try{if((await fetch(`${w}/admin/booking/approve-completion/${C}`,{method:"POST",headers:{Authorization:`Bearer ${Me}`,"Content-Type":"application/json"},body:JSON.stringify({admin_username:"Admin"})})).ok)r("Booking completion approved","success"),await xe();else throw new Error("Failed to approve")}catch{r("Failed to approve completion","error")}},Re=async(C,Me)=>{const qe=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if(qe)try{if((await fetch(`${w}/admin/booking/reject-completion/${C}`,{method:"POST",headers:{Authorization:`Bearer ${qe}`,"Content-Type":"application/json"},body:JSON.stringify({rejection_reason:Me,admin_username:"Admin"})})).ok)r("Booking completion rejected","success"),await xe();else throw new Error("Failed to reject")}catch{r("Failed to reject completion","error")}},xe=async()=>{const C=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if(!C){r("Please login to view bookings","error"),u(!1);return}try{u(!0);const Me=new URLSearchParams;Me.append("page",p.toString()),Me.append("limit",Ae.toString()),Object.entries(z).forEach(([Bt,Ve])=>{Ve&&Me.append(Bt,Ve.toString())});const qe=await fetch(`${w}/admin/appointments?${Me.toString()}`,{headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"}});if(!qe.ok){if(qe.status===401){r("Authentication failed. Please log in again.","error");return}throw new Error(`HTTP error! status: ${qe.status}`)}const it=await qe.json(),ft=it.data||it.bookings||[];if(Array.isArray(ft)){const Bt=ft.map(Ve=>({id:Ve.id,booking_date:Ve.preferred_date||Ve.booking_date,booking_time:Ve.preferred_time||Ve.booking_time,status:Ve.status,payment_status:Ve.payment_status||"pending",priority:Ve.priority||"normal",total_amount:$(Ve),service_address:Ve.service_address||Ve.address||"N/A",pincode:Ve.pincode||"N/A",city:Ve.city||"N/A",contact_person:Ve.contact_person||Ve.user?.name||"N/A",contact_phone:Ve.contact_phone||Ve.user?.phone||"N/A",created_at:Ve.created_at||"",updated_at:Ve.updated_at||"",assigned_provider:G(Ve),user_name:Ve.user?.name||`User #${Ve.user_id||"N/A"}`,provider_name:Ve.provider?.name||`Provider #${Ve.provider_id||"N/A"}`,service_name:ge(Ve),service_description:Ve.service?.description||Ve.subcategory?.description||Ve.description||"",category_id:Ve.category_id||Ve.service?.category_id||Ve.subcategory?.category_id,subcategory_id:Ve.subcategory_id||Ve.service?.subcategory_id,is_overdue:Ve.is_overdue||!1,admin_notes:Ve.admin_notes,cancellation_reason:Ve.cancellation_reason,refund_amount:Ve.refund_amount,user_id:Ve.user_id,provider_id:Ve.provider_id,slot_type:Ve.slot_type,total_sessions:Ve.total_sessions,completed_sessions:Ve.completed_sessions,admin_approval_status:Ve.admin_approval_status,admin_rejection_reason:Ve.admin_rejection_reason}));if(i(Bt),it.pagination){const Ve=it.pagination.total||Bt.length,mr=it.pagination.page_size||Ae;T(Math.ceil(Ve/mr))}else T(1)}else console.error("Failed to fetch bookings: Invalid response format"),r("Failed to fetch bookings: Invalid response format","error"),i([]),T(1)}catch(Me){console.error("Error fetching bookings:",Me);const qe=Me instanceof Error?Me.message:"Failed to fetch bookings";r(qe,"error"),i([]),T(1)}finally{u(!1)}},Qe=(C,Me)=>{h(g===C.id?null:C.id)},ze=async C=>{if(C.preventDefault(),!!y){b(!0);try{let Me="",qe={};switch(N.status){case"confirm":Me=`${w}/admin/bookings/${y.id}/status`,qe={status:"confirmed",notes:N.notes,reason:"Admin confirmed booking"};break;case"cancel":Me=`${w}/admin/bookings/${y.id}/cancel`,qe={reason:N.reason||"Cancelled by admin",refund_amount:N.refund_amount||0,notes:N.notes};break;case"assign":Me=`${w}/admin/bookings/${y.id}/assign`,qe={provider_id:N.provider_id,notes:N.notes};break;case"start":Me=`${w}/admin/bookings/${y.id}/status`,qe={status:"in_progress",notes:N.notes,reason:"Admin started the service"};break;case"complete":Me=`${w}/admin/bookings/${y.id}/status`,qe={status:"completed",notes:N.notes,reason:"Admin marked as completed"};break;default:throw new Error(`Unknown action: ${N.status}`)}const ft=await(await fetch(Me,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("KwikMedi_token")}`,"Content-Type":"application/json"},body:JSON.stringify(qe)})).json();if(ft.success){const Bt=ft.message||`Booking ${N.status}ed successfully`;r(Bt,"success"),j(!1),xe()}else r(ft.message||`Failed to ${N.status} booking`,"error")}catch(Me){console.error("Error processing booking:",Me),r("Error processing booking","error")}finally{b(!1)}}},te=C=>{switch(C){case"completed":return"bg-green-100 text-green-700";case"pending":return"bg-yellow-100 text-yellow-700";case"confirmed":case"accepted":return"bg-blue-100 text-blue-700";case"in_progress":return"bg-purple-100 text-purple-700";case"cancelled":return"bg-red-100 text-red-700";case"awaiting_payment":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},Pe=C=>{switch(C){case"paid":return"bg-green-100 text-green-700";case"refunded":return"bg-blue-100 text-blue-700";case"pending":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}},ke=C=>{switch(C){case"urgent":return"bg-red-100 text-red-700";case"high":return"bg-orange-100 text-orange-700";case"normal":return"bg-blue-100 text-blue-700";case"low":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},be=C=>{["id","date","status","actions"].includes(C)||X(Me=>({...Me,[C]:!Me[C]}))},Le=()=>{X({id:!0,date:!0,service:!0,parties:!0,location:!0,amount:!0,status:!0,payment:!0,priority:!0,assigned:!0,actions:!0})},at=async C=>{le(C),F(!0),we(!0),Y([]),ce(null);try{const Me=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if(!Me){r("Please login to assign provider","error");return}const qe=await fetch(`${w}/admin/bookings/${C.id}/available-providers`,{headers:{Authorization:`Bearer ${Me}`,"Content-Type":"application/json"}});if(!qe.ok)throw new Error(`Failed to fetch providers: ${qe.status}`);const it=await qe.json();Y(it.providers||[])}catch(Me){console.error("Error fetching available providers:",Me),r("Failed to fetch available providers","error")}finally{we(!1)}},mt=async()=>{if(!ee||!W){r("Please select a provider","error");return}he(!0);try{const C=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if(!C){r("Please login to assign provider","error");return}const Me=await fetch(`${w}/admin/bookings/${ee.id}/assign-provider`,{method:"PUT",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"},body:JSON.stringify({provider_id:W,admin_name:"Admin"})}),qe=await Me.json();if(Me.ok)r("Provider assigned successfully","success"),F(!1),le(null),ce(null),xe();else throw new Error(qe.message||qe.error?.message||"Failed to assign provider")}catch(C){console.error("Error assigning provider:",C);const Me=C instanceof Error?C.message:"Failed to assign provider";r(Me,"error")}finally{he(!1)}};return e.jsxs("div",{children:[d?e.jsx(Wn,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-end mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(ie,{onClick:()=>ne(!Z),variant:"outline",className:"flex items-center space-x-1",children:[e.jsx(fc,{size:14}),e.jsx("span",{children:"Columns"})]}),e.jsxs(ie,{onClick:xe,className:"flex items-center space-x-1",children:[e.jsx(ws,{size:14}),e.jsx("span",{children:"Refresh"})]})]})}),Z&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Column Visibility"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{onClick:Le,variant:"outline",size:"sm",className:"text-xs",children:"Reset All"}),e.jsx(ie,{onClick:()=>ne(!1),variant:"ghost",size:"sm",className:"text-xs",children:e.jsx(ut,{size:14})})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Object.entries(I).map(([C,Me])=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Me,onChange:()=>be(C),disabled:["id","date","status","actions"].includes(C),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 disabled:opacity-50"}),e.jsx("span",{className:`text-sm ${["id","date","status","actions"].includes(C)?"text-gray-500":"text-gray-700"}`,children:C.charAt(0).toUpperCase()+C.slice(1).replace("_"," ")})]},C))})]}),e.jsx("div",{className:"overflow-x-auto bg-white rounded-lg border border-gray-200 shadow-sm",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"w-10 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}),I.id&&e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),I.date&&e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),I.service&&e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),I.parties&&e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parties"}),I.location&&e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),I.amount&&e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),I.status&&e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),I.payment&&e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),I.priority&&e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),I.assigned&&e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned To"}),I.actions&&e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{children:l.map(C=>e.jsxs(xs.Fragment,{children:[e.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50 transition-colors duration-150",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>Qe(C),className:"p-1 hover:bg-gray-100 rounded",children:g===C.id?e.jsx(Zn,{size:16,className:"text-gray-500"}):e.jsx(Rr,{size:16,className:"text-gray-500"})})}),I.id&&e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:["#",C.id]}),C.is_overdue&&e.jsxs("div",{className:"text-xs text-red-600 flex items-center mt-1",children:[e.jsx(as,{size:12,className:"mr-1"}),"Overdue"]})]}),I.date&&e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:C.booking_date?new Date(C.booking_date).toLocaleDateString():"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:C.booking_time?sl(C.booking_time):"N/A"})]}),I.service&&e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"font-medium text-gray-900",children:C.service_name})}),I.parties&&e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:["User: ",C.user_name]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Provider: ",C.provider_name]})]}),I.location&&e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:C.service_address}),e.jsxs("div",{className:"text-sm text-gray-500",children:[C.city," - ",C.pincode]})]}),I.amount&&e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"font-medium text-gray-900",children:["",C.total_amount.toFixed(2)]})}),I.status&&e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${te(C.status)}`,children:C.status.split("_").map(Me=>Me.charAt(0).toUpperCase()+Me.slice(1)).join(" ")})}),I.payment&&e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Pe(C.payment_status)}`,children:C.payment_status.charAt(0).toUpperCase()+C.payment_status.slice(1)})}),I.priority&&e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ke(C.priority)}`,children:C.priority.charAt(0).toUpperCase()+C.priority.slice(1)})}),I.assigned&&e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"text-sm text-gray-600",children:C.assigned_provider||"Unassigned"})}),I.actions&&e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{onClick:()=>Qe(C),variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-900",children:e.jsx(cn,{size:16})}),C.slot_type&&C.total_sessions&&e.jsx(ie,{onClick:()=>{K(C),re(!0)},variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-900",title:"View Report",children:e.jsx(fc,{size:16})})]})})]}),g===C.id&&e.jsx("tr",{children:e.jsx("td",{colSpan:Object.values(I).filter(Boolean).length+1,className:"bg-gradient-to-r from-gray-50 to-blue-50/30 border-l-4 border-blue-500",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 border-b pb-2",children:"Basic Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Booking ID:"}),e.jsxs("span",{className:"font-medium",children:["#",C.id]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${te(C.status)}`,children:C.status.split("_").map(Me=>Me.charAt(0).toUpperCase()+Me.slice(1)).join(" ")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Payment Status:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Pe(C.payment_status)}`,children:C.payment_status.charAt(0).toUpperCase()+C.payment_status.slice(1)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Priority:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ke(C.priority)}`,children:C.priority.charAt(0).toUpperCase()+C.priority.slice(1)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["",C.total_amount.toFixed(2)]})]}),C.slot_type&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Shift Pattern:"}),e.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 rounded text-xs font-medium",children:[C.slot_type,C.slot_type==="MWF"&&" (Mon, Wed, Fri)",C.slot_type==="TTS"&&" (Tue, Thu, Sat)"]})]}),C.total_sessions&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Sessions:"}),e.jsxs("span",{className:"font-medium",children:[C.completed_sessions||0," / ",C.total_sessions]})]})]})]}),e.jsxs("div",{className:"space-y-4 md:col-span-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 border-b pb-2",children:"Service Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Service:"}),e.jsx("span",{className:"font-medium",children:C.service_name})]}),C.service_description&&e.jsxs("div",{className:"col-span-full",children:[e.jsx("span",{className:"text-gray-600 block mb-2",children:"Description:"}),e.jsx("div",{className:"text-sm text-gray-700 border border-gray-200 rounded p-3 bg-gray-50 service-description-html",style:{lineHeight:"1.6"},dangerouslySetInnerHTML:{__html:C.service_description}})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"User:"}),e.jsx("span",{className:"font-medium",children:C.user_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Provider:"}),e.jsx("span",{className:"font-medium",children:C.provider_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Assigned To:"}),e.jsx("span",{className:"font-medium",children:C.assigned_provider||"Unassigned"})]}),(!C.provider_id||C.status==="awaiting_assignment")&&e.jsx("div",{className:"mt-4",children:e.jsx(ie,{onClick:()=>at(C),className:"bg-blue-600 hover:bg-blue-700 text-white",size:"sm",children:"Assign Provider"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 border-b pb-2",children:"Location & Contact"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block",children:"Address:"}),e.jsx("span",{className:"font-medium",children:C.service_address})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"City:"}),e.jsx("span",{className:"font-medium",children:C.city})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Pincode:"}),e.jsx("span",{className:"font-medium",children:C.pincode})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Contact Person:"}),e.jsx("span",{className:"font-medium",children:C.contact_person})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Contact Phone:"}),e.jsx("span",{className:"font-medium",children:C.contact_phone})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 border-b pb-2",children:"Date & Time"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Booking Date:"}),e.jsx("span",{className:"font-medium",children:C.booking_date?new Date(C.booking_date).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Booking Time:"}),e.jsx("span",{className:"font-medium",children:C.booking_time?sl(C.booking_time):"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Created:"}),e.jsx("span",{className:"font-medium",children:C.created_at?new Date(C.created_at).toLocaleString():"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Last Updated:"}),e.jsx("span",{className:"font-medium",children:C.updated_at?new Date(C.updated_at).toLocaleString():"N/A"})]})]})]}),(C.slot_type||C.total_sessions)&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 border-b pb-2",children:"Session Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[C.slot_type&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Slot Type:"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-medium",children:C.slot_type})]}),C.total_sessions&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Sessions:"}),e.jsxs("span",{className:"font-medium",children:[C.completed_sessions||0," / ",C.total_sessions," completed"]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(ie,{onClick:()=>{K(C),re(!0),U[C.id]||ve(C.id)},variant:"outline",size:"sm",className:"w-full",children:A[C.id]?"Loading...":"View Session History"})})]})]}),C.status==="pending_admin_approval"&&e.jsxs("div",{className:"space-y-4 col-span-full",children:[e.jsx("h4",{className:"text-sm font-semibold text-yellow-900 border-b border-yellow-300 pb-2 bg-yellow-50 p-2 rounded",children:" Pending Admin Approval"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ie,{onClick:()=>Se(C.id),className:"bg-green-600 hover:bg-green-700 text-white",size:"sm",children:"Approve Completion"}),e.jsx(ie,{onClick:()=>{const Me=prompt("Please provide rejection reason:");Me&&Me.trim()&&Re(C.id,Me.trim())},variant:"outline",className:"border-red-300 text-red-700 hover:bg-red-50",size:"sm",children:"Reject Completion"})]}),C.admin_rejection_reason&&e.jsxs("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-700",children:[e.jsx("strong",{children:"Previous Rejection:"})," ",C.admin_rejection_reason]})]}),(C.admin_notes||C.cancellation_reason||C.refund_amount)&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 border-b pb-2",children:"Additional Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[C.admin_notes&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block",children:"Admin Notes:"}),e.jsx("span",{className:"font-medium",children:C.admin_notes})]}),C.cancellation_reason&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block",children:"Cancellation Reason:"}),e.jsx("span",{className:"font-medium text-red-600",children:C.cancellation_reason})]}),C.refund_amount&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Refund Amount:"}),e.jsxs("span",{className:"font-medium text-blue-600",children:["",C.refund_amount.toFixed(2)]})]})]})]})]})})})})]},C.id))})]})}),k>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Page ",p," of ",k]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{onClick:()=>x(C=>Math.max(C-1,1)),disabled:p===1,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(on,{size:16})}),e.jsx(ie,{onClick:()=>x(C=>Math.min(C+1,k)),disabled:p===k,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Js,{size:16})})]})]})]}),v&&y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[N.status==="confirm"?"Confirm":N.status==="cancel"?"Cancel":N.status==="assign"?"Assign Provider":N.status==="start"?"Start Service":N.status==="complete"?"Complete":"View"," Booking"]}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ut,{size:20})})]}),e.jsxs("form",{onSubmit:ze,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Booking Details"}),e.jsxs("div",{className:"text-sm text-gray-900",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Service:"})," ",y.service_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(y.booking_date).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Time:"})," ",sl(y.booking_time)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Amount:"})," ",y.total_amount.toFixed(2)]})]})]}),N.status==="confirm"&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Vn,{className:"h-5 w-5 text-blue-400"})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Provider Assignment:"})," This booking already has a provider assigned. Confirmation will approve the booking for service."]})})]})}),N.status==="assign"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provider ID *"}),e.jsx("input",{type:"number",required:!0,value:N.provider_id,onChange:C=>B({...N,provider_id:parseInt(C.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Enter provider ID"})]}),N.status==="cancel"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),e.jsx("input",{type:"text",required:!0,value:N.reason,onChange:C=>B({...N,reason:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Enter cancellation reason"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Refund Amount"}),e.jsx("input",{type:"number",value:N.refund_amount,onChange:C=>B({...N,refund_amount:parseFloat(C.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Enter refund amount"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes *"}),e.jsx("textarea",{required:!0,value:N.notes,onChange:C=>B({...N,notes:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",rows:3,placeholder:`Enter notes for ${N.status}...`})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(ie,{type:"button",onClick:()=>j(!1),className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx(ie,{type:"submit",disabled:P,className:`${N.status==="confirm"?"bg-blue-600 hover:bg-blue-700":N.status==="cancel"?"bg-red-600 hover:bg-red-700":N.status==="assign"?"bg-green-600 hover:bg-green-700":(N.status==="start","bg-blue-600 hover:bg-blue-700")} text-white`,children:P?"Processing...":N.status==="confirm"?"Confirm":N.status==="cancel"?"Cancel":N.status==="assign"?"Assign":N.status==="start"?"Start":N.status==="complete"?"Complete":"Submit"})]})]})]})}),se&&H&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Session History - Booking #",H.id]}),e.jsx("button",{onClick:()=>{re(!1),K(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx(ut,{size:20})})]}),A[H.id]?e.jsx("div",{className:"text-center py-8",children:"Loading sessions..."}):U[H.id]?.length>0?e.jsx("div",{className:"space-y-4",children:U[H.id].map(C=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium",children:["Session ",C.session_number]}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date(C.session_date).toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${C.status==="session_completed"?"bg-green-100 text-green-800":C.status==="session_started"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:C.status.replace("_"," ").replace(/\b\w/g,Me=>Me.toUpperCase())})]}),C.reached_at&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Reached: ",new Date(C.reached_at).toLocaleString()]}),C.started_at&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Started: ",new Date(C.started_at).toLocaleTimeString()]}),C.ended_at&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Ended: ",new Date(C.ended_at).toLocaleTimeString()]}),C.picture_proof_url&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Proof:"}),e.jsx("img",{src:C.picture_proof_url,alt:`Session ${C.session_number} proof`,className:"max-w-xs rounded border border-gray-200 cursor-pointer hover:opacity-80",onClick:()=>window.open(C.picture_proof_url,"_blank")})]})]},C.id))}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No sessions found"})]})}),ae&&ee&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Assign Provider to Booking #",ee.id]}),e.jsx("button",{onClick:()=>{F(!1),le(null),Y([]),ce(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx(ut,{size:20})})]}),e.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Service:"}),e.jsx("span",{className:"font-medium ml-2",children:ee.service_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Customer:"}),e.jsx("span",{className:"font-medium ml-2",children:ee.user_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Location:"}),e.jsxs("span",{className:"font-medium ml-2",children:[ee.city,", ",ee.pincode]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Date:"}),e.jsxs("span",{className:"font-medium ml-2",children:[ee.booking_date?new Date(ee.booking_date).toLocaleDateString():"N/A"," ",ee.booking_time?sl(ee.booking_time):""]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Available Providers (Filtered by Service & Location)"}),je?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Wn,{})}):M.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"No available providers found for this service."}),e.jsx("p",{className:"text-sm mt-2",children:"Please check if there are approved providers who offer this service."})]}):e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:M.map(C=>e.jsx("div",{onClick:()=>ce(C.id),className:`p-4 border rounded-lg cursor-pointer transition-colors ${W===C.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:C.full_name}),W===C.id&&e.jsx(Vn,{size:16,className:"text-blue-600"})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Phone:"})," ",C.phone_number]}),C.email&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",C.email]}),C.city&&C.state&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",C.city,", ",C.state]}),C.average_rating&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Rating:"}),"  ",C.average_rating.toFixed(1)]}),C.completed_bookings!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Completed:"})," ",C.completed_bookings," bookings"]})]})]})})},C.id))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx(ie,{type:"button",onClick:()=>{F(!1),le(null),Y([]),ce(null)},className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx(ie,{type:"button",onClick:mt,disabled:!W||ue||je,className:"bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:ue?"Assigning...":"Assign Provider"})]})]})})]})},Xy=()=>e.jsx(Lt,{children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Bookings"}),e.jsx("p",{className:"text-gray-600",children:"Manage and monitor all bookings in the system"})]}),e.jsxs(Be,{children:[e.jsx(Ze,{children:e.jsx(Ye,{children:"All Bookings"})}),e.jsx(He,{children:e.jsx(Yy,{})})]})]})}),ev={},tv=ev?.VITE_API_BASE_URL||"/api",sv=()=>{const{addToast:r}=_t(),[l,i]=m.useState([]),[d,u]=m.useState(!0),[p,x]=m.useState(1),[g,h]=m.useState(null),[v,j]=m.useState(1),[y,_]=m.useState(0),[N,B]=m.useState({id:!0,date:!0,user:!0,vendor:!0,medicines:!0,amount:!0,status:!0,payment:!0,actions:!0}),[P,b]=m.useState({status:"",provider_id:"",user_id:"",date_from:"",date_to:"",sort_by:"created_at",sort_order:"desc"}),[k,T]=m.useState(!1),U=20,O=tv;m.useEffect(()=>{A()},[p,P]);const A=async()=>{const I=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if(!I){r("Please login to view orders","error"),u(!1);return}try{u(!0);const X=new URLSearchParams;X.append("page",p.toString()),X.append("limit",U.toString()),Object.entries(P).forEach(([Z,ne])=>{ne&&X.append(Z,ne.toString())});const z=await fetch(`${O}/admin/orders?${X.toString()}`,{headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"}});if(!z.ok){if(z.status===401){r("Authentication failed. Please log in again.","error");return}throw new Error(`HTTP error! status: ${z.status}`)}const E=await z.json();i(E.orders||[]),j(E.pagination?.total_pages||1),_(E.pagination?.total||0)}catch(X){console.error("Failed to fetch orders:",X),r(X.message||"Failed to fetch orders","error"),i([])}finally{u(!1)}},me=I=>{const z={placed:{label:"Placed",color:"text-blue-700",bgColor:"bg-blue-100"},pending_vendor_response:{label:"Awaiting Vendor",color:"text-yellow-700",bgColor:"bg-yellow-100"},confirmed:{label:"Confirmed",color:"text-green-700",bgColor:"bg-green-100"},packed:{label:"Packed",color:"text-purple-700",bgColor:"bg-purple-100"},out_for_delivery:{label:"Out for Delivery",color:"text-indigo-700",bgColor:"bg-indigo-100"},delivered:{label:"Delivered",color:"text-green-700",bgColor:"bg-green-100"},rejected:{label:"Rejected",color:"text-red-700",bgColor:"bg-red-100"},cancelled:{label:"Cancelled",color:"text-gray-700",bgColor:"bg-gray-100"},no_vendor_available:{label:"No Vendor",color:"text-orange-700",bgColor:"bg-orange-100"}}[I]||{label:I,color:"text-gray-700",bgColor:"bg-gray-100"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z.color} ${z.bgColor}`,children:z.label})},se=I=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I==="online"?"text-green-700 bg-green-100":"text-blue-700 bg-blue-100"}`,children:I==="online"?"Online":"COD"}),re=I=>I?new Date(I).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",H=I=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(I),K=I=>{h(g===I?null:I)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Medicine Orders"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Monitor all medicine orders and vendor assignments"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>T(!k),className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(fc,{size:16}),"Columns"]}),e.jsxs("button",{onClick:A,disabled:d,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2 disabled:opacity-50",children:[e.jsx(ws,{size:16,className:d?"animate-spin":""}),"Refresh"]})]})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:P.status,onChange:I=>b({...P,status:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"placed",children:"Placed"}),e.jsx("option",{value:"pending_vendor_response",children:"Awaiting Vendor"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"packed",children:"Packed"}),e.jsx("option",{value:"out_for_delivery",children:"Out for Delivery"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date From"}),e.jsx("input",{type:"date",value:P.date_from,onChange:I=>b({...P,date_from:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date To"}),e.jsx("input",{type:"date",value:P.date_to,onChange:I=>b({...P,date_to:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>b({status:"",provider_id:"",user_id:"",date_from:"",date_to:"",sort_by:"created_at",sort_order:"desc"}),className:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200",children:"Clear Filters"})})]})}),d?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(Wn,{})}):l.length===0?e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[e.jsx(an,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No orders found"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:Object.values(P).some(I=>I)?"Try adjusting your filters":"Orders will appear here once users place them"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[N.id&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),N.date&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),N.user&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),N.vendor&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),N.medicines&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Medicines"}),N.amount&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),N.status&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),N.payment&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),N.actions&&e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(I=>e.jsxs(xs.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50",children:[N.id&&e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",I.id]}),N.date&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:re(I.created_at)}),N.user&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:I.user_name||`User #${I.user_id}`}),e.jsx("div",{className:"text-gray-500",children:I.user_phone})]})}),N.vendor&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I.provider_name?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:I.provider_name}),e.jsx("div",{className:"text-gray-500",children:I.provider_phone})]}):e.jsx("span",{className:"text-gray-400 italic",children:"Not assigned"})}),N.medicines&&e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsxs("div",{className:"max-w-xs",children:[I.items.length," item",I.items.length!==1?"s":"",I.items.length>0&&e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[I.items[0].medicine_name,I.items.length>1&&` +${I.items.length-1} more`]})]})}),N.amount&&e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.jsx("div",{className:"font-medium",children:H(I.total_amount)}),I.discount>0&&e.jsxs("div",{className:"text-xs text-green-600",children:["-",H(I.discount)]})]}),N.status&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:me(I.status)}),N.payment&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:se(I.payment_method)}),N.actions&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("button",{onClick:()=>K(I.id),className:"text-blue-600 hover:text-blue-900 flex items-center gap-1 ml-auto",children:[e.jsx(cn,{size:16}),g===I.id?"Hide":"View",g===I.id?e.jsx(Zn,{size:16}):e.jsx(Rr,{size:16})]})})]}),g===I.id&&e.jsx("tr",{children:e.jsx("td",{colSpan:Object.values(N).filter(X=>X).length,className:"px-6 py-4 bg-gray-50",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Order ID"}),e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",I.id]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Status"}),e.jsx("div",{children:me(I.status)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Payment"}),e.jsx("div",{children:se(I.payment_method)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Total Amount"}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:H(I.total_amount)})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 mb-1",children:"Delivery Address"}),e.jsxs("div",{className:"text-sm text-gray-900",children:[I.full_name&&e.jsx("div",{className:"font-medium",children:I.full_name}),e.jsx("div",{children:I.delivery_address}),e.jsxs("div",{children:[I.delivery_city,", ",I.delivery_state||""," - ",I.delivery_pincode]}),I.phone&&e.jsxs("div",{className:"text-gray-500 mt-1",children:["Phone: ",I.phone]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs font-medium text-gray-500 mb-2",children:["Medicines (",I.items.length,")"]}),e.jsx("div",{className:"space-y-2",children:I.items.map(X=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:X.medicine_name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Qty: ",X.quantity,"  ",H(X.price)]})]}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:H(X.price*X.quantity)}),e.jsx("div",{className:"ml-4",children:me(X.status)})]},X.id))})]}),I.provider_name&&e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-xs font-medium text-blue-900 mb-1",children:"Assigned Vendor"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("div",{className:"font-medium",children:I.provider_name}),e.jsx("div",{children:I.provider_phone}),I.pass_on_info&&e.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:[I.pass_on_info.pass_on_type==="partial"?"Partially":"Fully"," passed on from another vendor"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 mb-2",children:"Timeline"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{children:["Placed: ",re(I.created_at)]}),I.confirmed_at&&e.jsxs("div",{children:["Confirmed: ",re(I.confirmed_at)]}),I.packed_at&&e.jsxs("div",{children:["Packed: ",re(I.packed_at)]}),I.out_for_delivery_at&&e.jsxs("div",{children:["Out for Delivery: ",re(I.out_for_delivery_at)]}),I.delivered_at&&e.jsxs("div",{className:"text-green-600 font-medium",children:["Delivered: ",re(I.delivered_at)]})]})]})]})})})]},I.id))})]})})}),v>1&&e.jsxs("div",{className:"flex items-center justify-between bg-white px-4 py-3 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing page ",p," of ",v," (",y," total orders)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>x(I=>Math.max(1,I-1)),disabled:p===1,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[e.jsx(on,{size:16}),"Previous"]}),e.jsxs("button",{onClick:()=>x(I=>Math.min(v,I+1)),disabled:p===v,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:["Next",e.jsx(Js,{size:16})]})]})]})]})]})},rv=()=>e.jsx(Lt,{children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Medicine Orders"}),e.jsx("p",{className:"text-gray-600",children:"Monitor and track all medicine orders from users"})]}),e.jsxs(Be,{children:[e.jsx(Ze,{children:e.jsx(Ye,{children:"All Orders"})}),e.jsx(He,{children:e.jsx(sv,{})})]})]})}),nv=[{id:1,booking_id:101,complaint_type:"service_quality",description:"The groomer was late and didn't follow the instructions I provided for my dog's haircut.",priority:"high",status:"pending",admin_notes:null,created_at:"2025-01-15T10:00:00Z",resolved_at:null,user_name:"Sarah Johnson",user_email:"sarah.johnson@example.com",user_phone:"+91 98765 43210",provider_name:"John Trainer",provider_email:"john.trainer@example.com",service_name:"Pet Grooming",booking_date:"2025-01-14",booking_time:"14:00"},{id:2,booking_id:102,complaint_type:"provider_behavior",description:"The trainer was rude and unprofessional during the training session.",priority:"medium",status:"in_progress",admin_notes:"Contacted provider for their side of the story",created_at:"2025-01-14T15:30:00Z",resolved_at:null,user_name:"Michael Chen",user_email:"michael.chen@example.com",user_phone:"+91 98765 43211",provider_name:"Sarah Trainer",provider_email:"sarah.trainer@example.com",service_name:"Dog Training",booking_date:"2025-01-13",booking_time:"10:00"},{id:3,booking_id:103,complaint_type:"billing_dispute",description:"I was charged extra for services that were not provided.",priority:"high",status:"resolved",admin_notes:"Refund processed. Amount credited to user account.",created_at:"2025-01-12T09:20:00Z",resolved_at:"2025-01-13T11:00:00Z",user_name:"Emily Rodriguez",user_email:"emily.rodriguez@example.com",user_phone:"+91 98765 43212",provider_name:"Mike Handler",provider_email:"mike.handler@example.com",service_name:"Veterinary Care",booking_date:"2025-01-11",booking_time:"16:00"},{id:4,booking_id:104,complaint_type:"safety_concern",description:"The boarding facility didn't have proper safety measures for my pet.",priority:"high",status:"pending",admin_notes:null,created_at:"2025-01-11T14:15:00Z",resolved_at:null,user_name:"David Wilson",user_email:"david.wilson@example.com",user_phone:"+91 98765 43213",provider_name:"Lisa Coach",provider_email:"lisa.coach@example.com",service_name:"Pet Boarding",booking_date:"2025-01-10",booking_time:"09:00"},{id:5,booking_id:105,complaint_type:"other",description:"General dissatisfaction with the service quality.",priority:"low",status:"closed",admin_notes:"Issue resolved after discussion with provider.",created_at:"2025-01-08T11:00:00Z",resolved_at:"2025-01-09T15:30:00Z",user_name:"Priya Sharma",user_email:"priya.sharma@example.com",user_phone:"+91 98765 43214",provider_name:"John Trainer",provider_email:"john.trainer@example.com",service_name:"Pet Walking",booking_date:"2025-01-07",booking_time:"18:00"}],av={total_complaints:5,pending_complaints:2,in_progress_complaints:1,resolved_complaints:1,closed_complaints:1,high_priority_complaints:3,medium_priority_complaints:1,low_priority_complaints:1},iv=()=>{const[r,l]=m.useState(nv),[i,d]=m.useState(av),[u,p]=m.useState(!1),[x,g]=m.useState(null),[h,v]=m.useState("all"),[j,y]=m.useState("all"),[_,N]=m.useState(""),[B,P]=m.useState(!1),[b,k]=m.useState(""),[T,U]=m.useState(""),O=(H,K,I)=>{P(!0),setTimeout(()=>{l(r.map(z=>z.id===H?{...z,status:K,admin_notes:I,resolved_at:K==="resolved"||K==="closed"?new Date().toISOString():z.resolved_at}:z));const X=r.map(z=>z.id===H?{...z,status:K}:z);d({total_complaints:X.length,pending_complaints:X.filter(z=>z.status==="pending").length,in_progress_complaints:X.filter(z=>z.status==="in_progress").length,resolved_complaints:X.filter(z=>z.status==="resolved").length,closed_complaints:X.filter(z=>z.status==="closed").length,high_priority_complaints:X.filter(z=>z.priority==="high").length,medium_priority_complaints:X.filter(z=>z.priority==="medium").length,low_priority_complaints:X.filter(z=>z.priority==="low").length}),g(null),k(""),U(""),P(!1)},500)},A=H=>{switch(H){case"high":return"bg-red-100 text-red-700 border-red-200";case"medium":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"low":return"bg-green-100 text-green-700 border-green-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},me=H=>{switch(H){case"pending":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"in_progress":return"bg-blue-100 text-blue-700 border-blue-200";case"resolved":return"bg-green-100 text-green-700 border-green-200";case"closed":return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},se=H=>({service_quality:"Service Quality Issue",provider_behavior:"Provider Behavior",billing_dispute:"Billing Dispute",safety_concern:"Safety Concern",equipment_damage:"Equipment Damage",other:"Other"})[H]||H,re=r.filter(H=>{const K=h==="all"||H.status===h,I=j==="all"||H.priority===j,X=_===""||H.user_name.toLowerCase().includes(_.toLowerCase())||H.provider_name.toLowerCase().includes(_.toLowerCase())||H.service_name.toLowerCase().includes(_.toLowerCase())||H.description.toLowerCase().includes(_.toLowerCase());return K&&I&&X});return u?e.jsx(Lt,{children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading complaints..."})]})}):e.jsx(Lt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Complaint Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage and resolve customer complaints"})]})}),i&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(Be,{className:"border-0 shadow-lg",children:e.jsx(He,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Complaints"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:i.total_complaints})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(_s,{size:24,className:"text-blue-600"})})]})})}),e.jsx(Be,{className:"border-0 shadow-lg",children:e.jsx(He,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:i.pending_complaints})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(as,{size:24,className:"text-yellow-600"})})]})})}),e.jsx(Be,{className:"border-0 shadow-lg",children:e.jsx(He,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:i.in_progress_complaints})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(ar,{size:24,className:"text-blue-600"})})]})})}),e.jsx(Be,{className:"border-0 shadow-lg",children:e.jsx(He,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Resolved"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:i.resolved_complaints})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(ns,{size:24,className:"text-green-600"})})]})})})]}),e.jsx(Be,{className:"border-0 shadow-lg",children:e.jsx(He,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(is,{size:20,className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search complaints...",value:_,onChange:H=>N(H.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("select",{value:h,onChange:H=>v(H.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"})]}),e.jsxs("select",{value:j,onChange:H=>y(H.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Priority"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]})]})]})})}),e.jsx("div",{className:"space-y-4",children:re.length===0?e.jsx(Be,{className:"border-0 shadow-lg",children:e.jsxs(He,{className:"p-12 text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(_s,{size:48,className:"text-gray-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No Complaints Found"}),e.jsx("p",{className:"text-gray-600",children:_||h!=="all"||j!=="all"?"No complaints match your filter criteria.":"No complaints have been submitted yet."})]})}):re.map(H=>e.jsx(Be,{className:"border-0 shadow-lg hover:shadow-xl transition-shadow",children:e.jsx(He,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-4",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:se(H.complaint_type)}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${A(H.priority)}`,children:H.priority.toUpperCase()}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${me(H.status)}`,children:H.status.replace("_"," ").toUpperCase()})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:H.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Nt,{size:16,className:"mr-2 text-indigo-500"}),e.jsx("span",{children:H.user_name})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(dn,{size:16,className:"mr-2 text-indigo-500"}),e.jsx("span",{children:H.user_phone})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(fs,{size:16,className:"mr-2 text-indigo-500"}),e.jsx("span",{children:new Date(H.booking_date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(lr,{size:16,className:"mr-2 text-indigo-500"}),e.jsx("span",{children:H.service_name})]})]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>g(H),className:"border-indigo-200 text-indigo-600 hover:bg-indigo-50",children:[e.jsx(cn,{size:16,className:"mr-2"}),"View Details"]})})]})})},H.id))}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Complaint Details"}),e.jsx("button",{onClick:()=>g(null),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(or,{size:20,className:"text-gray-500"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Complaint Type"}),e.jsx("p",{className:"text-gray-900",children:se(x.complaint_type)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Priority"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium border ${A(x.priority)}`,children:x.priority.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Status"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium border ${me(x.status)}`,children:x.status.replace("_"," ").toUpperCase()})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Created At"}),e.jsx("p",{className:"text-gray-900",children:new Date(x.created_at).toLocaleString()})]}),x.resolved_at&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Resolved At"}),e.jsx("p",{className:"text-gray-900",children:new Date(x.resolved_at).toLocaleString()})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Description"}),e.jsx("p",{className:"text-gray-900 mt-1 p-4 bg-gray-50 rounded-lg",children:x.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:"Customer Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",x.user_name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",x.user_email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Phone:"})," ",x.user_phone]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-3",children:"Provider Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",x.provider_name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",x.provider_email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Service:"})," ",x.service_name]})]})]})]}),x.admin_notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Admin Notes"}),e.jsx("p",{className:"text-gray-900 mt-1 p-4 bg-yellow-50 rounded-lg",children:x.admin_notes})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Update Status"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"New Status"}),e.jsxs("select",{value:b,onChange:H=>k(H.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Admin Notes"}),e.jsx("textarea",{value:T,onChange:H=>U(H.target.value),placeholder:"Add notes about the resolution...",className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(ie,{onClick:()=>g(null),variant:"outline",className:"flex-1",children:"Cancel"}),e.jsx(ie,{onClick:()=>O(x.id,b,T),disabled:!b||B,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:B?"Updating...":"Update Status"})]})]})]})]})]})})]})})},lv={},Rn=lv?.VITE_API_BASE_URL||"/api",Lr={New:{badge:"bg-secondary text-primary border border-primary/20",dot:"bg-primary"},Contacted:{badge:"bg-secondary text-primary border border-primary/20",dot:"bg-primary"},Converted:{badge:"bg-secondary text-primary border border-primary/20",dot:"bg-primary"},Lost:{badge:"bg-secondary text-primary border border-primary/20",dot:"bg-primary"},Available:{badge:"bg-secondary text-primary border border-primary/20",dot:"bg-primary"},"Not connected":{badge:"bg-gray-100 text-gray-700 border border-gray-200",dot:"bg-gray-500"}},ov=r=>({id:r.id,ownerName:r.owner_name,email:r.email,phone:r.phone,petType:r.pet_type,serviceInterest:r.service_interest,location:r.location||"",createdAt:r.created_at,status:r.status,notes:r.notes||"",assignedTrainer:r.assigned_trainer,assigned_admin_id:r.assigned_admin_id||null,assigned_admin_name:r.assigned_admin_name||null,assigned_admin_username:r.assigned_admin_username||null,scheduled_date:r.scheduled_date||null,scheduled_time:r.scheduled_time||null,status_history:r.status_history||[]}),cv=({lead:r,onClose:l,onUpdate:i,showHistory:d=!1})=>{const[u,p]=m.useState(r?.status??"New"),[x,g]=m.useState(r?.scheduled_date||""),[h,v]=m.useState(r?.scheduled_time||""),[j,y]=m.useState(!1),[_,N]=m.useState("details");if(m.useEffect(()=>{r&&(p(r.status),g(r.scheduled_date||""),v(r.scheduled_time||""))},[r]),!r)return null;const B=async()=>{y(!0);try{await i(r.id,{status:u,scheduledDate:x||null,scheduledTime:h||null}),l()}catch(b){console.error("Error updating lead:",b)}finally{y(!1)}},P=r;return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4 py-8",children:e.jsxs("div",{className:"relative w-full max-w-3xl max-h-[90vh] rounded-3xl bg-white shadow-2xl flex flex-col",children:[e.jsx("button",{onClick:l,className:"absolute right-4 top-4 z-10 rounded-full bg-secondary p-2 text-primary hover:bg-secondary/80 transition-colors",children:e.jsx(ut,{size:18})}),e.jsx("div",{className:"rounded-t-3xl bg-primary px-8 py-6 text-white flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ln,{size:28}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Lead Details"}),e.jsx("p",{className:"text-sm text-secondary/90",children:"Manage status, assignment, and notes"})]})]})}),d&&e.jsx("div",{className:"px-8 pt-6 pb-4 border-b border-primary/20 flex-shrink-0",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>N("details"),className:`px-4 py-2 text-sm font-semibold rounded-xl transition-colors ${_==="details"?"bg-primary text-white":"text-primary hover:bg-secondary"}`,children:"Details"}),e.jsx("button",{onClick:()=>N("history"),className:`px-4 py-2 text-sm font-semibold rounded-xl transition-colors ${_==="history"?"bg-primary text-white":"text-primary hover:bg-secondary"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fp,{size:16}),"Status History"]})})]})}),e.jsx("div",{className:"overflow-y-auto flex-1",children:_==="details"?e.jsxs("div",{className:"grid gap-6 px-8 py-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3 rounded-2xl border border-primary-100 bg-primary-50/40 p-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-2xl bg-white/90 p-3 shadow-sm",children:e.jsx(Nt,{className:"text-primary-500",size:22})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary",children:"User"}),e.jsx("p",{className:"text-lg font-semibold text-primary-900",children:r.ownerName})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-primary-700",children:[e.jsx($r,{size:16}),e.jsx("span",{children:r.email})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-primary-700",children:[e.jsx(dn,{size:16}),e.jsx("span",{children:r.phone})]}),r.location&&e.jsxs("div",{className:"flex items-center gap-3 text-sm text-primary-700",children:[e.jsx(lr,{size:16}),e.jsx("span",{children:r.location})]}),r.assigned_admin_name&&e.jsxs("div",{className:"flex items-center gap-3 text-sm text-primary-700",children:[e.jsx(ur,{size:16}),e.jsxs("span",{children:["Assigned to: ",r.assigned_admin_name]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-primary-700",children:[e.jsx(Ac,{size:16}),e.jsxs("span",{children:["Created ",new Date(r.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-2xl border border-primary-100 p-5",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-primary-500",children:"Lead Status"}),e.jsx("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:["New","Contacted","Converted","Lost","Available","Not connected"].map(b=>e.jsxs("button",{onClick:()=>p(b),className:`flex items-center justify-between rounded-xl border p-3 text-sm font-medium transition-all ${u===b?"border-primary-500 bg-primary-50 text-primary-700 shadow-sm":"border-primary-100 bg-white text-primary-500 hover:border-primary-200"}`,children:[e.jsx("span",{children:b}),b==="Converted"?e.jsx(Vn,{size:18}):b==="Lost"?e.jsx(_s,{size:18}):e.jsx(xp,{size:18})]},b))})]}),e.jsxs("div",{className:"rounded-2xl border border-primary-100 p-5",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-primary-500 mb-3",children:"Schedule"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-primary-600 mb-1 block",children:"Date"}),e.jsx("input",{type:"date",value:x,onChange:b=>g(b.target.value),className:"w-full rounded-xl border border-primary-200 bg-white px-3 py-2 text-sm text-primary-900 outline-none focus:border-primary-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-primary-600 mb-1 block",children:"Time"}),e.jsx("input",{type:"time",value:h,onChange:b=>v(b.target.value),className:"w-full rounded-xl border border-primary-200 bg-white px-3 py-2 text-sm text-primary-900 outline-none focus:border-primary-400"})]})]})]})]})]}):e.jsxs("div",{className:"px-8 py-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900 mb-4",children:"Status History"}),P.status_history&&P.status_history.length>0?e.jsx("div",{className:"space-y-3",children:P.status_history.map((b,k)=>e.jsx("div",{className:"rounded-xl border border-primary-100 bg-primary-50/40 p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${Lr[b.status]?.badge||Lr.New.badge}`,children:[e.jsx("span",{className:`h-2 w-2 rounded-full ${Lr[b.status]?.dot||Lr.New.dot}`}),b.status]}),e.jsx("span",{className:"text-xs text-primary-600",children:new Date(b.created_at).toLocaleString()})]}),b.notes&&e.jsx("p",{className:"text-sm text-primary-700 mt-2",children:b.notes}),b.updated_by_name&&e.jsxs("p",{className:"text-xs text-primary-500 mt-1",children:["Updated by: ",b.updated_by_name]})]})})},b.id))}):e.jsx("p",{className:"text-sm text-primary-400 text-center py-8",children:"No status history available"})]})}),e.jsxs("div",{className:"px-8 pt-6 pb-8 border-t border-primary-100 bg-white flex-shrink-0",children:[e.jsxs("div",{className:"rounded-2xl border border-primary-100 bg-primary-50/40 p-5 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-primary-500 mb-3",children:"Lead Notes"}),e.jsx("p",{className:"text-sm text-primary-900 leading-relaxed",children:r.notes||"No notes available"})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-end",children:[e.jsx("button",{onClick:l,disabled:j,className:"rounded-xl border border-primary-200 px-5 py-2 text-sm font-medium text-primary-500 hover:bg-primary-50 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:B,disabled:j,className:"rounded-xl bg-gradient-to-r from-orange-500 to-amber-400 px-5 py-2 text-sm font-semibold text-white shadow-sm hover:from-orange-600 hover:to-amber-500 transition-colors disabled:opacity-50 flex items-center gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx(Mr,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})})},dv=()=>{const{addToast:r}=_t(),[l,i]=m.useState([]),[d,u]=m.useState(null),[p,x]=m.useState(""),[g,h]=m.useState("All"),[v,j]=m.useState(!1),[y,_]=m.useState(!1),[N,B]=m.useState(!1),[P,b]=m.useState([]),[k,T]=m.useState({ownerName:"",email:"",phone:"",petType:"Dog",serviceInterest:"Training",location:"",notes:"",status:"New",assignedTrainer:null,scheduledDate:"",scheduledTime:""}),[U,O]=m.useState({username:"",password:"",full_name:"",email:"",phone:""}),A=(E=!1)=>{const Z=localStorage.getItem("KwikMedi_token"),ne={};return Z&&(ne.Authorization=`Bearer ${Z}`),E&&(ne["Content-Type"]="application/json"),ne},me=async()=>{j(!0);try{const Z=await(await fetch(`${Rn}/admin/leads`,{headers:A()})).json();if(Z.success&&Array.isArray(Z.leads)){const ne=Z.leads.map(ov);i(ne)}else r("Failed to load leads","error")}catch(E){console.error("Error fetching leads:",E),r("Error loading leads","error")}finally{j(!1)}};m.useEffect(()=>{me(),se()},[]);const se=async()=>{try{const Z=await(await fetch(`${Rn}/admin/lead-admins`,{headers:A()})).json();Z.success&&Array.isArray(Z.admins)&&b(Z.admins)}catch(E){console.error("Error fetching lead admins:",E)}},re=async()=>{if(!U.username||!U.password){r("Username and password are required","error");return}try{const E=await fetch(`${Rn}/admin/lead-admins`,{method:"POST",headers:A(!0),body:JSON.stringify(U)}),Z=await E.json();E.ok&&Z.success?(await se(),r("Lead admin created successfully","success"),O({username:"",password:"",full_name:"",email:"",phone:""})):r(Z.error?.message||"Failed to create admin","error")}catch(E){console.error("Error creating admin:",E),r("Error creating admin","error")}},H=m.useMemo(()=>{const E=l.length,Z=l.filter(ee=>ee.status==="New").length,ne=l.filter(ee=>ee.status==="Contacted").length,ae=l.filter(ee=>ee.status==="Converted").length,F=E===0?0:Math.round(ae/E*100);return[{label:"New Leads",value:Z,icon:e.jsx(yp,{className:"text-white",size:22}),gradient:"bg-primary",subtitle:"+5 today"},{label:"Contacted",value:ne,icon:e.jsx(gp,{className:"text-primary-500",size:22}),gradient:"bg-secondary",subtitle:"Follow-ups scheduled"},{label:"Converted",value:ae,icon:e.jsx(Vn,{className:"text-emerald-600",size:22}),gradient:"from-emerald-100 to-emerald-50",subtitle:`${F}% conversion`},{label:"Total Leads",value:E,icon:e.jsx(Ec,{className:"text-primary-500",size:22}),gradient:"from-orange-50 to-amber-50",subtitle:"Across all services"}]},[l]),K=l.filter(E=>{const Z=E.ownerName.toLowerCase().includes(p.toLowerCase())||E.email.toLowerCase().includes(p.toLowerCase())||E.phone.toLowerCase().includes(p.toLowerCase()),ne=g==="All"||E.status===g;return Z&&ne}),I=async(E,Z)=>{try{const ne={};Z.status&&(ne.status=Z.status),Z.assignedTrainer!==void 0&&(ne.assigned_trainer=Z.assignedTrainer),Z.scheduledDate!==void 0&&(ne.scheduled_date=Z.scheduledDate),Z.scheduledTime!==void 0&&(ne.scheduled_time=Z.scheduledTime);const ae=await fetch(`${Rn}/admin/leads/${E}`,{method:"PUT",headers:A(!0),body:JSON.stringify(ne)}),F=await ae.json();if(ae.ok&&F.success)await me(),r("Lead updated successfully","success");else throw r(F.error?.message||"Failed to update lead","error"),new Error(F.error?.message||"Failed to update lead")}catch(ne){throw console.error("Error updating lead:",ne),r("Error updating lead","error"),ne}},X=async()=>{try{const E=await fetch(`${Rn}/admin/leads`,{method:"POST",headers:A(!0),body:JSON.stringify({owner_name:k.ownerName,email:k.email,phone:k.phone,pet_type:k.petType,service_interest:k.serviceInterest,location:k.location||null,notes:k.notes||null,status:k.status,assigned_trainer:k.assignedTrainer,scheduled_date:k.scheduledDate||null,scheduled_time:k.scheduledTime||null})}),Z=await E.json();E.ok&&Z.success?(await me(),r("Lead created successfully","success"),_(!1),T({ownerName:"",email:"",phone:"",petType:"Dog",serviceInterest:"Training",location:"",notes:"",status:"New",assignedTrainer:null,scheduledDate:"",scheduledTime:""})):r(Z.error?.message||"Failed to create lead","error")}catch(E){console.error("Error creating lead:",E),r("Error creating lead","error")}},z=async E=>{if(confirm("Are you sure you want to delete this lead?"))try{const Z=await fetch(`${Rn}/admin/leads/${E}`,{method:"DELETE",headers:A()}),ne=await Z.json();Z.ok&&ne.success?(await me(),r("Lead deleted successfully","success")):r(ne.error?.message||"Failed to delete lead","error")}catch(Z){console.error("Error deleting lead:",Z),r("Error deleting lead","error")}};return e.jsxs(Lt,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-3xl bg-primary px-6 py-8 text-white shadow-lg",children:e.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm uppercase tracking-wider text-secondary/80",children:"Lead Management"}),e.jsx("h1",{className:"mt-2 text-3xl font-bold",children:"User Leads Dashboard"}),e.jsx("p",{className:"mt-3 max-w-2xl text-sm text-secondary/80",children:"Track inquiries from users, manage leads, and follow progress across the sales pipeline."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"button",className:"rounded-xl bg-secondary px-5 py-2 text-sm font-semibold text-primary shadow-sm hover:bg-secondary/80 transition-colors flex items-center gap-2",onClick:()=>B(!0),children:[e.jsx(ur,{size:16}),"Manage Admins"]}),e.jsx("button",{type:"button",className:"rounded-xl bg-white px-5 py-2 text-sm font-semibold text-primary-600 shadow-sm hover:bg-primary-50 transition-colors",onClick:()=>console.log("Export leads"),children:"Export Leads"}),e.jsxs("button",{type:"button",className:"rounded-xl bg-primary-600 px-5 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary-700 transition-colors flex items-center gap-2",onClick:()=>_(!0),children:[e.jsx(ks,{size:16}),"New Lead"]})]})]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:H.map(E=>e.jsx(Be,{className:"overflow-hidden rounded-3xl border border-primary-100/60 bg-white/95 shadow-md",children:e.jsxs(He,{className:"relative flex items-center gap-4 p-6",children:[e.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br ${E.gradient} shadow-sm`,children:E.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium uppercase tracking-wide text-primary-500",children:E.label}),e.jsx("p",{className:"mt-1 text-2xl font-semibold text-primary-900",children:E.value}),e.jsx("p",{className:"text-xs text-primary-400",children:E.subtitle})]})]})},E.label))}),e.jsx(Be,{className:"rounded-3xl border border-primary-100/60 bg-white/95 shadow-lg",children:e.jsxs(He,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex flex-1 items-center gap-3 rounded-2xl border border-primary-100 bg-primary-50/60 px-4 py-2",children:[e.jsx(is,{size:18,className:"text-primary-400"}),e.jsx("input",{value:p,onChange:E=>x(E.target.value),placeholder:"Search users, email, or phone...",className:"flex-1 border-none bg-transparent text-sm text-primary-900 placeholder-orange-300 outline-none"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["All","New","Contacted","Converted","Lost","Available","Not connected"].map(E=>e.jsxs("button",{onClick:()=>h(E),className:`flex items-center gap-2 rounded-full border px-4 py-2 text-xs font-semibold uppercase tracking-wide transition-all ${g===E?"border-primary-500 bg-primary-50 text-primary-600 shadow-sm":"border-primary-100 bg-white text-primary-400 hover:border-primary-200"}`,children:[e.jsx(Ua,{size:14}),E," Leads"]},E))})]}),e.jsx("div",{className:"overflow-hidden rounded-2xl border border-primary-100",children:e.jsxs("table",{className:"min-w-full divide-y divide-orange-100",children:[e.jsx("thead",{className:"bg-primary-50/70",children:e.jsxs("tr",{className:"text-left text-xs font-semibold uppercase tracking-wider text-primary-500",children:[e.jsx("th",{className:"px-6 py-4",children:"User"}),e.jsx("th",{className:"px-6 py-4",children:"Pet Type"}),e.jsx("th",{className:"px-6 py-4",children:"Service Interest"}),e.jsx("th",{className:"px-6 py-4",children:"Scheduled"}),e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-orange-50 bg-white/95",children:v?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Mr,{className:"w-8 h-8 animate-spin text-primary-400"})})})}):K.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-sm text-primary-400",children:"No leads found for the current filters."})}):K.map(E=>e.jsxs("tr",{className:"transition-colors hover:bg-primary-50/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-gradient-to-br from-orange-500 to-amber-400 text-white shadow-sm",children:e.jsx(ln,{size:18})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-primary-900",children:E.ownerName}),e.jsx("p",{className:"text-xs text-primary-400",children:E.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center gap-2 rounded-full bg-primary-50 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-primary-500",children:E.petType})}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-primary-700",children:E.serviceInterest}),e.jsx("td",{className:"px-6 py-4 text-sm text-primary-600",children:E.scheduled_date?e.jsxs("div",{children:[e.jsx("div",{children:new Date(E.scheduled_date).toLocaleDateString()}),E.scheduled_time&&e.jsx("div",{className:"text-xs",children:E.scheduled_time})]}):e.jsx("span",{className:"text-primary-300",children:"Not scheduled"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${Lr[E.status]?.badge||Lr.New.badge}`,children:[e.jsx("span",{className:`h-2 w-2 rounded-full ${Lr[E.status]?.dot||Lr.New.dot}`}),E.status]}),E.assigned_admin_name&&e.jsxs("div",{className:"text-xs text-primary-500",children:["Assigned to: ",E.assigned_admin_name]})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsxs("button",{onClick:()=>u(E),className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-orange-500 to-amber-400 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-white shadow-sm transition-all hover:from-orange-600 hover:to-amber-500",children:["Manage",e.jsx(Js,{size:14})]}),e.jsx("button",{onClick:()=>z(E.id),className:"inline-flex items-center gap-2 rounded-full border border-red-200 bg-white px-3 py-2 text-xs font-semibold text-red-500 shadow-sm transition-all hover:bg-red-50",children:e.jsx(Dr,{size:14})})]})})]},E.id))})]})})]})})]}),e.jsx(cv,{lead:d,onClose:()=>u(null),onUpdate:I,showHistory:!0}),N&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4 py-8",children:e.jsxs("div",{className:"relative w-full max-w-3xl rounded-3xl bg-white shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:()=>B(!1),className:"absolute right-4 top-4 rounded-full bg-primary-100 p-2 text-primary-600 hover:bg-primary-200 transition-colors",children:e.jsx(ut,{size:18})}),e.jsx("div",{className:"rounded-t-3xl bg-gradient-to-r from-orange-500 to-amber-400 px-8 py-6 text-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ur,{size:28}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Lead Admin Management"}),e.jsx("p",{className:"text-sm text-primary-100/90",children:"Create and manage lead admin users"})]})]})}),e.jsxs("div",{className:"px-8 py-6 space-y-6",children:[e.jsxs("div",{className:"rounded-2xl border border-primary-100 bg-primary-50/40 p-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900 mb-4",children:"Create New Lead Admin"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-primary-500 mb-1 block",children:"Username *"}),e.jsx("input",{type:"text",value:U.username,onChange:E=>O({...U,username:E.target.value}),className:"w-full rounded-xl border border-primary-100 bg-white px-4 py-2 text-sm text-primary-900 outline-none focus:border-primary-400",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-primary-500 mb-1 block",children:"Password *"}),e.jsx("input",{type:"password",value:U.password,onChange:E=>O({...U,password:E.target.value}),className:"w-full rounded-xl border border-primary-100 bg-white px-4 py-2 text-sm text-primary-900 outline-none focus:border-primary-400",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-primary-500 mb-1 block",children:"Full Name"}),e.jsx("input",{type:"text",value:U.full_name,onChange:E=>O({...U,full_name:E.target.value}),className:"w-full rounded-xl border border-primary-100 bg-white px-4 py-2 text-sm text-primary-900 outline-none focus:border-primary-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-primary-500 mb-1 block",children:"Email"}),e.jsx("input",{type:"email",value:U.email,onChange:E=>O({...U,email:E.target.value}),className:"w-full rounded-xl border border-primary-100 bg-white px-4 py-2 text-sm text-primary-900 outline-none focus:border-primary-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-primary-500 mb-1 block",children:"Phone"}),e.jsx("input",{type:"tel",value:U.phone,onChange:E=>O({...U,phone:E.target.value}),className:"w-full rounded-xl border border-primary-100 bg-white px-4 py-2 text-sm text-primary-900 outline-none focus:border-primary-400"})]})]}),e.jsx("button",{onClick:re,disabled:!U.username||!U.password,className:"mt-4 rounded-xl bg-gradient-to-r from-orange-500 to-amber-400 px-5 py-2 text-sm font-semibold text-white shadow-sm hover:from-orange-600 hover:to-amber-500 transition-colors disabled:opacity-50",children:"Create Admin"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900 mb-4",children:"Existing Lead Admins"}),e.jsx("div",{className:"space-y-2",children:P.map(E=>e.jsxs("div",{className:"rounded-xl border border-primary-100 bg-white p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-primary-900",children:E.username}),E.full_name&&e.jsx("p",{className:"text-sm text-primary-600",children:E.full_name}),E.email&&e.jsx("p",{className:"text-xs text-primary-500",children:E.email})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${E.is_active?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:E.is_active?"Active":"Inactive"})})]},E.id))})]})]})]})}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4 py-8",children:e.jsxs("div",{className:"relative w-full max-w-2xl rounded-3xl bg-white shadow-2xl",children:[e.jsx("button",{onClick:()=>_(!1),className:"absolute right-4 top-4 rounded-full bg-primary-100 p-2 text-primary-600 hover:bg-primary-200 transition-colors",children:e.jsx(ut,{size:18})}),e.jsx("div",{className:"rounded-t-3xl bg-gradient-to-r from-orange-500 to-amber-400 px-8 py-6 text-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ks,{size:28}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Create New Lead"}),e.jsx("p",{className:"text-sm text-secondary/90",children:"Add a new user lead"})]})]})}),e.jsxs("div",{className:"px-8 py-6 space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-primary-500 mb-1 block",children:"Owner Name *"}),e.jsx("input",{type:"text",value:k.ownerName,onChange:E=>T({...k,ownerName:E.target.value}),className:"w-full rounded-xl border border-primary-100 bg-white px-4 py-2 text-sm text-primary-900 outline-none focus:border-primary-400",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-primary-500 mb-1 block",children:"Email *"}),e.jsx("input",{type:"email",value:k.email,onChange:E=>T({...k,email:E.target.value}),className:"w-full rounded-xl border border-primary-100 bg-white px-4 py-2 text-sm text-primary-900 outline-none focus:border-primary-400",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-primary-500 mb-1 block",children:"Phone *"}),e.jsx("input",{type:"tel",value:k.phone,onChange:E=>T({...k,phone:E.target.value}),className:"w-full rounded-xl border border-primary-100 bg-white px-4 py-2 text-sm text-primary-900 outline-none focus:border-primary-400",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-primary-500 mb-1 block",children:"Pet Type"}),e.jsxs("select",{value:k.petType,onChange:E=>T({...k,petType:E.target.value}),className:"w-full rounded-xl border border-primary-100 bg-white px-4 py-2 text-sm text-primary-900 outline-none focus:border-primary-400",children:[e.jsx("option",{children:"Dog"}),e.jsx("option",{children:"Cat"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-primary-500 mb-1 block",children:"Service Interest"}),e.jsxs("select",{value:k.serviceInterest,onChange:E=>T({...k,serviceInterest:E.target.value}),className:"w-full rounded-xl border border-primary-100 bg-white px-4 py-2 text-sm text-primary-900 outline-none focus:border-primary-400",children:[e.jsx("option",{children:"Training"}),e.jsx("option",{children:"Grooming"}),e.jsx("option",{children:"Vaccination"}),e.jsx("option",{children:"Healthcare"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-primary-500 mb-1 block",children:"Location"}),e.jsx("input",{type:"text",value:k.location,onChange:E=>T({...k,location:E.target.value}),className:"w-full rounded-xl border border-primary-100 bg-white px-4 py-2 text-sm text-primary-900 outline-none focus:border-primary-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-primary-500 mb-1 block",children:"Scheduled Date"}),e.jsx("input",{type:"date",value:k.scheduledDate,onChange:E=>T({...k,scheduledDate:E.target.value}),className:"w-full rounded-xl border border-primary-100 bg-white px-4 py-2 text-sm text-primary-900 outline-none focus:border-primary-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-primary-500 mb-1 block",children:"Scheduled Time"}),e.jsx("input",{type:"time",value:k.scheduledTime,onChange:E=>T({...k,scheduledTime:E.target.value}),className:"w-full rounded-xl border border-primary-100 bg-white px-4 py-2 text-sm text-primary-900 outline-none focus:border-primary-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-primary-500 mb-1 block",children:"Notes"}),e.jsx("textarea",{value:k.notes,onChange:E=>T({...k,notes:E.target.value}),rows:3,className:"w-full rounded-xl border border-primary-100 bg-white px-4 py-2 text-sm text-primary-900 outline-none focus:border-primary-400"})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsx("button",{onClick:()=>_(!1),className:"rounded-xl border border-primary-200 px-5 py-2 text-sm font-medium text-primary-500 hover:bg-primary-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:X,disabled:!k.ownerName||!k.email||!k.phone,className:"rounded-xl bg-gradient-to-r from-orange-500 to-amber-400 px-5 py-2 text-sm font-semibold text-white shadow-sm hover:from-orange-600 hover:to-amber-500 transition-colors disabled:opacity-50",children:"Create Lead"})]})]})]})})]})},Qt="https://kwikmedi.mycartly.in",uv=()=>{const{addToast:r}=_t(),{user:l}=Ut(),[i]=ag(),d=i.get("tab")||"overview",[u,p]=m.useState(null),[x,g]=m.useState([]),[h,v]=m.useState([]),[j,y]=m.useState([]),[_,N]=m.useState([]),[B,P]=m.useState([]),[b,k]=m.useState([]),[T,U]=m.useState([]),[O,A]=m.useState(!1),[me,se]=m.useState("30d"),[re,H]=m.useState(!1),[K,I]=m.useState({full_name:"",email:"",phone_number:"",password:""}),[X,z]=m.useState(null),E=l?.role==="admin",Z=()=>({Authorization:`Bearer ${localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token")||""}`,"Content-Type":"application/json"});m.useEffect(()=>{d==="overview"?ne():d==="settlements"?ae():d==="payouts"?F():d==="transactions"?ee():d==="refunds"?le():d==="bookings"?he():d==="vendors"?Ae():d==="staff"&&E&&we()},[d,me,E]);const ne=async()=>{A(!0);try{if(!(localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token"))){r("Authentication required. Please login again.","error"),A(!1);return}const $=new Date;let G,ge=$.toISOString().split("T")[0];switch(me){case"7d":G=new Date($.setDate($.getDate()-7)).toISOString().split("T")[0];break;case"30d":G=new Date($.setDate($.getDate()-30)).toISOString().split("T")[0];break;case"90d":G=new Date($.setDate($.getDate()-90)).toISOString().split("T")[0];break;case"1y":G=new Date($.setFullYear($.getFullYear()-1)).toISOString().split("T")[0];break;default:G=new Date($.setDate($.getDate()-30)).toISOString().split("T")[0]}const ve=await fetch(`${Qt}/api/admin/finance/gmv?date_from=${G}&date_to=${ge}`,{headers:Z()});if(ve.ok){const Se=await ve.json();p({total_gmv:Se.total_gmv||0,period:`${G} to ${ge}`})}else{const Se=await ve.json().catch(()=>({}));console.error("GMV fetch error:",ve.status,Se),r(`Failed to fetch GMV data: ${Se.error?.message||ve.statusText}`,"error")}}catch(w){console.error("GMV fetch exception:",w),r(`Failed to fetch GMV data: ${w instanceof Error?w.message:"Network error"}`,"error")}finally{A(!1)}},ae=async()=>{A(!0);try{if(!(localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token"))){r("Authentication required. Please login again.","error"),A(!1);return}const $=await fetch(`${Qt}/api/admin/finance/settlements`,{headers:Z()});if($.ok){const G=await $.json();g(G.settlements||[])}else{const G=await $.json().catch(()=>({}));console.error("Settlements fetch error:",$.status,G),r(`Failed to fetch settlements: ${G.error?.message||$.statusText}`,"error")}}catch(w){console.error("Settlements fetch exception:",w),r(`Failed to fetch settlements: ${w instanceof Error?w.message:"Network error"}`,"error")}finally{A(!1)}},F=async()=>{A(!0);try{const w=await fetch(`${Qt}/api/admin/finance/payouts`,{headers:Z()});if(w.ok){const $=await w.json();v($.payouts||[])}}catch{r("Failed to fetch payouts","error")}finally{A(!1)}},ee=async()=>{A(!0);try{const w=await fetch(`${Qt}/api/admin/finance/transactions`,{headers:Z()});if(w.ok){const $=await w.json();y($.transactions||[])}}catch{r("Failed to fetch transactions","error")}finally{A(!1)}},le=async()=>{A(!0);try{const w=await fetch(`${Qt}/api/admin/finance/refunds`,{headers:Z()});if(w.ok){const $=await w.json();N($.refunds||[])}}catch{r("Failed to fetch refunds","error")}finally{A(!1)}},M=async()=>{A(!0);try{(await fetch(`${Qt}/api/admin/finance/settlements/process`,{method:"POST",headers:Z()})).ok?(r("Settlements processed successfully","success"),ae()):r("Failed to process settlements","error")}catch{r("Failed to process settlements","error")}finally{A(!1)}},Y=async()=>{A(!0);try{(await fetch(`${Qt}/api/admin/finance/payouts/execute`,{method:"POST",headers:Z()})).ok?(r("Payouts executed successfully","success"),F()):r("Failed to execute payouts","error")}catch{r("Failed to execute payouts","error")}finally{A(!1)}},je=async()=>{try{const w=await fetch(`${Qt}/api/admin/finance/gst-reports?period=${me}`,{headers:Z()});if(w.ok){const $=await w.blob(),G=window.URL.createObjectURL($),ge=document.createElement("a");ge.href=G,ge.download=`gst-report-${me}.pdf`,document.body.appendChild(ge),ge.click(),window.URL.revokeObjectURL(G),document.body.removeChild(ge),r("GST report downloaded","success")}}catch{r("Failed to download GST report","error")}},we=async()=>{try{const w=await fetch(`${Qt}/api/admin/finance-staff`,{headers:Z()});if(w.ok){const $=await w.json();P($.staff||[])}}catch{r("Failed to fetch financial staff","error")}},W=async()=>{if(!K.full_name||!K.email||!K.phone_number){r("Please fill all required fields","error");return}A(!0);try{const w=await fetch(`${Qt}/api/admin/finance-staff`,{method:"POST",headers:Z(),body:JSON.stringify(K)});if(w.ok)r("Financial staff created successfully","success"),we(),H(!1),I({full_name:"",email:"",phone_number:"",password:""}),z(null);else{const $=await w.json().catch(()=>({}));r($.error?.message||"Failed to create staff member","error")}}catch{r("Failed to create staff member","error")}finally{A(!1)}},ce=async()=>{if(!X||!K.email){r("Please fill all fields","error");return}A(!0);try{const w=await fetch(`${Qt}/api/admin/finance-staff/${X.id}`,{method:"PUT",headers:Z(),body:JSON.stringify({email:K.email,username:K.full_name})});if(w.ok)r("Staff member updated successfully","success"),we(),H(!1),I({full_name:"",email:"",phone_number:"",password:""}),z(null);else{const $=await w.json().catch(()=>({}));r($.error?.message||"Failed to update staff member","error")}}catch{r("Failed to update staff member","error")}finally{A(!1)}},ue=async w=>{if(confirm("Are you sure you want to deactivate this staff member?")){A(!0);try{const $=await fetch(`${Qt}/api/admin/finance-staff/${w}`,{method:"DELETE",headers:Z()});if($.ok)r("Staff member deactivated successfully","success"),we();else{const G=await $.json().catch(()=>({}));r(G.error?.message||"Failed to deactivate staff member","error")}}catch{r("Failed to deactivate staff member","error")}finally{A(!1)}}},he=async()=>{A(!0);try{if(!(localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token"))){r("Authentication required. Please login again.","error"),A(!1);return}const $=await fetch(`${Qt}/api/admin/appointments?limit=1000`,{headers:Z()});if($.ok){const G=await $.json(),ge=G.data||G.bookings||[];k(ge)}else{const G=await $.json().catch(()=>({}));console.error("Bookings fetch error:",$.status,G),r(`Failed to fetch bookings: ${G.error?.message||$.statusText}`,"error")}}catch(w){console.error("Bookings fetch exception:",w),r(`Failed to fetch bookings: ${w instanceof Error?w.message:"Network error"}`,"error")}finally{A(!1)}},Ae=async()=>{A(!0);try{const w=await fetch(`${Qt}/api/admin/providers`,{headers:Z()});if(w.ok){const $=await w.json(),G=$.data||$.providers||(Array.isArray($)?$:[]);console.log("Vendors fetched:",G.length);const ge=await Promise.all(G.map(async ve=>{try{const Se=await fetch(`${Qt}/api/admin/orders?provider_id=${ve.id}&limit=1000`,{headers:Z()});let Re=0,xe=0,Qe=0;if(Se.ok){const ze=await Se.json(),te=ze.orders||ze.data||[];console.log(`Provider ${ve.id}: Fetched ${te.length} total orders`);const Pe=["confirmed","packed","out_for_delivery","delivered","shipment"],ke=te.filter(be=>Pe.includes(be.status));console.log(`Provider ${ve.id}: Found ${ke.length} completed orders (statuses: ${Pe.join(", ")})`),xe=ke.length,ke.forEach(be=>{const Le=parseFloat(be.total_amount||0);!isNaN(Le)&&Le>0&&(Re+=Le),(be.items||[]).forEach(mt=>{const C=parseInt(mt.quantity||0);!isNaN(C)&&C>0&&(Qe+=C)})})}return{...ve,total_revenue:Re,total_orders:xe,total_products_sold:Qe}}catch(Se){return console.error(`Error fetching sales for provider ${ve.id}:`,Se),{...ve,total_revenue:0,total_orders:0,total_products_sold:0}}}));U(ge)}else{const $=await w.json().catch(()=>({}));console.error("Vendors fetch error:",w.status,$),r(`Failed to fetch vendors: ${$.error?.message||w.statusText}`,"error")}}catch(w){console.error("Vendors fetch exception:",w),r(`Failed to fetch vendors: ${w instanceof Error?w.message:"Network error"}`,"error")}finally{A(!1)}};return e.jsxs(Lt,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Finance Panel"}),e.jsx("p",{className:"text-gray-600",children:"Manage GMV, settlements, payouts, GST reports, and financial transactions."})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("select",{value:me,onChange:w=>se(w.target.value),className:"px-3 py-2 border border-primary/20 rounded-lg bg-white text-sm focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]})})]}),O?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[d==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(Be,{children:[e.jsx(Ze,{children:e.jsxs(Ye,{className:"flex items-center gap-2",children:[e.jsx(dr,{className:"text-primary",size:20}),"Total GMV"]})}),e.jsxs(He,{children:[e.jsxs("p",{className:"text-3xl font-bold text-primary",children:["",u?.total_gmv?.toLocaleString()||"0"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Period: ",me]})]})]}),e.jsxs(Be,{children:[e.jsx(Ze,{children:e.jsxs(Ye,{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"text-primary",size:20}),"Pending Settlements"]})}),e.jsxs(He,{children:[e.jsx("p",{className:"text-3xl font-bold text-primary",children:x.filter(w=>w.status==="pending").length}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Awaiting processing"})]})]}),e.jsxs(Be,{children:[e.jsx(Ze,{children:e.jsxs(Ye,{className:"flex items-center gap-2",children:[e.jsx(Vs,{className:"text-primary",size:20}),"Pending Payouts"]})}),e.jsxs(He,{children:[e.jsx("p",{className:"text-3xl font-bold text-primary",children:h.filter(w=>w.status==="pending").length}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Ready for execution"})]})]})]}),d==="settlements"&&e.jsxs(Be,{children:[e.jsxs(Ze,{className:"flex flex-row items-center justify-between",children:[e.jsx(Ye,{children:"Settlements"}),e.jsxs("button",{onClick:M,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center gap-2",children:[e.jsx(ws,{size:18}),"Process Settlements"]})]}),e.jsx(He,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-primary/20",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Vendor"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Status"}),E&&e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Allocated To"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Date"})]})}),e.jsx("tbody",{children:x.map(w=>e.jsxs("tr",{className:"border-b border-primary/10 hover:bg-secondary/50",children:[e.jsx("td",{className:"px-4 py-3",children:w.vendor_name}),e.jsxs("td",{className:"px-4 py-3 font-medium",children:["",w.amount.toLocaleString()]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.status==="processed"?"bg-secondary text-primary":"bg-primary/20 text-primary"}`,children:w.status})}),E&&e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:w.allocated_staff_name?e.jsx("span",{className:"text-primary",children:w.allocated_staff_name}):e.jsx("span",{className:"text-gray-400",children:"Not allocated"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(w.created_at).toLocaleDateString()})]},w.id))})]})})})]}),d==="payouts"&&e.jsxs(Be,{children:[e.jsxs(Ze,{className:"flex flex-row items-center justify-between",children:[e.jsx(Ye,{children:"Payouts"}),e.jsxs("button",{onClick:Y,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center gap-2",children:[e.jsx(Vs,{size:18}),"Execute Payouts"]})]}),e.jsx(He,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-primary/20",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Vendor"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Status"}),E&&e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Allocated To"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Executed At"})]})}),e.jsx("tbody",{children:h.map(w=>e.jsxs("tr",{className:"border-b border-primary/10 hover:bg-secondary/50",children:[e.jsx("td",{className:"px-4 py-3",children:w.vendor_name}),e.jsxs("td",{className:"px-4 py-3 font-medium",children:["",w.amount.toLocaleString()]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.status==="executed"?"bg-secondary text-primary":"bg-primary/20 text-primary"}`,children:w.status})}),E&&e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:w.allocated_staff_name?e.jsx("span",{className:"text-primary",children:w.allocated_staff_name}):e.jsx("span",{className:"text-gray-400",children:"Not allocated"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:w.executed_at?new Date(w.executed_at).toLocaleDateString():"-"})]},w.id))})]})})})]}),d==="gst"&&e.jsxs(Be,{children:[e.jsxs(Ze,{className:"flex flex-row items-center justify-between",children:[e.jsx(Ye,{children:"GST Reports"}),e.jsxs("button",{onClick:je,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center gap-2",children:[e.jsx(hp,{size:18}),"Download Report"]})]}),e.jsx(He,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Hs,{className:"mx-auto text-primary mb-4",size:48}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Generate and download GST compliance reports"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Select date range and click Download Report"})]})})]}),d==="transactions"&&e.jsxs(Be,{children:[e.jsx(Ze,{children:e.jsx(Ye,{children:"All Transactions"})}),e.jsx(He,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-primary/20",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Date"})]})}),e.jsx("tbody",{children:j.map(w=>e.jsxs("tr",{className:"border-b border-primary/10 hover:bg-secondary/50",children:[e.jsx("td",{className:"px-4 py-3",children:w.type}),e.jsxs("td",{className:"px-4 py-3 font-medium",children:["",w.amount.toLocaleString()]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.status==="completed"?"bg-secondary text-primary":"bg-primary/20 text-primary"}`,children:w.status})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(w.created_at).toLocaleDateString()})]},w.id))})]})})})]}),d==="refunds"&&e.jsxs(Be,{children:[e.jsx(Ze,{children:e.jsx(Ye,{children:"Refunds"})}),e.jsx(He,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-primary/20",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Order ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Reason"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Status"}),E&&e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Allocated To"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Date"})]})}),e.jsx("tbody",{children:_.map(w=>e.jsxs("tr",{className:"border-b border-primary/10 hover:bg-secondary/50",children:[e.jsxs("td",{className:"px-4 py-3",children:["#",w.order_id]}),e.jsxs("td",{className:"px-4 py-3 font-medium",children:["",w.amount.toLocaleString()]}),e.jsx("td",{className:"px-4 py-3",children:w.reason}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.status==="processed"?"bg-secondary text-primary":"bg-primary/20 text-primary"}`,children:w.status})}),E&&e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:w.allocated_staff_name?e.jsx("span",{className:"text-primary",children:w.allocated_staff_name}):e.jsx("span",{className:"text-gray-400",children:"Not allocated"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(w.created_at).toLocaleDateString()})]},w.id))})]})})})]}),d==="bookings"&&e.jsxs(Be,{children:[e.jsxs(Ze,{className:"flex flex-row items-center justify-between",children:[e.jsx(Ye,{children:"All Bookings"}),e.jsxs("button",{onClick:he,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center gap-2",children:[e.jsx(ws,{size:18}),"Refresh"]})]}),e.jsx(He,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-primary/20",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"User"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Service"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Provider"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Payment Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Date"})]})}),e.jsx("tbody",{children:b.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-gray-500",children:"No bookings found"})}):b.map(w=>e.jsxs("tr",{className:"border-b border-primary/10 hover:bg-secondary/50",children:[e.jsxs("td",{className:"px-4 py-3",children:["#",w.id]}),e.jsx("td",{className:"px-4 py-3",children:w.user_name||w.full_name||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:w.service_name||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:w.provider_name||"Unassigned"}),e.jsxs("td",{className:"px-4 py-3 font-medium",children:["",(w.payment_amount||w.total_amount||0).toLocaleString()]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.payment_status==="paid"?"bg-green-100 text-green-800":w.payment_status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:w.payment_status||"pending"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.status==="completed"?"bg-green-100 text-green-800":w.status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:w.status||"pending"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(w.created_at||w.booking_date).toLocaleDateString()})]},w.id))})]})})})]}),d==="vendors"&&e.jsxs(Be,{children:[e.jsxs(Ze,{className:"flex flex-row items-center justify-between",children:[e.jsx(Ye,{children:"Vendors & Sales Data"}),e.jsxs("button",{onClick:Ae,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center gap-2",children:[e.jsx(ws,{size:18}),"Refresh"]})]}),e.jsx(He,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-primary/20",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Vendor Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Phone"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Total Orders"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Products Sold"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Total Revenue"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Status"})]})}),e.jsx("tbody",{children:T.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"No vendors found"})}):T.map(w=>e.jsxs("tr",{className:"border-b border-primary/10 hover:bg-secondary/50",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:w.full_name||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:w.email||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:w.phone_number||"N/A"}),e.jsx("td",{className:"px-4 py-3 font-medium",children:w.total_orders||0}),e.jsx("td",{className:"px-4 py-3 font-medium",children:w.total_products_sold||0}),e.jsxs("td",{className:"px-4 py-3 font-medium text-primary",children:["",(w.total_revenue||0).toLocaleString()]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.status==="approved"?"bg-green-100 text-green-800":w.status==="suspended"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:w.status||"pending"})})]},w.id))})]})})})]}),d==="staff"&&E&&e.jsxs(Be,{children:[e.jsx(Ze,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ye,{children:"Financial Staff Management"}),e.jsxs("button",{onClick:()=>{z(null),I({full_name:"",email:"",phone_number:"",password:""}),H(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(ks,{size:18}),"Add Staff"]})]})}),e.jsx(He,{children:B.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No financial staff members found"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(w=>e.jsxs("div",{className:"p-4 border border-primary/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium",children:w.username||w.email}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${w.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.status||"active"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:w.email}),e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Created: ",new Date(w.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:()=>{z(w),I({full_name:w.username||"",email:w.email,phone_number:"",password:""}),H(!0)},className:"flex-1 px-3 py-1.5 bg-primary text-white rounded text-sm hover:bg-primary-dark transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>ue(w.id),className:"px-3 py-1.5 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors",children:e.jsx(Dr,{size:14})})]})]},w.id))})})]})]})]}),re&&E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs(Be,{className:"w-full max-w-md mx-4",children:[e.jsx(Ze,{children:e.jsx(Ye,{children:X?"Edit Financial Staff":"Add Financial Staff"})}),e.jsxs(He,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:K.full_name,onChange:w=>I({...K,full_name:w.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),e.jsx("input",{type:"email",value:K.email,onChange:w=>I({...K,email:w.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:K.phone_number,onChange:w=>I({...K,phone_number:w.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter phone number"})]}),!X&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Password ",e.jsx("span",{className:"text-gray-500 text-xs",children:"(Optional - default: FinanceStaff@123)"})]}),e.jsx("input",{type:"password",value:K.password||"",onChange:w=>I({...K,password:w.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter password (optional)"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>{H(!1),I({full_name:"",email:"",phone_number:"",password:""}),z(null)},className:"flex-1 px-4 py-2 border border-primary/20 text-primary rounded-lg hover:bg-secondary transition-colors",children:"Cancel"}),e.jsx("button",{onClick:X?ce:W,disabled:O||!K.full_name||!K.email||!K.phone_number,className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:opacity-50",children:O?"Saving...":X?"Update":"Create"})]})]})]})})]})},rl="https://kwikmedi.mycartly.in",mv=()=>{const{addToast:r}=_t(),{user:l}=Ut(),[i,d]=m.useState([]),[u,p]=m.useState(!1),[x,g]=m.useState(""),[h,v]=m.useState(!1),[j,y]=m.useState({full_name:"",email:"",phone_number:"",password:""}),[_,N]=m.useState(null),B=l?.role==="admin",P=()=>({Authorization:`Bearer ${localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token")||""}`,"Content-Type":"application/json"});m.useEffect(()=>{b()},[]);const b=async()=>{p(!0);try{const A=await fetch(`${rl}/api/admin/finance-staff`,{headers:P()});if(A.ok){const me=await A.json();d(me.staff||[])}else r("Failed to fetch financial staff","error")}catch{r("Failed to fetch financial staff","error")}finally{p(!1)}},k=async()=>{if(!j.full_name||!j.email||!j.phone_number){r("Please fill all required fields","error");return}p(!0);try{const A=await fetch(`${rl}/api/admin/finance-staff`,{method:"POST",headers:P(),body:JSON.stringify(j)});if(A.ok)r("Financial staff created successfully","success"),b(),v(!1),y({full_name:"",email:"",phone_number:"",password:""}),N(null);else{const me=await A.json().catch(()=>({}));r(me.error?.message||"Failed to create staff member","error")}}catch{r("Failed to create staff member","error")}finally{p(!1)}},T=async()=>{if(!_||!j.email){r("Please fill all fields","error");return}p(!0);try{const A=await fetch(`${rl}/api/admin/finance-staff/${_.id}`,{method:"PUT",headers:P(),body:JSON.stringify({email:j.email,username:j.full_name,phone_number:j.phone_number})});if(A.ok)r("Staff member updated successfully","success"),b(),v(!1),y({full_name:"",email:"",phone_number:"",password:""}),N(null);else{const me=await A.json().catch(()=>({}));r(me.error?.message||"Failed to update staff member","error")}}catch{r("Failed to update staff member","error")}finally{p(!1)}},U=async A=>{if(confirm("Are you sure you want to deactivate this staff member?")){p(!0);try{const me=await fetch(`${rl}/api/admin/finance-staff/${A}`,{method:"DELETE",headers:P()});if(me.ok)r("Staff member deactivated successfully","success"),b();else{const se=await me.json().catch(()=>({}));r(se.error?.message||"Failed to deactivate staff member","error")}}catch{r("Failed to deactivate staff member","error")}finally{p(!1)}}},O=i.filter(A=>A.username?.toLowerCase().includes(x.toLowerCase())||A.email?.toLowerCase().includes(x.toLowerCase()));return e.jsx(Lt,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Finance Staff Management"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage finance staff who will handle your finance panel"})]}),B&&e.jsxs("button",{onClick:()=>{N(null),y({full_name:"",email:"",phone_number:"",password:""}),v(!0)},className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center gap-2",children:[e.jsx(ks,{size:18}),"Add Finance Staff"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 max-w-md",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:x,onChange:A=>g(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("button",{onClick:b,className:"px-4 py-2 border border-primary/20 text-primary rounded-lg hover:bg-secondary transition-colors flex items-center gap-2",children:[e.jsx(ws,{size:18}),"Refresh"]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Total Staff: ",e.jsx("span",{className:"font-semibold text-primary",children:O.length})]})]}),u&&i.length===0?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):O.length===0?e.jsx(Be,{children:e.jsxs(He,{className:"py-12 text-center",children:[e.jsx(Nt,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-500 text-lg mb-2",children:x?"No staff members found matching your search":"No financial staff members yet"}),B&&!x&&e.jsxs("button",{onClick:()=>{N(null),y({full_name:"",email:"",phone_number:"",password:""}),v(!0)},className:"mt-4 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors inline-flex items-center gap-2",children:[e.jsx(ks,{size:18}),"Add Your First Finance Staff"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:O.map(A=>e.jsx(Be,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(He,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(Nt,{className:"text-primary",size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:A.username||A.email}),e.jsx("p",{className:"text-sm text-gray-600",children:A.email})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:A.status||"active"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Role:"}),e.jsx("span",{className:"font-medium",children:A.role_type||"Finance Admin"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Created:"}),e.jsx("span",{className:"font-medium",children:new Date(A.created_at).toLocaleDateString()})]})]}),B&&e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-primary/10",children:[e.jsxs("button",{onClick:()=>{N(A),y({full_name:A.username||"",email:A.email,phone_number:"",password:""}),v(!0)},className:"flex-1 px-3 py-2 bg-primary text-white rounded-lg text-sm hover:bg-primary-dark transition-colors flex items-center justify-center gap-2",children:[e.jsx(vp,{size:14}),"Edit"]}),e.jsx("button",{onClick:()=>U(A.id),className:"px-3 py-2 bg-red-500 text-white rounded-lg text-sm hover:bg-red-600 transition-colors flex items-center justify-center",children:e.jsx(Dr,{size:14})})]})]})},A.id))}),h&&B&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs(Be,{className:"w-full max-w-md mx-4",children:[e.jsx(Ze,{children:e.jsx(Ye,{children:_?"Edit Financial Staff":"Add Financial Staff"})}),e.jsxs(He,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",value:j.full_name,onChange:A=>y({...j,full_name:A.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:j.email,onChange:A=>y({...j,email:A.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:j.phone_number,onChange:A=>y({...j,phone_number:A.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter phone number"})]}),!_&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Password ",e.jsx("span",{className:"text-gray-500 text-xs",children:"(Optional - default: FinanceStaff@123)"})]}),e.jsx("input",{type:"password",value:j.password||"",onChange:A=>y({...j,password:A.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter password (optional)"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>{v(!1),y({full_name:"",email:"",phone_number:"",password:""}),N(null)},className:"flex-1 px-4 py-2 border border-primary/20 text-primary rounded-lg hover:bg-secondary transition-colors",children:"Cancel"}),e.jsx("button",{onClick:_?T:k,disabled:u||!j.full_name||!j.email||!j.phone_number,className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:opacity-50",children:u?"Saving...":_?"Update":"Create"})]})]})]})})]})})},pv={},Pt="https://kwikmedi.mycartly.in",xv=pv?.VITE_BACKEND_BASE_URL||"https://kwikmedi.mycartly.in",nl=r=>{const l=typeof r=="string"?r.trim():"";if(!l)return"";if(/^https?:\/\//i.test(l))return l;let i=l.replace(/\\/g,"/");return i.startsWith("public/")?i=i.slice(7):i.startsWith("/public/")&&(i=i.slice(8)),i=i.startsWith("/")?i:`/${i}`,`${xv}${i}`},uc=r=>{if(!r)return null;try{if(r.startsWith("[")&&r.endsWith("]")){const l=JSON.parse(r);if(Array.isArray(l)&&l.length>0)return nl(l[0])}if(r.includes(",")){const l=r.split(",").map(i=>i.trim());if(l.length>0)return nl(l[0])}return nl(r)}catch{return nl(r)}},hv=()=>{const{addToast:r}=_t(),{user:l}=Ut(),[i,d]=m.useState([]),[u,p]=m.useState([]),[x,g]=m.useState([]),[h,v]=m.useState(!1),[j,y]=m.useState(!1),[_,N]=m.useState("prescriptions"),B=l?.role==="admin",[P,b]=m.useState(""),[k,T]=m.useState("all"),[U,O]=m.useState(null),[A,me]=m.useState(null),[se,re]=m.useState(!1),[H,K]=m.useState(""),[I,X]=m.useState(!1),[z,E]=m.useState(!1),[Z,ne]=m.useState(!1),[ae,F]=m.useState(!1),[ee,le]=m.useState(!1),[M,Y]=m.useState([]),[je,we]=m.useState([]),[W,ce]=m.useState(!1),[ue,he]=m.useState({}),[Ae,w]=m.useState(null),[$,G]=m.useState({full_name:"",email:"",phone_number:"",password:""}),[ge,ve]=m.useState(null),Se=m.useRef(null),Re=m.useRef(null),xe=()=>({Authorization:`Bearer ${localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token")}`,"Content-Type":"application/json"});m.useEffect(()=>(_==="prescriptions"?Qe():_==="orders"&&it(),B&&ze(),te(),Re.current=window.setInterval(()=>{te(!0)},5e3),()=>{Re.current&&window.clearInterval(Re.current)}),[k,B,_]);const Qe=async()=>{v(!0);try{const R=l?.role||"",Ne=R==="helping_staff"||R==="helping_staff_admin";let Ke;Ne?Ke=k==="all"?`${Pt}/api/admin/helping-staff/prescriptions`:`${Pt}/api/admin/helping-staff/prescriptions?status=${k}`:Ke=k==="all"?`${Pt}/api/admin/prescriptions`:`${Pt}/api/admin/prescriptions?status=${k}`;const kt=xe();console.log("Fetching prescriptions from:",Ke),console.log("User role:",l?.role,"isHelpingStaff:",Ne);const lt=await fetch(Ke,{headers:kt});if(console.log("Response status:",lt.status),lt.ok){const vt=await lt.json();console.log("Fetched prescriptions:",vt),d(vt.prescriptions||[])}else if(lt.status===404)if(Ne){console.log("Helping staff endpoint not found, trying admin endpoint");const vt=k==="all"?`${Pt}/api/admin/prescriptions`:`${Pt}/api/admin/prescriptions?status=${k}`,ls=await fetch(vt,{headers:kt});if(ls.ok){const os=await ls.json();d(os.prescriptions||[])}else d([])}else d([]);else if(lt.status===401){const vt=await lt.json().catch(()=>({}));console.error("Authentication failed:",vt),r("Authentication failed. Please log in again.","error"),d([])}else{const vt=await lt.json().catch(()=>({}));console.error("Failed to fetch prescriptions:",lt.status,vt),r(vt.error?.message||`Failed to fetch prescriptions (${lt.status})`,"error"),d([])}}catch(R){console.error("Error fetching prescriptions:",R),r(R?.message||"Failed to fetch prescriptions. Please check your connection.","error"),d([])}finally{v(!1)}},ze=async()=>{try{const R=await fetch(`${Pt}/api/admin/helping-staff`,{headers:xe()});if(R.ok){const Ne=await R.json();console.log("Fetched staff members:",Ne),p(Ne.staff||[])}else{const Ne=await R.json().catch(()=>({}));console.error("Failed to fetch staff members:",Ne),p([])}}catch(R){console.error("Error fetching staff members:",R),p([])}},te=async(R=!1,Ne=!1)=>{try{const Ke=Ne||ee?`${Pt}/api/admin/helping-staff/notifications`:`${Pt}/api/admin/helping-staff/notifications?unread_only=true`,kt=await fetch(Ke,{headers:xe()});if(kt.ok){const ls=((await kt.json()).notifications||[]).filter((cs,Ss,Ht)=>Ss===Ht.findIndex(Gs=>Gs.id===cs.id)),os=M.filter(cs=>cs.status==="sent").length;if(!R){const cs=ls.filter(Ss=>Ss.status==="sent").length;if(cs>os){if(Se.current)try{Se.current.currentTime=0,await Se.current.play()}catch(Ht){console.log("Audio play failed:",Ht)}const Ss=cs-os;r(`${Ss} new notification${Ss>1?"s":""}!`,"success")}}Y(ls)}}catch(Ke){console.error("Failed to fetch notifications",Ke)}},Pe=async(R,Ne)=>{try{(await fetch(`${Pt}/api/admin/helping-staff/notifications/${R}/read`,{method:"PUT",headers:xe()})).ok&&(Y(kt=>kt.map(lt=>lt.id===R?{...lt,status:"read",read_at:new Date().toISOString()}:lt)),Ne&&(_!=="orders"?(N("orders"),await it()):x.length===0&&await it(),setTimeout(()=>{const kt=document.getElementById(`order-${Ne}`);kt?(kt.scrollIntoView({behavior:"smooth",block:"center"}),kt.classList.add("ring-4","ring-blue-500"),setTimeout(()=>{kt.classList.remove("ring-4","ring-blue-500")},2e3)):setTimeout(()=>{const lt=document.getElementById(`order-${Ne}`);lt&&(lt.scrollIntoView({behavior:"smooth",block:"center"}),lt.classList.add("ring-4","ring-blue-500"),setTimeout(()=>{lt.classList.remove("ring-4","ring-blue-500")},2e3))},1e3)},500)))}catch(Ke){console.error("Failed to mark notification as read",Ke),r("Failed to mark notification as read","error")}},ke=async()=>{try{(await fetch(`${Pt}/api/admin/helping-staff/notifications/read-all`,{method:"PUT",headers:xe()})).ok&&(Y(Ne=>Ne.map(Ke=>({...Ke,status:"read",read_at:Ke.read_at||new Date().toISOString()}))),r("All notifications marked as read","success"))}catch(R){console.error("Failed to mark all notifications as read",R),r("Failed to mark all notifications as read","error")}};m.useEffect(()=>{ee&&(async()=>{try{const Ne=await fetch(`${Pt}/api/admin/helping-staff/notifications`,{headers:xe()});if(Ne.ok){const lt=((await Ne.json()).notifications||[]).filter((vt,ls,os)=>ls===os.findIndex(cs=>cs.id===vt.id));Y(lt)}}catch(Ne){console.error("Failed to fetch all notifications",Ne)}})()},[ee]);const be=async()=>{if(!$.full_name||!$.email||!$.phone_number){r("Please fill all required fields","error");return}v(!0);try{const R=await fetch(`${Pt}/api/admin/helping-staff`,{method:"POST",headers:xe(),body:JSON.stringify($)});if(R.ok)r("Staff member created successfully","success"),ze(),F(!1),G({full_name:"",email:"",phone_number:"",password:""}),ve(null);else{const Ne=await R.json().catch(()=>({}));r(Ne.error?.message||"Failed to create staff member","error")}}catch{r("Failed to create staff member","error")}finally{v(!1)}},Le=async()=>{if(!ge||!$.full_name||!$.email||!$.phone_number){r("Please fill all fields","error");return}v(!0);try{const R=await fetch(`${Pt}/api/admin/helping-staff/${ge.id}`,{method:"PUT",headers:xe(),body:JSON.stringify($)});if(R.ok)r("Staff member updated successfully","success"),ze(),F(!1),G({full_name:"",email:"",phone_number:""}),ve(null);else{const Ne=await R.json().catch(()=>({}));r(Ne.error?.message||"Failed to update staff member","error")}}catch{r("Failed to update staff member","error")}finally{v(!1)}},at=async R=>{if(confirm("Are you sure you want to delete this staff member?")){v(!0);try{const Ne=await fetch(`${Pt}/api/admin/helping-staff/${R}`,{method:"DELETE",headers:xe()});if(Ne.ok)r("Staff member deleted successfully","success"),ze();else{const Ke=await Ne.json().catch(()=>({}));r(Ke.error?.message||"Failed to delete staff member","error")}}catch{r("Failed to delete staff member","error")}finally{v(!1)}}},mt=R=>{R?(ve(R),G({full_name:R.full_name,email:R.email,phone_number:R.phone_number||"",password:""})):(ve(null),G({full_name:"",email:"",phone_number:"",password:""})),F(!0)},C=async(R,Ne)=>{v(!0);try{(await fetch(`${Pt}/api/admin/prescription/assign`,{method:"PUT",headers:xe(),body:JSON.stringify({prescription_id:R,staff_id:Ne})})).ok?(r("Prescription assigned successfully","success"),Qe(),ne(!1),O(null)):r("Failed to assign prescription","error")}catch{r("Failed to assign prescription","error")}finally{v(!1)}},Me=async R=>{ce(!0);try{const Ne=await fetch(`${Pt}/api/admin/prescription/${R}/medicine-list`,{headers:xe()});if(Ne.ok){const Ke=await Ne.json();we(Ke.medicines||[]),he({})}else{const Ke=await Ne.json().catch(()=>({}));r(Ke.error?.message||"Failed to fetch medicine list","error")}}catch{r("Failed to fetch medicine list","error")}finally{ce(!1)}},qe=async R=>{v(!0);try{if(Object.keys(ue).length!==je.length){r(`Please approve or reject all ${je.length} medicines`,"error"),v(!1);return}const Ne=await fetch(`${Pt}/api/admin/prescription/${R}/approve-medicines`,{method:"POST",headers:xe(),body:JSON.stringify({medicine_approvals:ue})});if(Ne.ok)r("Prescription medicines approved and released to vendors","success"),Qe(),E(!1),O(null),we([]),he({});else{const Ke=await Ne.json().catch(()=>({}));r(Ke.error?.message||"Failed to approve medicines","error")}}catch{r("Failed to approve medicines","error")}finally{v(!1)}},it=async()=>{y(!0);try{const R=await fetch(`${Pt}/api/admin/helping-staff/orders/pending-approval`,{headers:xe()});if(R.ok){const Ne=await R.json();g(Ne.orders||[])}else{const Ne=await R.json().catch(()=>({}));console.error("Failed to fetch pending orders:",Ne),r(Ne.error?.message||"Failed to fetch pending orders","error"),g([])}}catch(R){console.error("Error fetching pending orders:",R),r(R?.message||"Failed to fetch pending orders","error"),g([])}finally{y(!1)}},[ft,Bt]=m.useState({}),Ve=async R=>{y(!0);try{const Ne=await fetch(`${Pt}/api/admin/helping-staff/orders/${R}/approve`,{method:"POST",headers:xe(),body:JSON.stringify({medicine_approvals:ft})});if(Ne.ok)r("Order approved successfully","success"),it(),re(!1),me(null),Bt({});else{const Ke=await Ne.json().catch(()=>({}));r(Ke.error?.message||"Failed to approve order","error")}}catch(Ne){console.error("Error approving order:",Ne),r("Failed to approve order","error")}finally{y(!1)}},mr=async(R,Ne)=>{y(!0);try{const Ke=await fetch(`${Pt}/api/admin/helping-staff/orders/${R}/reject`,{method:"POST",headers:xe(),body:JSON.stringify({reason:Ne})});if(Ke.ok)r("Order rejected successfully","success"),it(),re(!1),X(!1),me(null),K("");else{const kt=await Ke.json().catch(()=>({}));r(kt.error?.message||"Failed to reject order","error")}}catch(Ke){console.error("Error rejecting order:",Ke),r("Failed to reject order","error")}finally{y(!1)}},ta=R=>({uploaded:"bg-secondary text-primary border border-primary/20",assigned:"bg-primary/20 text-primary",digitized:"bg-secondary text-primary border border-primary/20",released_to_vendor:"bg-primary/20 text-primary",fulfilled:"bg-secondary text-primary border border-primary/20",rejected:"bg-primary/20 text-primary"})[R]||"bg-primary/20 text-primary",Ds=i.filter(R=>R.user_name?.toLowerCase().includes(P.toLowerCase())||R.id.toString().includes(P));return e.jsx(Lt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Helping Staff Panel"}),e.jsx("p",{className:"text-gray-600",children:"Manage prescription processing, assignment, and digitization."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>le(!ee),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center gap-2 relative",children:[e.jsx(Oa,{size:18}),"Notifications",M.filter(R=>R.status==="sent").length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:M.filter(R=>R.status==="sent").length})]}),B&&e.jsxs("button",{onClick:()=>mt(),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(ks,{size:18}),"Add Staff"]}),e.jsxs("button",{onClick:()=>{_==="prescriptions"?Qe():it()},className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center gap-2",children:[e.jsx(ws,{size:18}),"Refresh"]})]})]}),e.jsxs("div",{className:"flex gap-2 border-b border-primary/20",children:[e.jsxs("button",{onClick:()=>N("prescriptions"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${_==="prescriptions"?"border-primary text-primary":"border-transparent text-gray-600 hover:text-primary"}`,children:[e.jsx(Hs,{size:18}),"Prescriptions"]}),e.jsxs("button",{onClick:()=>N("orders"),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${_==="orders"?"border-primary text-primary":"border-transparent text-gray-600 hover:text-primary"}`,children:[e.jsx(an,{size:18}),"Orders Pending Approval",x.length>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:x.length})]})]}),ee&&e.jsxs(Be,{className:"mb-6",children:[e.jsx(Ze,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ye,{children:"Notifications"}),M.filter(R=>R.status==="sent").length>0&&e.jsxs("span",{className:"text-sm text-gray-500",children:[M.filter(R=>R.status==="sent").length," unread"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[M.filter(R=>R.status==="sent").length>0&&e.jsx("button",{onClick:ke,className:"text-xs text-primary hover:text-primary-dark font-medium",children:"Mark all as read"}),e.jsx("button",{onClick:()=>le(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(ut,{size:20})})]})]})}),e.jsx(He,{children:M.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No notifications"}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:M.map((R,Ne)=>{const Ke=R.status==="sent";return e.jsx("div",{onClick:()=>Pe(R.id,R.order_id),className:`p-3 rounded-lg border cursor-pointer transition-colors ${Ke?"bg-blue-50 border-blue-200 hover:bg-blue-100":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-sm",children:R.title}),Ke&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:R.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(R.created_at).toLocaleString()})]})})},`notification-${R.id}-${R.created_at||Ne}`)})})})]}),B&&e.jsxs(Be,{className:"mb-6",children:[e.jsx(Ze,{children:e.jsx(Ye,{children:"Staff Members"})}),e.jsx(He,{children:u.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No staff members found"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(R=>e.jsxs("div",{className:"p-4 border border-primary/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium",children:R.full_name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${R.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:R.status||"active"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:R.email}),R.phone_number&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:R.phone_number}),R.pending_prescriptions_count!==void 0&&e.jsxs("p",{className:"text-xs text-blue-600 mb-2",children:["Pending: ",R.pending_prescriptions_count]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:()=>mt(R),className:"flex-1 px-3 py-1.5 bg-primary text-white rounded text-sm hover:bg-primary-dark transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>at(R.id),className:"px-3 py-1.5 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors",children:e.jsx(Dr,{size:14})})]})]},R.id))})})]}),_==="prescriptions"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search by user name or prescription ID...",value:P,onChange:R=>b(R.target.value),className:"w-full pl-10 pr-4 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})}),e.jsxs("select",{value:k,onChange:R=>T(R.target.value),className:"px-4 py-2 border border-primary/20 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"uploaded",children:"Uploaded"}),e.jsx("option",{value:"assigned",children:"Assigned"}),e.jsx("option",{value:"digitized",children:"Digitized"}),e.jsx("option",{value:"released_to_vendor",children:"Released to Vendor"}),e.jsx("option",{value:"fulfilled",children:"Fulfilled"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ds.map(R=>e.jsxs(Be,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Ze,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ye,{className:"text-lg",children:["Prescription #",R.id]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ta(R.status)}`,children:R.status.replace("_"," ")})]})}),e.jsxs(He,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Nt,{size:16,className:"text-primary"}),e.jsx("span",{children:R.user_name||`User #${R.user_id}`})]}),R.assigned_staff_name&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Assigned to: ",R.assigned_staff_name]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(as,{size:14}),new Date(R.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[R.status==="uploaded"&&e.jsxs("button",{onClick:()=>{O(R),ne(!0)},className:"flex-1 px-3 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors text-sm flex items-center justify-center gap-2",children:[e.jsx(Nt,{size:14}),"Assign"]}),R.status==="assigned"&&e.jsxs("button",{onClick:()=>{O(R),Me(R.id),E(!0)},className:"flex-1 px-3 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors text-sm flex items-center justify-center gap-2",children:[e.jsx(an,{size:14}),"Medicine List"]}),e.jsxs("button",{onClick:()=>{O(R),window.open(R.prescription_url,"_blank")},className:"px-3 py-2 border border-primary/20 text-primary rounded-lg hover:bg-secondary transition-colors text-sm flex items-center justify-center gap-2",children:[e.jsx(Hs,{size:14}),"View"]})]})]})]},R.id))}),Ds.length===0&&!h&&e.jsx(Be,{children:e.jsxs(He,{className:"text-center py-12",children:[e.jsx(Hs,{className:"mx-auto text-primary mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"No prescriptions found"})]})})]}),_==="orders"&&e.jsxs(e.Fragment,{children:[j?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(R=>e.jsxs(Be,{id:`order-${R.id}`,className:"hover:shadow-lg transition-shadow",children:[e.jsx(Ze,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ye,{className:"text-lg",children:["Order #",R.id]}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Pending Approval"})]})}),e.jsxs(He,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Nt,{size:16,className:"text-primary"}),e.jsx("span",{children:R.user_name||`User #${R.user_id}`})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Items:"})," ",R.items_count]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total:"})," ",typeof R.total_amount=="number"?R.total_amount.toFixed(2):parseFloat(R.total_amount||0).toFixed(2)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",R.delivery_address,", ",R.delivery_city," - ",R.delivery_pincode]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(as,{size:14}),new Date(R.created_at).toLocaleDateString()]}),e.jsx("div",{className:"flex gap-2 pt-2",children:e.jsxs("button",{onClick:()=>{me(R),Bt({}),re(!0)},className:"flex-1 px-3 py-2 border border-primary/20 text-primary rounded-lg hover:bg-secondary transition-colors text-sm flex items-center justify-center gap-2",children:[e.jsx(Hs,{size:14}),"View Details"]})})]})]},R.id))}),x.length===0&&!j&&e.jsx(Be,{children:e.jsxs(He,{className:"text-center py-12",children:[e.jsx(an,{className:"mx-auto text-primary mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"No orders pending approval"})]})})]}),Z&&U&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs(Be,{className:"w-full max-w-md mx-4",children:[e.jsx(Ze,{children:e.jsx(Ye,{children:"Assign Prescription"})}),e.jsxs(He,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Staff Member"}),e.jsxs("select",{value:Ae||"",onChange:R=>w(Number(R.target.value)),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Select staff member..."}),u.map(R=>e.jsxs("option",{value:R.id,children:[R.full_name," (",R.email,")"]},R.id))]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{ne(!1),O(null),w(null)},className:"flex-1 px-4 py-2 border border-primary/20 text-primary rounded-lg hover:bg-secondary transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{Ae&&C(U.id,Ae)},disabled:!Ae||h,className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:opacity-50",children:"Assign"})]})]})]})}),z&&U&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 overflow-y-auto",children:e.jsxs(Be,{className:"w-full max-w-4xl",children:[e.jsx(Ze,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ye,{children:["Medicine List - Prescription #",U.id]}),e.jsx("button",{onClick:()=>{E(!1),O(null),we([]),he({})},className:"text-gray-500 hover:text-gray-700",children:e.jsx(ut,{size:24})})]})}),e.jsxs(He,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Prescription Image"}),e.jsx("div",{className:"border border-primary/20 rounded-lg p-4 bg-gray-50 flex justify-center items-start overflow-auto max-h-96",children:U.prescription_url?e.jsx("img",{src:U.prescription_url,alt:"Prescription",className:"max-w-full max-h-80 h-auto rounded-lg border border-gray-200 object-contain",onError:R=>{const Ne=R.target;Ne.style.display="none";const Ke=Ne.parentElement;Ke&&(Ke.innerHTML='<p class="text-gray-500">Failed to load prescription image</p>')}}):e.jsx("p",{className:"text-gray-500",children:"Prescription image not available"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Prescription Required Medicines - Approve or Reject"}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"Please review the prescription image and approve or reject each medicine. Approved medicines will be sent to vendors."})}),W?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e.jsx("div",{className:"border border-primary/20 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-primary/10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Medicine"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Manufacturer"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Price"}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Action"})]})}),e.jsx("tbody",{children:je.map(R=>{const Ne=uc(R.images);return e.jsxs("tr",{className:"border-t border-primary/20",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[Ne&&e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("img",{src:Ne,alt:R.medicine_name,className:"w-16 h-16 object-cover rounded border border-gray-200",onError:Ke=>{Ke.target.style.display="none"}}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"px-2 py-0.5 text-xs bg-yellow-100 text-yellow-800 rounded whitespace-nowrap",children:"Prescription Required"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium",children:R.medicine_name}),R.medicine_type&&e.jsx("div",{className:"text-xs text-gray-500",children:R.medicine_type}),!Ne&&e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"px-2 py-0.5 text-xs bg-yellow-100 text-yellow-800 rounded",children:"Prescription Required"})})]})]})}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:R.manufacturer_name||"-"}),e.jsxs("td",{className:"px-4 py-2 text-right",children:["",parseFloat(R.price||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("button",{onClick:()=>{he({...ue,[R.id]:"approved"})},className:`px-3 py-1 rounded text-xs font-medium transition-colors ${ue[R.id]==="approved"?"bg-green-500 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:[e.jsx(ns,{size:14,className:"inline mr-1"}),"Approve"]}),e.jsxs("button",{onClick:()=>{he({...ue,[R.id]:"rejected"})},className:`px-3 py-1 rounded text-xs font-medium transition-colors ${ue[R.id]==="rejected"?"bg-red-500 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[e.jsx(or,{size:14,className:"inline mr-1"}),"Reject"]})]})})]},R.id)})})]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-primary/20",children:[e.jsx("button",{onClick:()=>{E(!1),O(null),we([]),he({})},className:"flex-1 px-4 py-2 border border-primary/20 text-primary rounded-lg hover:bg-secondary transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>{U&&qe(U.id)},disabled:h||Object.keys(ue).length!==je.length,className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(ns,{size:18}),Object.keys(ue).length>0?`Approve & Send to Vendors (${Object.keys(ue).length}/${je.length})`:"Approve & Send to Vendors"]})]})]})]})}),ae&&B&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs(Be,{className:"w-full max-w-md mx-4",children:[e.jsx(Ze,{children:e.jsx(Ye,{children:ge?"Edit Staff Member":"Add Staff Member"})}),e.jsxs(He,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:$.full_name,onChange:R=>G({...$,full_name:R.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),e.jsx("input",{type:"email",value:$.email,onChange:R=>G({...$,email:R.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:$.phone_number,onChange:R=>G({...$,phone_number:R.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter phone number"})]}),!ge&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Password ",e.jsx("span",{className:"text-gray-500 text-xs",children:"(Optional - default: HelpingStaff@123)"})]}),e.jsx("input",{type:"password",value:$.password||"",onChange:R=>G({...$,password:R.target.value}),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter password (leave empty for default)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'If left empty, default password "HelpingStaff@123" will be set'})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{F(!1),G({full_name:"",email:"",phone_number:"",password:""}),ve(null)},className:"flex-1 px-4 py-2 border border-primary/20 text-primary rounded-lg hover:bg-secondary transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ge?Le:be,disabled:h,className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:opacity-50",children:ge?"Update":"Create"})]})]})]})}),se&&A&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 overflow-y-auto",children:e.jsxs(Be,{className:"w-full max-w-4xl",children:[e.jsx(Ze,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ye,{children:["Order #",A.id," - Prescription Verification"]}),e.jsx("button",{onClick:()=>{re(!1),me(null),Bt({})},className:"text-gray-500 hover:text-gray-700",children:e.jsx(ut,{size:24})})]})}),e.jsxs(He,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Customer Information"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",A.full_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",A.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",A.phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User ID:"})," ",A.user_id]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Delivery Address"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsx("p",{children:A.delivery_address}),e.jsxs("p",{children:[A.delivery_city," - ",A.delivery_pincode]})]})]})]}),A.prescription_required_items&&A.prescription_required_items.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Prescription Required Medicines - Verify & Approve"}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"Please review the prescription and approve or reject each medicine. All medicines must be verified before the order can be released to vendors."})}),e.jsx("div",{className:"border border-primary/20 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-primary/10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Medicine"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Quantity"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Price"}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Action"})]})}),e.jsx("tbody",{children:A.prescription_required_items.map(R=>{const Ne=uc(R.medicine_images);return e.jsxs("tr",{className:"border-t border-primary/20",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[Ne&&e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("img",{src:Ne,alt:R.medicine_name,className:"w-16 h-16 object-cover rounded border border-gray-200",onError:Ke=>{Ke.target.style.display="none"}}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"px-2 py-0.5 text-xs bg-yellow-100 text-yellow-800 rounded whitespace-nowrap",children:"Prescription Required"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium",children:R.medicine_name}),!Ne&&e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"px-2 py-0.5 text-xs bg-yellow-100 text-yellow-800 rounded",children:"Prescription Required"})})]})]})}),e.jsx("td",{className:"px-4 py-2 text-right",children:R.quantity}),e.jsxs("td",{className:"px-4 py-2 text-right",children:["",R.price.toFixed(2)]}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("button",{onClick:()=>{Bt({...ft,[R.id]:"approved"})},className:`px-3 py-1 rounded text-xs font-medium transition-colors ${ft[R.id]==="approved"?"bg-green-500 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:[e.jsx(ns,{size:14,className:"inline mr-1"}),"Approve"]}),e.jsxs("button",{onClick:()=>{Bt({...ft,[R.id]:"rejected"})},className:`px-3 py-1 rounded text-xs font-medium transition-colors ${ft[R.id]==="rejected"?"bg-red-500 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[e.jsx(or,{size:14,className:"inline mr-1"}),"Reject"]})]})})]},R.id)})})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"All Order Items"}),e.jsx("div",{className:"border border-primary/20 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-primary/10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Medicine"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Quantity"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Price"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Total"})]})}),e.jsxs("tbody",{children:[A.items?.map(R=>{const Ne=uc(R.medicine_images);return e.jsxs("tr",{className:"border-t border-primary/20",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[Ne&&e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("img",{src:Ne,alt:R.medicine_name,className:"w-16 h-16 object-cover rounded border border-gray-200",onError:Ke=>{Ke.target.style.display="none"}}),R.prescription_required&&e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"px-2 py-0.5 text-xs bg-yellow-100 text-yellow-800 rounded whitespace-nowrap",children:"Prescription Required"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium",children:R.medicine_name}),!Ne&&R.prescription_required&&e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"px-2 py-0.5 text-xs bg-yellow-100 text-yellow-800 rounded",children:"Prescription Required"})})]})]})}),e.jsx("td",{className:"px-4 py-2 text-right",children:R.quantity}),e.jsxs("td",{className:"px-4 py-2 text-right",children:["",R.price.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-2 text-right",children:["",(R.price*R.quantity).toFixed(2)]})]},R.id)}),e.jsxs("tr",{className:"border-t-2 border-primary/20 font-semibold",children:[e.jsx("td",{colSpan:3,className:"px-4 py-2 text-right",children:"Total Amount:"}),e.jsxs("td",{className:"px-4 py-2 text-right",children:["",typeof A.total_amount=="number"?A.total_amount.toFixed(2):parseFloat(A.total_amount||0).toFixed(2)]})]})]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Prescription"}),e.jsx("div",{className:"border border-primary/20 rounded-lg p-4 bg-gray-50",children:A.prescription_url?e.jsx("img",{src:A.prescription_url,alt:"Prescription",className:"max-w-full h-auto rounded-lg border border-gray-200",onError:R=>{const Ne=R.target;Ne.style.display="none";const Ke=Ne.parentElement;Ke&&(Ke.innerHTML='<p class="text-gray-500">Failed to load prescription image</p>')}}):e.jsx("p",{className:"text-gray-500",children:"Prescription image not available"})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-primary/20",children:[e.jsxs("button",{onClick:()=>{X(!0)},className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors flex items-center justify-center gap-2",disabled:j,children:[e.jsx(or,{size:18}),"Reject Order"]}),e.jsxs("button",{onClick:()=>{const R=A.prescription_required_items?.length||0,Ne=Object.keys(ft).length;if(R>0&&Ne!==R){r(`Please approve or reject all ${R} prescription-required medicines`,"error");return}Ve(A.id)},className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center gap-2",disabled:j,children:[e.jsx(ns,{size:18}),A.prescription_required_items&&A.prescription_required_items.length>0?`Approve Order (${Object.keys(ft).length}/${A.prescription_required_items.length})`:"Approve Order"]})]})]})]})}),I&&A&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs(Be,{className:"w-full max-w-md mx-4",children:[e.jsx(Ze,{children:e.jsxs(Ye,{children:["Reject Order #",A.id]})}),e.jsxs(He,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rejection Reason"}),e.jsx("textarea",{value:H,onChange:R=>K(R.target.value),className:"w-full px-3 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",rows:4,placeholder:"Enter reason for rejection..."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{X(!1),K("")},className:"flex-1 px-4 py-2 border border-primary/20 text-primary rounded-lg hover:bg-secondary transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{A&&mr(A.id,H||"Prescription verification failed")},disabled:j,className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50",children:"Reject Order"})]})]})]})}),e.jsx("audio",{ref:Se,preload:"auto",children:e.jsx("source",{src:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OSfTQ8MUKfj8LZjHAY4kdfyzHksBSR3x/DdkEAKFF606euoVRQKRp/g8r5sIQUrgc7y2Yk2CBtpvfDkn00PDFCn4/C2YxwGOJHX8sx5LAUkd8fw3ZBAC",type:"audio/wav"})})]})})},Wm="https://kwikmedi.mycartly.in",fv=()=>{const{addToast:r}=_t(),[l,i]=m.useState([]),[d,u]=m.useState(!1),[p,x]=m.useState(""),[g,h]=m.useState("all"),v=()=>({Authorization:`Bearer ${localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token")}`,"Content-Type":"application/json"});m.useEffect(()=>{j()},[g]);const j=async()=>{u(!0);try{const N=g==="all"?`${Wm}/api/admin/prescriptions`:`${Wm}/api/admin/prescriptions?status=${g}`,B=await fetch(N,{headers:v()});if(B.ok){const P=await B.json();console.log("Fetched prescriptions:",P),i(P.prescriptions||[])}else{const P=await B.json().catch(()=>({}));console.error("Failed to fetch prescriptions:",P),r(P.error?.message||"Failed to fetch prescriptions","error"),i([])}}catch(N){console.error("Error fetching prescriptions:",N),r("Failed to fetch prescriptions","error"),i([])}finally{u(!1)}},y=N=>({uploaded:"bg-yellow-100 text-yellow-800 border border-yellow-300",assigned:"bg-blue-100 text-blue-800 border border-blue-300",digitized:"bg-green-100 text-green-800 border border-green-300",released_to_vendor:"bg-purple-100 text-purple-800 border border-purple-300",fulfilled:"bg-gray-100 text-gray-800 border border-gray-300",rejected:"bg-red-100 text-red-800 border border-red-300"})[N]||"bg-gray-100 text-gray-800 border border-gray-300",_=l.filter(N=>N.user_name?.toLowerCase().includes(p.toLowerCase())||N.id.toString().includes(p)||N.assigned_staff_name?.toLowerCase().includes(p.toLowerCase())||N.assigned_vendor_name?.toLowerCase().includes(p.toLowerCase()));return e.jsx(Lt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"All Prescriptions"}),e.jsx("p",{className:"text-gray-600",children:"View all prescriptions with staff and vendor assignments"})]}),e.jsxs("button",{onClick:j,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center gap-2",children:[e.jsx(ws,{size:18}),"Refresh"]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search by user, staff, vendor, or prescription ID...",value:p,onChange:N=>x(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})}),e.jsxs("select",{value:g,onChange:N=>h(N.target.value),className:"px-4 py-2 border border-primary/20 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"uploaded",children:"Uploaded"}),e.jsx("option",{value:"assigned",children:"Assigned"}),e.jsx("option",{value:"digitized",children:"Digitized"}),e.jsx("option",{value:"released_to_vendor",children:"Released to Vendor"}),e.jsx("option",{value:"fulfilled",children:"Fulfilled"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e.jsx("div",{className:"grid grid-cols-1 gap-6",children:_.map(N=>e.jsxs(Be,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Ze,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ye,{className:"text-lg",children:["Prescription #",N.id]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${y(N.status)}`,children:N.status.replace(/_/g," ").toUpperCase()})]})}),e.jsxs(He,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Nt,{size:16,className:"text-primary"}),e.jsx("span",{className:"font-medium",children:"User:"}),e.jsx("span",{children:N.user_name||`User #${N.user_id}`})]}),N.assigned_staff_name&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(bp,{size:16,className:"text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Assigned Staff:"}),e.jsx("span",{children:N.assigned_staff_name}),N.assigned_at&&e.jsxs("span",{className:"text-gray-500 text-xs",children:["(",new Date(N.assigned_at).toLocaleString(),")"]})]}),N.digitized_by_staff_name&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ns,{size:16,className:"text-green-500"}),e.jsx("span",{className:"font-medium",children:"Digitized By:"}),e.jsx("span",{children:N.digitized_by_staff_name}),N.digitized_at&&e.jsxs("span",{className:"text-gray-500 text-xs",children:["(",new Date(N.digitized_at).toLocaleString(),")"]})]}),N.assigned_vendor_name&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(pp,{size:16,className:"text-purple-500"}),e.jsx("span",{className:"font-medium",children:"Assigned Vendor:"}),e.jsx("span",{children:N.assigned_vendor_name}),N.assigned_vendor_email&&e.jsxs("span",{className:"text-gray-500 text-xs",children:["(",N.assigned_vendor_email,")"]})]}),N.items&&N.items.length>0&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Medicine Items:"}),e.jsx("div",{className:"space-y-1",children:N.items.map((B,P)=>e.jsxs("div",{className:"text-xs text-gray-600",children:[" ",B.medicine_name," - Qty: ",B.quantity,", Days: ",B.days,B.dosage&&`, Dosage: ${B.dosage}`]},P))})]}),e.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500 pt-2 border-t",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(as,{size:12}),e.jsxs("span",{children:["Created: ",new Date(N.created_at).toLocaleString()]})]})}),e.jsx("div",{className:"flex gap-2 pt-2",children:e.jsxs("button",{onClick:()=>{window.open(N.prescription_url,"_blank")},className:"px-3 py-2 border border-primary/20 text-primary rounded-lg hover:bg-secondary transition-colors text-sm flex items-center justify-center gap-2",children:[e.jsx(Hs,{size:14}),"View Image"]})})]})]},N.id))}),_.length===0&&!d&&e.jsx(Be,{children:e.jsxs(He,{className:"text-center py-12",children:[e.jsx(Hs,{className:"mx-auto text-primary mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"No prescriptions found"})]})})]})})},gv=({transaction:r,expandedTransaction:l,onToggleDetails:i,formatDate:d,formatCurrency:u})=>{const p=g=>{switch(g){case"completed":return"bg-green-100 text-green-700";case"pending":return"bg-yellow-100 text-yellow-700";case"failed":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},x=g=>{switch(g){case"card":return e.jsx(Vs,{size:16,className:"text-gray-500"});case"upi":return e.jsx(Np,{size:16,className:"text-gray-500"});case"net_banking":return e.jsx(bg,{size:16,className:"text-gray-500"});default:return null}};return e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors duration-150",children:[e.jsxs("td",{className:"py-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:r.transaction_id}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Booking: ",r.booking_id]})]}),e.jsxs("td",{className:"py-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:r.provider_business_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[r.user_name,"  ",r.provider_name]})]}),e.jsxs("td",{className:"py-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:u(r.amount)}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Platform: ",u(r.platform_fee)]})]}),e.jsxs("td",{className:"py-4",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p(r.status)}`,children:r.status.charAt(0).toUpperCase()+r.status.slice(1)}),r.failure_reason&&e.jsx("div",{className:"text-xs text-red-500 mt-1",children:r.failure_reason})]}),e.jsxs("td",{className:"py-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:d(r.created_at)}),r.completed_at&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Completed: ",d(r.completed_at)]})]}),e.jsxs("td",{className:"py-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[x(r.payment_method),e.jsx("span",{className:"text-sm text-gray-600",children:r.payment_method.split("_").map(g=>g.charAt(0).toUpperCase()+g.slice(1)).join(" ")})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["via ",r.payment_gateway]})]}),e.jsx("td",{className:"py-4",children:e.jsxs(ie,{onClick:()=>i(r.id),className:"flex items-center space-x-1 bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(cn,{size:14}),e.jsx("span",{children:"Details"}),l===r.id?e.jsx(Zn,{size:14}):e.jsx(Rr,{size:14})]})})]})},yv=({transaction:r,formatDate:l,formatCurrency:i,onRefundClick:d})=>e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"py-4 bg-gray-50",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Vs,{size:18,className:"text-white"})}),e.jsx("h4",{className:"text-lg font-semibold text-blue-900",children:"Transaction Overview"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-purple-600 text-xs font-bold",children:"#"})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Transaction ID"})]}),e.jsx("p",{className:"text-sm font-mono text-gray-800 bg-gray-50 px-2 py-1 rounded",children:r.transaction_id})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-green-600 text-xs",children:""})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Amount"})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:i(r.amount)})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-orange-600 text-xs",children:""})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Status"})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.status})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-lg p-4 border border-emerald-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-emerald-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-white text-sm",children:""})}),e.jsx("h4",{className:"text-lg font-semibold text-emerald-900",children:"Payment Details"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-emerald-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-blue-600 text-xs",children:""})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Payment Method"})]}),e.jsx("p",{className:"text-sm text-gray-800",children:r.payment_method}),e.jsxs("p",{className:"text-xs text-gray-500",children:["via ",r.payment_gateway]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-emerald-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-green-600 text-xs",children:""})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Fees"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm text-gray-800",children:["Platform: ",i(r.platform_fee)]}),e.jsxs("p",{className:"text-sm text-gray-800",children:["Gateway: ",i(r.gateway_fee)]}),e.jsxs("p",{className:"text-sm text-gray-800",children:["Provider: ",i(r.provider_amount)]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-white text-sm",children:""})}),e.jsx("h4",{className:"text-lg font-semibold text-purple-900",children:"User & Provider"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-purple-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-purple-600 text-xs",children:""})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"User"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.user.name}),e.jsx("p",{className:"text-sm text-gray-600",children:r.user.email}),e.jsx("p",{className:"text-sm text-gray-600",children:r.user.phone})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-purple-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-6 h-6 bg-pink-100 rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-pink-600 text-xs",children:""})}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Provider"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.provider.name}),e.jsx("p",{className:"text-sm text-gray-600",children:r.provider.business_name}),e.jsx("p",{className:"text-sm text-gray-600",children:r.provider.email})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg p-4 border border-orange-100",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-white text-sm",children:""})}),e.jsx("h4",{className:"text-lg font-semibold text-orange-900",children:"Booking Details"})]}),e.jsx("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-orange-100",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:l(r.booking.date)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Time"}),e.jsx("p",{className:"text-sm text-gray-900",children:r.booking.time})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Amount"}),e.jsx("p",{className:"text-sm text-gray-900",children:i(r.booking.amount)})]})]})})]}),r.refunds&&r.refunds.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-rose-50 rounded-lg p-4 border border-red-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-white text-sm",children:""})}),e.jsx("h4",{className:"text-lg font-semibold text-red-900",children:"Refunds"})]}),e.jsxs("div",{className:"bg-red-100 text-red-700 px-3 py-1 rounded-full text-sm font-medium",children:[r.refunds.length," Refund",r.refunds.length!==1?"s":""]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-red-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-red-50 border-b border-red-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-red-900",children:"Refund ID"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-red-900",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-red-900",children:"Reason"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-red-900",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-red-900",children:"Processed At"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:r.refunds.map(u=>e.jsxs("tr",{className:"hover:bg-red-50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.refund_id})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("p",{className:"text-sm text-gray-900",children:i(u.amount)})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("p",{className:"text-sm text-gray-900",children:u.reason})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${u.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:u.status})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("p",{className:"text-sm text-gray-900",children:l(u.processed_at)})})]},u.id))})]})})})]}),r.wallet_transactions&&r.wallet_transactions.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-cyan-50 to-blue-50 rounded-lg p-4 border border-cyan-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-cyan-500 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-white text-sm",children:""})}),e.jsx("h4",{className:"text-lg font-semibold text-cyan-900",children:"Wallet Transactions"})]}),e.jsxs("div",{className:"bg-cyan-100 text-cyan-700 px-3 py-1 rounded-full text-sm font-medium",children:[r.wallet_transactions.length," Transaction",r.wallet_transactions.length!==1?"s":""]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-cyan-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-cyan-50 border-b border-cyan-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-cyan-900",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-cyan-900",children:"Type"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-cyan-900",children:"Category"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-cyan-900",children:"Description"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-cyan-900",children:"Balance After"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-cyan-900",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:r.wallet_transactions.map(u=>e.jsxs("tr",{className:"hover:bg-cyan-50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsx("p",{className:`text-sm font-medium ${u.type==="credit"?"text-green-600":"text-red-600"}`,children:i(u.amount)})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${u.type==="credit"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.type})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("p",{className:"text-sm text-gray-900",children:u.category})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("p",{className:"text-sm text-gray-900",children:u.description})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("p",{className:"text-sm text-gray-900",children:i(u.balance_after)})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("p",{className:"text-sm text-gray-900",children:l(u.created_at)})})]},u.id))})]})})})]}),r.refunds.length===0&&e.jsx("div",{className:"flex justify-end",children:e.jsxs(ie,{onClick:()=>d(r),className:"flex items-center space-x-1 bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(Dg,{size:14}),e.jsx("span",{children:"Process Refund"})]})})]})})}),vv=({searchTerm:r,onSearchChange:l})=>e.jsxs("div",{className:"relative w-64",children:[e.jsx(is,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search transactions...",className:"pl-8 pr-4 py-2 w-full rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/20",value:r,onChange:i=>l(i.target.value)})]}),jv=({currentPage:r,totalPages:l,startIndex:i,itemsPerPage:d,totalItems:u,onPageChange:p})=>e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",i+1," to ",Math.min(i+d,u)," of ",u," transactions"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{onClick:()=>p(Math.max(r-1,1)),disabled:r===1,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(on,{size:16})}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",r," of ",l]}),e.jsx(ie,{onClick:()=>p(Math.min(r+1,l)),disabled:r===l,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Js,{size:16})})]})]}),bv=({isOpen:r,onClose:l,onSubmit:i,transaction:d,isSubmitting:u,formatCurrency:p})=>{const[x,g]=xs.useState({amount:d.amount,reason:"",reason_description:""}),h=v=>{v.preventDefault(),i(x)};return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Process Refund"}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:e.jsx(ut,{size:20})})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transaction Amount"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:p(d.amount)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Refund Amount *"}),e.jsx("input",{type:"number",required:!0,min:"0",max:d.amount,step:"0.01",value:x.amount,onChange:v=>g({...x,amount:parseFloat(v.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),e.jsxs("select",{required:!0,value:x.reason,onChange:v=>g({...x,reason:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"",children:"Select a reason"}),e.jsx("option",{value:"customer_request",children:"Customer Request"}),e.jsx("option",{value:"service_not_provided",children:"Service Not Provided"}),e.jsx("option",{value:"quality_issues",children:"Quality Issues"}),e.jsx("option",{value:"duplicate_payment",children:"Duplicate Payment"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason Description *"}),e.jsx("textarea",{required:!0,value:x.reason_description,onChange:v=>g({...x,reason_description:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",rows:3,placeholder:"Provide additional details about the refund reason..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(ie,{type:"button",onClick:l,className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx(ie,{type:"submit",disabled:u,className:"bg-red-600 hover:bg-red-700 text-white",children:u?"Processing...":"Process Refund"})]})]})]})}):null},Nv={},mc=Nv?.VITE_API_BASE_URL||"https://kwikmedi.mycartly.in/api",wv=()=>{const{addToast:r}=_t(),[l,i]=m.useState([]),[d,u]=m.useState(!0),[p,x]=m.useState(""),[g,h]=m.useState(1),[v,j]=m.useState(null),[y,_]=m.useState(null),[N,B]=m.useState(!1),[P,b]=m.useState(!1),[k,T]=m.useState(1),[U,O]=m.useState(0),[A,me]=m.useState({status:"",payment_status:"",user_id:"",provider_id:"",booking_id:""}),se=10;m.useEffect(()=>{re()},[g,A]);const re=async()=>{const ae=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if(!ae){r("Please login to view transactions","error"),u(!1);return}try{u(!0);const F=new URLSearchParams;F.append("page",g.toString()),F.append("limit",se.toString()),p&&F.append("search",p),Object.entries(A).forEach(([Y,je])=>{je&&F.append(Y,je.toString())});const ee=await fetch(`${mc}/admin/transactions?${F.toString()}`,{headers:{Authorization:`Bearer ${ae}`,"Content-Type":"application/json"}});if(!ee.ok){if(ee.status===401){r("Authentication failed. Please log in again.","error");return}if(ee.status===404){console.warn("Transactions endpoint not found. Backend may not be implemented yet."),i([]),T(1),O(0),u(!1);return}throw new Error(`HTTP error! status: ${ee.status}`)}const le=await ee.json(),M=le.data||le.transactions||[];Array.isArray(M)?(i(M),T(le.pagination?.total_pages||Math.ceil(M.length/se)||1),O(le.pagination?.total||M.length||0)):(i([]),T(1),O(0))}catch(F){console.error("Error fetching transactions:",F),r("Failed to fetch transactions. The backend endpoint may not be implemented yet.","error"),i([]),T(1),O(0)}finally{u(!1)}},H=async ae=>{const F=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if(!F)return r("Please login to view transaction details","error"),null;try{const ee=await fetch(`${mc}/admin/transactions/${ae}`,{headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"}});if(!ee.ok){if(ee.status===404)return r("Transaction details not found","error"),null;throw new Error(`HTTP error! status: ${ee.status}`)}const le=await ee.json();return le.transaction||le.data||null}catch(ee){return console.error("Error fetching transaction details:",ee),r("Failed to fetch transaction details","error"),null}},K=async ae=>{if(v===ae)j(null),_(null);else{j(ae);const F=await H(ae);_(F)}},I=async ae=>{_(ae),B(!0)},X=async ae=>{if(!y)return;b(!0);const F=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");try{const ee=await fetch(`${mc}/admin/transactions/${y.id}/refund`,{method:"POST",headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"},body:JSON.stringify(ae)});if(!ee.ok)throw new Error(`HTTP error! status: ${ee.status}`);const le=await ee.json();r(le.message||"Refund processed successfully","success"),B(!1),_(null),re()}catch(ee){console.error("Error processing refund:",ee),r("Failed to process refund","error")}finally{b(!1)}},z=ae=>{if(!ae)return"N/A";try{return new Date(ae).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return ae}},E=ae=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(ae),Z=(ae,F)=>{me(ee=>({...ee,[ae]:F})),h(1)},ne=l.filter(ae=>{if(!p)return!0;const F=p.toLowerCase();return ae.transaction_id.toLowerCase().includes(F)||ae.user_name.toLowerCase().includes(F)||ae.provider_name.toLowerCase().includes(F)||ae.booking_id.toString().includes(F)});return e.jsx(Lt,{children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Transactions"}),e.jsx("p",{className:"text-gray-600",children:"Track and manage all payment transactions"})]}),e.jsxs(Be,{children:[e.jsxs(Ze,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ye,{children:"All Transactions"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(vv,{searchTerm:p,onSearchChange:x})})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[e.jsxs("select",{value:A.status,onChange:ae=>Z("status",ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("select",{value:A.payment_status,onChange:ae=>Z("payment_status",ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Payment Status"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"})]})]})]}),e.jsx(He,{children:d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):ne.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:l.length===0?"No transactions found.":"No transactions match your search criteria."}),l.length===0&&e.jsx("p",{className:"text-gray-400 text-sm mt-2"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50",children:[e.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Transaction ID"}),e.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"User / Provider"}),e.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Amount"}),e.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Date"}),e.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Payment Method"}),e.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:ne.map(ae=>e.jsxs(xs.Fragment,{children:[e.jsx(gv,{transaction:ae,expandedTransaction:v,onToggleDetails:K,formatDate:z,formatCurrency:E}),v===ae.id&&y&&e.jsx(yv,{transaction:y,formatDate:z,formatCurrency:E,onRefundClick:I})]},ae.id))})]})}),e.jsx(jv,{currentPage:g,totalPages:k,startIndex:(g-1)*se,itemsPerPage:se,totalItems:U,onPageChange:h})]})})]}),N&&y&&e.jsx(bv,{isOpen:N,transaction:y,onClose:()=>B(!1),onSubmit:X,isSubmitting:P,formatCurrency:E})]})})},Fn=({label:r,error:l,fullWidth:i=!1,className:d="",id:u,...p})=>{const x=u||`input-${Math.random().toString(36).substring(2,9)}`;return e.jsxs("div",{className:`${i?"w-full":""} mb-4`,children:[r&&e.jsx("label",{htmlFor:x,className:"block text-sm font-medium text-gray-700 mb-1",children:r}),e.jsx("input",{id:x,className:`px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary ${l?"border-error":""} ${i?"w-full":""} ${d}`,...p}),l&&e.jsx("p",{className:"mt-1 text-sm text-error",children:l})]})},_v=({open:r,onClose:l,children:i})=>r?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4 text-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 transition-opacity",onClick:l}),e.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:i})]})}):null,kv=({children:r})=>e.jsx("div",{className:"mt-3 text-center sm:mt-5",children:r}),Sv=({children:r})=>e.jsx("div",{className:"mb-4",children:r}),Cv=({children:r})=>e.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:r}),Pv={},On=Pv?.VITE_API_BASE_URL||"/api",Ev=()=>{const{addToast:r}=_t(),[l,i]=m.useState([]),[d,u]=m.useState(!1),[p,x]=m.useState(""),[g,h]=m.useState(!1),[v,j]=m.useState("add"),[y,_]=m.useState(null),[N,B]=m.useState(!1),[P,b]=m.useState({coupon_name:"",coupon_title:"",discount_amount:0,total_coupons:1,is_active:!0,is_featured:!1,valid_from:"",valid_until:""}),[k,T]=m.useState({}),U=async()=>{u(!0);try{const z=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token"),E=await fetch(`${On}/api/admin/coupons`,{method:"GET",headers:{"Content-Type":"application/json",...z?{Authorization:`Bearer ${z}`}:{}}}),Z=await E.json();if(E.ok&&Z.coupons&&Array.isArray(Z.coupons))i(Z.coupons);else throw new Error(Z.message||Z.error?.message||"Failed to fetch coupons")}catch(z){console.error("Error fetching coupons:",z);const E=z instanceof Error?z.message:"Failed to fetch coupons";r(E,"error")}finally{u(!1)}};m.useEffect(()=>{U()},[]);const O=()=>{j("add"),_(null),b({coupon_name:"",coupon_title:"",discount_amount:0,total_coupons:1,is_active:!0,is_featured:!1,valid_from:"",valid_until:""}),T({}),h(!0)},A=z=>{j("edit"),_(z),b({coupon_name:z.coupon_name,coupon_title:z.coupon_title,discount_amount:z.discount_amount,total_coupons:z.total_coupons,is_active:z.is_active,is_featured:z.is_featured,valid_from:z.valid_from?z.valid_from.split("T")[0]:"",valid_until:z.valid_until?z.valid_until.split("T")[0]:""}),T({}),h(!0)},me=()=>{const z={};return P.coupon_name.trim()?P.coupon_name.trim().length<3&&(z.coupon_name="Coupon code must be at least 3 characters"):z.coupon_name="Coupon code is required",P.coupon_title.trim()||(z.coupon_title="Coupon title is required"),P.discount_amount<=0&&(z.discount_amount="Discount amount must be greater than 0"),P.total_coupons<=0&&(z.total_coupons="Total coupons must be greater than 0"),P.valid_from&&P.valid_until&&new Date(P.valid_from)>new Date(P.valid_until)&&(z.valid_until="Valid until date must be after valid from date"),T(z),Object.keys(z).length===0},se=async z=>{if(z.preventDefault(),!!me()){B(!0);try{const E=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");if(!E){r("Please login to save coupon","error"),B(!1);return}const Z={coupon_name:P.coupon_name.trim().toUpperCase(),coupon_title:P.coupon_title.trim(),discount_amount:P.discount_amount,total_coupons:P.total_coupons,is_active:P.is_active,is_featured:P.is_featured};P.valid_from&&(Z.valid_from=`${P.valid_from}T00:00:00Z`),P.valid_until&&(Z.valid_until=`${P.valid_until}T23:59:59Z`);const ne=v==="add"?`${On}/api/admin/coupons`:`${On}/api/admin/coupons/${y?.id}`,ae=await fetch(ne,{method:v==="add"?"POST":"PUT",headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json"},body:JSON.stringify(Z)}),F=await ae.json();if(ae.ok)await U(),r(`Coupon ${v==="add"?"created":"updated"} successfully`,"success"),h(!1);else{const ee=F.error?.message||F.message||`Failed to ${v==="add"?"create":"update"} coupon`;throw new Error(ee)}}catch(E){console.error(`Error ${v==="add"?"creating":"updating"} coupon:`,E);const Z=E instanceof Error?E.message:`Failed to ${v==="add"?"create":"update"} coupon`;r(Z,"error")}finally{B(!1)}}},re=async z=>{if(confirm(`Are you sure you want to delete coupon "${z.coupon_name}"?`)){B(!0);try{const E=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");if(!E){r("Please login to delete coupon","error"),B(!1);return}const Z=await fetch(`${On}/api/admin/coupons/${z.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json"}}),ne=await Z.json();if(Z.ok)i(ae=>ae.filter(F=>F.id!==z.id)),r("Coupon deleted successfully","success");else throw new Error(ne.error?.message||ne.message||"Failed to delete coupon")}catch(E){console.error("Error deleting coupon:",E);const Z=E instanceof Error?E.message:"Failed to delete coupon";r(Z,"error")}finally{B(!1)}}},H=async z=>{try{const E=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");if(!E){r("Please login to update coupon","error");return}const Z=await fetch(`${On}/api/admin/coupons/${z.id}/toggle-active`,{method:"PUT",headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json"}}),ne=await Z.json();if(Z.ok)await U(),r(`Coupon ${z.is_active?"deactivated":"activated"} successfully`,"success");else throw new Error(ne.error?.message||ne.message||"Failed to update coupon")}catch(E){console.error("Error toggling coupon active status:",E);const Z=E instanceof Error?E.message:"Failed to update coupon";r(Z,"error")}},K=async z=>{try{const E=localStorage.getItem("admin_token")||localStorage.getItem("KwikMedi_token");if(!E){r("Please login to update coupon","error");return}const Z=await fetch(`${On}/api/admin/coupons/${z.id}/toggle-featured`,{method:"PUT",headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json"}}),ne=await Z.json();if(Z.ok)await U(),r(`Coupon ${z.is_featured?"unfeatured":"featured"} successfully`,"success");else throw new Error(ne.error?.message||ne.message||"Failed to update coupon")}catch(E){console.error("Error toggling coupon featured status:",E);const Z=E instanceof Error?E.message:"Failed to update coupon";r(Z,"error")}},I=l.filter(z=>z.coupon_name.toLowerCase().includes(p.toLowerCase())||z.coupon_title.toLowerCase().includes(p.toLowerCase())),X=z=>z?new Date(z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return e.jsxs(Lt,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Coupon Management"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage discount coupons for users"})]}),d?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading coupons..."})]}):e.jsxs(Be,{children:[e.jsxs(Ze,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(Ye,{children:"All Coupons"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search coupons...",value:p,onChange:z=>x(z.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary"})]}),e.jsxs(ie,{onClick:O,className:"flex items-center space-x-2",children:[e.jsx(ks,{size:16}),e.jsx("span",{children:"Add Coupon"})]})]})]}),e.jsx(He,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left pb-4",children:"Code"}),e.jsx("th",{className:"text-left pb-4",children:"Title"}),e.jsx("th",{className:"text-left pb-4",children:"Discount"}),e.jsx("th",{className:"text-left pb-4",children:"Usage"}),e.jsx("th",{className:"text-left pb-4",children:"Status"}),e.jsx("th",{className:"text-left pb-4",children:"Valid Dates"}),e.jsx("th",{className:"text-left pb-4",children:"Actions"})]})}),e.jsx("tbody",{children:I.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"py-8 text-center text-gray-500",children:p?"No coupons found matching your search":"No coupons found. Create your first coupon!"})}):I.map(z=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors duration-150",children:[e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-primary text-lg",children:z.coupon_name}),z.is_featured&&e.jsx(Ir,{className:"text-yellow-500 fill-yellow-500",size:16})]})}),e.jsx("td",{className:"py-4",children:e.jsx("div",{className:"text-gray-900 font-medium",children:z.coupon_title})}),e.jsx("td",{className:"py-4",children:e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["",z.discount_amount.toLocaleString("en-IN")]})}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-gray-900 font-medium",children:[z.used_count," / ",z.total_coupons]}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[z.remaining_count||z.total_coupons-z.used_count," remaining"]})]})}),e.jsx("td",{className:"py-4",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:()=>H(z),className:`flex items-center gap-1 px-2 py-1 rounded text-xs font-medium transition-colors ${z.is_active?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[z.is_active?e.jsx(Vg,{size:14}):e.jsx(Hg,{size:14}),z.is_active?"Active":"Inactive"]})})}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{children:["From: ",X(z.valid_from)]}),e.jsxs("div",{children:["Until: ",X(z.valid_until)]})]})}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>K(z),className:`p-2 rounded transition-colors ${z.is_featured?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:z.is_featured?"Unfeature":"Feature",children:z.is_featured?e.jsx(Ir,{className:"fill-current",size:16}):e.jsx(Ug,{size:16})}),e.jsx(ie,{onClick:()=>A(z),variant:"outline",size:"sm",children:e.jsx(Mg,{size:14})}),e.jsx(ie,{onClick:()=>re(z),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:z.used_count>0,title:z.used_count>0?"Cannot delete used coupon":"Delete coupon",children:e.jsx(Dr,{size:14})})]})})]},z.id))})]})})})]}),e.jsx(_v,{open:g,onClose:()=>h(!1),children:e.jsxs(kv,{children:[e.jsx(Sv,{children:e.jsx(Cv,{children:v==="add"?"Add New Coupon":"Edit Coupon"})}),e.jsxs("form",{onSubmit:se,className:"space-y-4",children:[e.jsx(Fn,{label:"Coupon Code *",type:"text",value:P.coupon_name,onChange:z=>{b({...P,coupon_name:z.target.value.toUpperCase()}),k.coupon_name&&T({...k,coupon_name:""})},error:k.coupon_name,placeholder:"SAVE10",disabled:v==="edit",fullWidth:!0}),e.jsx(Fn,{label:"Coupon Title *",type:"text",value:P.coupon_title,onChange:z=>{b({...P,coupon_title:z.target.value}),k.coupon_title&&T({...k,coupon_title:""})},error:k.coupon_title,placeholder:"Save 10 on booking",fullWidth:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Fn,{label:"Discount Amount () *",type:"number",step:"0.01",min:"0",value:P.discount_amount,onChange:z=>{b({...P,discount_amount:parseFloat(z.target.value)||0}),k.discount_amount&&T({...k,discount_amount:""})},error:k.discount_amount,fullWidth:!0}),e.jsx(Fn,{label:"Total Coupons *",type:"number",min:"1",value:P.total_coupons,onChange:z=>{b({...P,total_coupons:parseInt(z.target.value)||1}),k.total_coupons&&T({...k,total_coupons:""})},error:k.total_coupons,fullWidth:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Fn,{label:"Valid From (Optional)",type:"date",value:P.valid_from,onChange:z=>{b({...P,valid_from:z.target.value}),k.valid_from&&T({...k,valid_from:""})},error:k.valid_from,fullWidth:!0}),e.jsx(Fn,{label:"Valid Until (Optional)",type:"date",value:P.valid_until,onChange:z=>{b({...P,valid_until:z.target.value}),k.valid_until&&T({...k,valid_until:""})},error:k.valid_until,fullWidth:!0})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:P.is_active,onChange:z=>b({...P,is_active:z.target.checked}),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:P.is_featured,onChange:z=>b({...P,is_featured:z.target.checked}),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Featured"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx(ie,{type:"button",variant:"outline",onClick:()=>h(!1),disabled:N,children:"Cancel"}),e.jsx(ie,{type:"submit",disabled:N,isLoading:N,children:v==="add"?"Create Coupon":"Update Coupon"})]})]})]})})]})},Jm="https://kwikmedi.mycartly.in",Av=()=>{const{addToast:r}=_t(),[l,i]=m.useState([]),[d,u]=m.useState(!1),[p,x]=m.useState(""),[g,h]=m.useState("all"),[v,j]=m.useState("all"),y=()=>({Authorization:`Bearer ${localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token")||""}`,"Content-Type":"application/json"});m.useEffect(()=>{_()},[g,v]);const _=async()=>{u(!0);try{const b=new URLSearchParams;g!=="all"&&b.append("status",g),v!=="all"&&b.append("type",v);const k=await fetch(`${Jm}/api/admin/helpdesk/tickets?${b.toString()}`,{headers:y()});if(k.ok){const T=await k.json();i(T.tickets||[])}else r("Failed to fetch tickets","error"),i([])}catch{r("Failed to fetch tickets","error"),i([])}finally{u(!1)}},N=async(b,k)=>{u(!0);try{(await fetch(`${Jm}/api/admin/helpdesk/tickets/${b}/solve?type=${k}`,{method:"PUT",headers:y()})).ok?(r("Ticket marked as solved","success"),_()):r("Failed to mark ticket as solved","error")}catch{r("Failed to mark ticket as solved","error")}finally{u(!1)}},B=b=>({open:"bg-primary/20 text-primary",solved:"bg-secondary text-primary border border-primary/20",closed:"bg-primary/20 text-primary"})[b]||"bg-primary/20 text-primary",P=l.filter(b=>b.subject.toLowerCase().includes(p.toLowerCase())||b.message.toLowerCase().includes(p.toLowerCase())||b.user_name?.toLowerCase().includes(p.toLowerCase())||b.provider_name?.toLowerCase().includes(p.toLowerCase()));return e.jsx(Lt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Helpdesk Management"}),e.jsx("p",{className:"text-gray-600",children:"View and manage support tickets from users and vendors."})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search by subject, message, or user/vendor name...",value:p,onChange:b=>x(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-primary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})}),e.jsxs("select",{value:g,onChange:b=>h(b.target.value),className:"px-4 py-2 border border-primary/20 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"solved",children:"Solved"}),e.jsx("option",{value:"closed",children:"Closed"})]}),e.jsxs("select",{value:v,onChange:b=>j(b.target.value),className:"px-4 py-2 border border-primary/20 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"user",children:"User Tickets"}),e.jsx("option",{value:"vendor",children:"Vendor Tickets"})]})]}),d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e.jsx("div",{className:"space-y-4",children:P.map(b=>e.jsxs(Be,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Ze,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[b.type==="user"?e.jsx(Nt,{className:"text-primary",size:20}):e.jsx(ul,{className:"text-primary",size:20}),e.jsx(Ye,{className:"text-lg",children:b.subject})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${B(b.status)}`,children:b.status}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-secondary text-primary border border-primary/20",children:b.type==="user"?"User":"Vendor"})]})]})}),e.jsxs(He,{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-700",children:e.jsx("p",{className:"mb-2",children:b.message})}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[b.type==="user"?e.jsx(e.Fragment,{children:b.user_name&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nt,{size:14}),e.jsx("span",{children:b.user_name}),b.user_email&&e.jsxs("span",{className:"text-gray-400",children:["(",b.user_email,")"]})]})}):e.jsx(e.Fragment,{children:b.provider_name&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ul,{size:14}),e.jsx("span",{children:b.provider_name}),b.provider_email&&e.jsxs("span",{className:"text-gray-400",children:["(",b.provider_email,")"]})]})}),b.order_id&&e.jsxs("div",{className:"text-gray-500",children:["Order ID: #",b.order_id]}),e.jsx("div",{className:"text-gray-500",children:new Date(b.created_at).toLocaleDateString()})]}),b.status==="open"&&e.jsx("div",{className:"flex gap-2 pt-2",children:e.jsxs("button",{onClick:()=>N(b.id,b.type),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center gap-2",children:[e.jsx(ns,{size:16}),"Mark as Solved"]})})]})]},`${b.type}-${b.id}`))}),P.length===0&&!d&&e.jsx(Be,{children:e.jsxs(He,{className:"text-center py-12",children:[e.jsx(ar,{className:"mx-auto text-primary mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"No tickets found"})]})})]})})},Tv={},nn=Tv?.VITE_API_BASE_URL||"/api",zv=()=>{const{addToast:r}=_t(),[l,i]=m.useState([]),[d,u]=m.useState([]),[p,x]=m.useState(!0),[g,h]=m.useState(!1),[v,j]=m.useState(!1),[y,_]=m.useState(null),[N,B]=m.useState(!1),[P,b]=m.useState(""),[k,T]=m.useState(null),[U,O]=m.useState({booking_id:"",user_id:"",provider_id:"",bill_amount:"",notes:""}),[A,me]=m.useState({user_id:"",provider_id:"",booking_id:"",payment_status:""}),[se,re]=m.useState(!1),[H,K]=m.useState(null),[I,X]=m.useState(!1),[z,E]=m.useState(""),[Z,ne]=m.useState(!1),ae=m.useRef(null),F=m.useRef(null);m.useEffect(()=>{const w=$=>{F.current&&!F.current.contains($.target)&&ae.current&&!ae.current.contains($.target)&&ne(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[]),m.useEffect(()=>{ee(),le()},[A]);const ee=async()=>{const w=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if(w){x(!0);try{const $=new URLSearchParams;Object.entries(A).forEach(([ge,ve])=>{ve&&$.append(ge,ve)});const G=await fetch(`${nn}/admin/bills?${$.toString()}`,{headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"}});if(G.ok){const ge=await G.json();i(ge.bills||[])}}catch{r("Failed to load bills","error")}finally{x(!1)}}},le=async()=>{const w=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if(w)try{const $=await fetch(`${nn}/admin/appointments?limit=1000`,{headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"}});if($.ok){const G=await $.json(),ge=G.data||G.bookings||[];u(ge.map(ve=>({id:ve.id,user_id:ve.user_id,provider_id:ve.provider_id,service_name:ve.service_name||ve.service_title||"Service",user_name:ve.user_name||ve.user?.full_name||ve.user?.name||`User #${ve.user_id}`,provider_name:ve.provider_name||ve.provider?.full_name||ve.provider?.name||(ve.provider_id?`Provider #${ve.provider_id}`:"Unassigned"),payment_amount:ve.payment_amount||ve.total_amount||0})))}}catch($){console.error("Failed to load bookings:",$)}},M=async w=>{const $=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if($){X(!0),K(null);try{let G=null,ge=[],ve={total_amount:0,paid_amount:0,outstanding_amount:0};const Se=d.find(Re=>Re.id===w);Se&&(G={id:Se.id,user_id:Se.user_id,provider_id:Se.provider_id,service_name:Se.service_name,service_title:Se.service_name,user_name:Se.user_name,provider_name:Se.provider_name,payment_amount:Se.payment_amount||0,user_full_name:Se.user_name,provider_full_name:Se.provider_name});try{const Re=await fetch(`${nn}/admin/bills/booking/${w}`,{headers:{Authorization:`Bearer ${$}`,"Content-Type":"application/json"}});if(Re.ok){const xe=await Re.json();xe.booking&&(G={id:xe.booking.id,user_id:xe.booking.user_id,provider_id:xe.booking.provider_id,service_name:xe.booking.service_title||xe.booking.service_name||"Service",service_title:xe.booking.service_title,user_name:xe.booking.user_full_name||xe.booking.user_name||`User #${xe.booking.user_id}`,provider_name:xe.booking.provider_full_name||xe.booking.provider_name||(xe.booking.provider_id?`Provider #${xe.booking.provider_id}`:"Unassigned"),payment_amount:xe.booking.payment_amount||xe.booking.service_price_discounted||xe.booking.service_price_original||0,user_full_name:xe.booking.user_full_name,provider_full_name:xe.booking.provider_full_name}),ve=xe.outstanding_info||{total_amount:G?.payment_amount||0,paid_amount:0,outstanding_amount:G?.payment_amount||0},ge=xe.bills||[]}else if(Re.status===404)console.log("Booking not found in bills endpoint, using data from bookings list");else{const xe=await Re.json().catch(()=>({}));console.error("Bills endpoint error:",xe)}}catch(Re){console.error("Error fetching from bills endpoint:",Re)}if(!G)try{const Re=await fetch(`${nn}/admin/appointments?limit=1000`,{headers:{Authorization:`Bearer ${$}`,"Content-Type":"application/json"}});if(Re.ok){const xe=await Re.json(),ze=(xe.data||xe.bookings||[]).find(te=>te.id===w);ze&&(G={id:ze.id,user_id:ze.user_id,provider_id:ze.provider_id,service_name:ze.service_title||ze.service_name||"Service",service_title:ze.service_title,user_name:ze.user_full_name||ze.user_name||`User #${ze.user_id}`,provider_name:ze.provider_full_name||ze.provider_name||(ze.provider_id?`Provider #${ze.provider_id}`:"Unassigned"),payment_amount:ze.payment_amount||ze.service_price_discounted||ze.service_price_original||0,user_full_name:ze.user_full_name,provider_full_name:ze.provider_full_name})}}catch(Re){console.error("Error fetching from appointments endpoint:",Re)}G?(ve.total_amount===0&&G.payment_amount&&(ve={total_amount:G.payment_amount,paid_amount:ge.reduce((Re,xe)=>Re+xe.bill_amount,0),outstanding_amount:G.payment_amount-ge.reduce((Re,xe)=>Re+xe.bill_amount,0)}),K({booking:G,outstanding_info:ve,bills:ge}),ve.outstanding_amount>0&&O(Re=>({...Re,bill_amount:ve.outstanding_amount.toString()}))):(r(`Booking #${w} not found. Please check the booking ID.`,"error"),K(null))}catch(G){console.error("Failed to load booking details:",G),r("Failed to load booking details. Please try again.","error"),K(null)}finally{X(!1)}}},Y=w=>{const $=parseInt(w);if(isNaN($)){r("Please enter a valid booking ID","error");return}O({...U,booking_id:w});const G=d.find(ge=>ge.id===$);E(G?`#${G.id} - ${G.service_name} - ${G.user_name}`:`#${$}`),ne(!1),M($)},je=d.filter(w=>{if(!z)return!1;const $=z.toLowerCase();return w.id.toString().includes($)||w.service_name.toLowerCase().includes($)||w.user_name.toLowerCase().includes($)||w.provider_name.toLowerCase().includes($)}),we=async w=>{w.preventDefault();const $=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if($){if(!H){r("Please select a booking first","error");return}re(!0);try{const G=await fetch(`${nn}/admin/bills/generate`,{method:"POST",headers:{Authorization:`Bearer ${$}`,"Content-Type":"application/json"},body:JSON.stringify({booking_id:parseInt(U.booking_id),user_id:H.booking.user_id,provider_id:H.booking.provider_id||null,bill_amount:parseFloat(U.bill_amount),generated_by:"Admin",notes:U.notes})});if(G.ok)r("Bill generated successfully","success"),h(!1),O({booking_id:"",user_id:"",provider_id:"",bill_amount:"",notes:""}),E(""),K(null),ee(),H&&H.booking.id&&M(H.booking.id);else{const ge=await G.json();throw new Error(ge.error?.message||"Failed to generate bill")}}catch(G){r(G.message||"Failed to generate bill","error")}finally{re(!1)}}},W=async w=>{const $=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if($)try{const G=await fetch(`${nn}/admin/bills/${w}`,{headers:{Authorization:`Bearer ${$}`,"Content-Type":"application/json"}});if(G.ok){const ge=await G.json();_(ge.bill),j(!0)}}catch{r("Failed to load bill details","error")}},ce=async(w,$,G)=>{const ge=localStorage.getItem("KwikMedi_token")||localStorage.getItem("admin_token");if(ge)try{const ve={payment_status:$};$==="partial"&&G!==void 0&&(ve.paid_amount=G);const Se=await fetch(`${nn}/admin/bills/${w}/update-payment-status`,{method:"POST",headers:{Authorization:`Bearer ${ge}`,"Content-Type":"application/json"},body:JSON.stringify(ve)});if(Se.ok){if(r("Payment status updated","success"),ee(),y?.id===w){const Re=await Se.json();_(Re.bill)}H&&H.booking.id&&M(H.booking.id)}else{const Re=await Se.json();r(Re.error?.message||"Failed to update payment status","error")}}catch{r("Failed to update payment status","error")}},ue=()=>{if(!k)return;const w=parseFloat(P);if(isNaN(w)||w<=0){r("Please enter a valid payment amount","error");return}ce(k,"partial",w),B(!1),b(""),T(null)},he=w=>`${w.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,Ae=w=>new Date(w).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"});return e.jsx(Lt,{children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Bill Management"}),e.jsx("p",{className:"text-gray-600",children:"Generate and manage bills for bookings"})]}),e.jsxs(ie,{onClick:()=>h(!0),className:"flex items-center gap-2",children:[e.jsx(ks,{size:16}),"Generate Bill"]})]}),e.jsx(Be,{className:"mb-6",children:e.jsx(He,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"User ID"}),e.jsx("input",{type:"number",value:A.user_id,onChange:w=>me({...A,user_id:w.target.value}),className:"w-full px-3 py-2 border rounded-md",placeholder:"Filter by user"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Provider ID"}),e.jsx("input",{type:"number",value:A.provider_id,onChange:w=>me({...A,provider_id:w.target.value}),className:"w-full px-3 py-2 border rounded-md",placeholder:"Filter by provider"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Booking ID"}),e.jsx("input",{type:"number",value:A.booking_id,onChange:w=>me({...A,booking_id:w.target.value}),className:"w-full px-3 py-2 border rounded-md",placeholder:"Filter by booking"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Payment Status"}),e.jsxs("select",{value:A.payment_status,onChange:w=>me({...A,payment_status:w.target.value}),className:"w-full px-3 py-2 border rounded-md",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"partial",children:"Partial"})]})]})]})})}),e.jsxs(Be,{children:[e.jsx(Ze,{children:e.jsx(Ye,{children:"All Bills"})}),e.jsx(He,{children:p?e.jsx(Wn,{}):l.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No bills found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Bill Number"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Booking ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Outstanding"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Generated"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:l.map(w=>{const $=d.find(G=>G.id===w.booking_id);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:w.bill_number}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:["#",w.booking_id]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:$?.user_name||`User #${w.user_id}`}),e.jsx("td",{className:"px-4 py-3 text-sm",children:he(w.bill_amount)}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:w.current_outstanding_amount!==void 0?he(w.current_outstanding_amount):he(w.outstanding_amount)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${w.payment_status==="paid"?"bg-green-100 text-green-800":w.payment_status==="partial"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:w.payment_status})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:Ae(w.generated_at)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(ie,{onClick:()=>W(w.id),variant:"ghost",size:"sm",children:e.jsx(cn,{size:16})})})]},w.id)})})]})})})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Generate Bill"}),e.jsx("button",{onClick:()=>h(!1),children:e.jsx(ut,{size:20})})]}),e.jsxs("form",{onSubmit:we,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Booking ID / Select Booking"}),e.jsxs("div",{className:"relative",ref:F,children:[e.jsx("input",{ref:ae,type:"text",value:z,onChange:w=>{const $=w.target.value;E($),ne($.length>0);const G=$.match(/^#?(\d+)$/);if(G){const ge=parseInt(G[1]);O({...U,booking_id:ge.toString()})}else $.length===0&&(O({...U,booking_id:""}),K(null))},onKeyDown:w=>{if(w.key==="Enter"){w.preventDefault();const $=z.match(/^#?(\d+)$/);if($){const G=parseInt($[1]);Y(G.toString())}else U.booking_id&&Y(U.booking_id)}w.key==="Escape"&&ne(!1)},onFocus:()=>{z&&ne(!0)},placeholder:"Enter booking ID (e.g., 65) or search by service/user name...",className:"w-full px-3 py-2 border rounded-md",required:!0}),Z&&z&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:je.length>0?je.slice(0,10).map(w=>e.jsxs("div",{onClick:()=>Y(w.id.toString()),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100",children:[e.jsxs("div",{className:"font-medium",children:["#",w.id," - ",w.service_name]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[w.user_name,"  ",w.provider_name]})]},w.id)):e.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No bookings found. You can enter booking ID directly (e.g., 65) and press Enter."})})]}),U.booking_id&&e.jsx("input",{type:"hidden",name:"booking_id",value:U.booking_id})]}),H&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-lg p-5 space-y-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between border-b-2 border-blue-200 pb-3",children:[e.jsx("h4",{className:"font-bold text-lg text-gray-900",children:" Booking Details"}),e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded font-medium",children:["ID: #",H.booking.id||U.booking_id]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[e.jsx("span",{className:"text-gray-600 text-xs block mb-1",children:"Service"}),e.jsx("span",{className:"font-semibold text-gray-900 text-base",children:H.booking.service_name||H.booking.service_title||"N/A"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[e.jsx("span",{className:"text-gray-600 text-xs block mb-1",children:"Booking ID"}),e.jsxs("span",{className:"font-semibold text-gray-900 text-base",children:["#",H.booking.id||U.booking_id]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[e.jsx("span",{className:"text-gray-600 text-xs block mb-1",children:"User"}),e.jsx("span",{className:"font-semibold text-gray-900 text-base",children:H.booking.user_full_name||H.booking.user_name||`User #${H.booking.user_id}`})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[e.jsx("span",{className:"text-gray-600 text-xs block mb-1",children:"Provider"}),e.jsx("span",{className:"font-semibold text-gray-900 text-base",children:H.booking.provider_full_name||H.booking.provider_name||(H.booking.provider_id?`Provider #${H.booking.provider_id}`:"Unassigned")})]})]}),e.jsxs("div",{className:"bg-white rounded p-3 border border-blue-300",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block text-xs",children:"Total Booking Amount:"}),e.jsx("span",{className:"font-semibold text-lg text-gray-900",children:he(H.outstanding_info.total_amount)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block text-xs",children:"Total Billed Amount:"}),e.jsx("span",{className:"font-semibold text-lg text-green-600",children:he(H.bills.reduce((w,$)=>w+$.bill_amount,0))}),H.bills.length>0&&e.jsxs("span",{className:"text-xs text-gray-500 block mt-1",children:["(",H.bills.length," ",H.bills.length===1?"bill":"bills",")"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 block text-xs",children:"Outstanding Amount:"}),e.jsx("span",{className:"font-semibold text-lg text-red-600",children:he(H.outstanding_info.outstanding_amount)}),e.jsx("span",{className:"text-xs text-gray-500 block mt-1",children:"(Remaining to bill)"})]})]}),e.jsx("div",{className:"border-t pt-2 mt-2 text-xs text-gray-600",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Calculation:"}),e.jsxs("span",{className:"font-medium",children:["Total (",he(H.outstanding_info.total_amount),") - Billed (",he(H.bills.reduce((w,$)=>w+$.bill_amount,0)),") = Outstanding (",he(H.outstanding_info.outstanding_amount),")"]})]})})]}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-medium text-gray-900 mb-2",children:["Bill History",H.bills.length>0&&e.jsxs("span",{className:"text-gray-500 font-normal",children:["(",H.bills.length," ",H.bills.length===1?"bill":"bills",")"]})]}),H.bills.length>0?e.jsx("div",{className:"bg-white rounded border border-gray-200 max-h-48 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Bill #"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Amount"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Generated Date"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Paid Date"})]})}),e.jsx("tbody",{children:H.bills.map((w,$)=>e.jsxs("tr",{className:`border-b hover:bg-gray-50 ${$===H.bills.length-1?"border-b-2 border-blue-300":""}`,children:[e.jsx("td",{className:"px-3 py-2 font-medium",children:w.bill_number}),e.jsx("td",{className:"px-3 py-2 font-semibold",children:he(w.bill_amount)}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${w.payment_status==="paid"?"bg-green-100 text-green-800":w.payment_status==="partial"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:w.payment_status.charAt(0).toUpperCase()+w.payment_status.slice(1)})}),e.jsx("td",{className:"px-3 py-2",children:Ae(w.generated_at)}),e.jsx("td",{className:"px-3 py-2",children:w.paid_at?e.jsx("span",{className:"text-green-600",children:Ae(w.paid_at)}):e.jsx("span",{className:"text-gray-400",children:"-"})})]},w.id))}),e.jsx("tfoot",{className:"bg-gray-50 border-t-2 border-blue-300",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:2,className:"px-3 py-2 font-semibold text-right",children:"Total Billed:"}),e.jsx("td",{colSpan:3,className:"px-3 py-2 font-bold text-lg",children:he(H.bills.reduce((w,$)=>w+$.bill_amount,0))})]})})]})}):e.jsx("div",{className:"bg-white rounded border border-gray-200 p-4 text-center text-gray-500 text-sm",children:"No bills generated yet for this booking. The outstanding amount shown above is the total booking amount."})]})]}),I&&e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Loading booking details..."}),H&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"User"}),e.jsx("input",{type:"text",value:H.booking.user_full_name||H.booking.user_name||`User #${H.booking.user_id}`,readOnly:!0,className:"w-full px-3 py-2 border rounded-md bg-gray-50 font-medium"}),e.jsx("input",{type:"hidden",name:"user_id",value:H.booking.user_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Provider"}),e.jsx("input",{type:"text",value:H.booking.provider_full_name||H.booking.provider_name||(H.booking.provider_id?`Provider #${H.booking.provider_id}`:"Unassigned"),readOnly:!0,className:"w-full px-3 py-2 border rounded-md bg-gray-50 font-medium"}),H.booking.provider_id&&e.jsx("input",{type:"hidden",name:"provider_id",value:H.booking.provider_id})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bill Amount ()"}),e.jsx("input",{type:"number",step:"0.01",value:U.bill_amount,onChange:w=>O({...U,bill_amount:w.target.value}),className:"w-full px-3 py-2 border rounded-md",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes (Optional)"}),e.jsx("textarea",{value:U.notes,onChange:w=>O({...U,notes:w.target.value}),className:"w-full px-3 py-2 border rounded-md",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(ie,{type:"button",variant:"outline",onClick:()=>{h(!1),O({booking_id:"",user_id:"",provider_id:"",bill_amount:"",notes:""}),E(""),K(null),ne(!1)},onBlur:()=>setTimeout(()=>ne(!1),200),children:"Cancel"}),e.jsx(ie,{type:"submit",disabled:se,children:se?"Generating...":"Generate Bill"})]})]})]})}),N&&k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Enter Partial Payment Amount"}),e.jsx("button",{onClick:()=>{B(!1),b(""),T(null)},children:e.jsx(ut,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[y&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Bill Amount:"}),e.jsx("div",{className:"text-lg font-semibold",children:he(y.bill_amount)}),y.outstanding_amount>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm text-gray-600 mt-2",children:"Outstanding:"}),e.jsx("div",{className:"text-base font-medium text-red-600",children:he(y.outstanding_amount)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Amount Paid ()"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",max:y?.outstanding_amount||y?.bill_amount||0,value:P,onChange:w=>b(w.target.value),placeholder:"Enter amount being paid",className:"w-full px-3 py-2 border rounded-md",autoFocus:!0,onKeyDown:w=>{w.key==="Enter"&&(w.preventDefault(),ue())}}),y&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum: ",he(y.outstanding_amount||y.bill_amount)]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(ie,{type:"button",variant:"outline",onClick:()=>{B(!1),b(""),T(null)},children:"Cancel"}),e.jsx(ie,{onClick:ue,disabled:!P||parseFloat(P)<=0,children:"Confirm Partial Payment"})]})]})]})}),v&&y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Bill Details - ",y.bill_number]}),e.jsx("button",{onClick:()=>j(!1),children:e.jsx(ut,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Bill Number"}),e.jsx("p",{className:"text-lg font-semibold",children:y.bill_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Amount"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:he(y.bill_amount)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Outstanding"}),e.jsx("p",{className:"text-lg font-semibold",children:he(y.outstanding_amount)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Status"}),e.jsx("p",{className:"text-lg",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${y.payment_status==="paid"?"bg-green-100 text-green-800":y.payment_status==="partial"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:y.payment_status})})]})]}),y.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Notes"}),e.jsx("p",{className:"text-sm",children:y.notes})]}),e.jsx("div",{className:"flex gap-3 pt-4 border-t",children:e.jsx(ie,{onClick:()=>ce(y.id,"paid"),className:"bg-green-600 hover:bg-green-700",disabled:y.payment_status==="paid",children:"Mark as Paid"})})]})]})})]})})},Lv={},Mv=Lv?.VITE_API_BASE_URL||"/api",$v=()=>{const[r,l]=m.useState(""),[i,d]=m.useState(""),[u,p]=m.useState(!1),x=Is(),{addToast:g}=_t(),h=async v=>{v.preventDefault(),p(!0);try{const j=await fetch(`${Mv}/lead-admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:i})}),y=await j.json();j.ok&&y.success?(localStorage.setItem("lead_admin_token",y.token),localStorage.setItem("lead_admin_user",JSON.stringify(y.admin)),g("Login successful!","success"),x("/lead-admin/dashboard",{replace:!0})):g(y.error?.message||"Invalid username or password","error")}catch(j){console.error("Login error:",j),g("Login failed. Please try again.","error")}finally{p(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 via-amber-50 to-orange-100 px-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-r from-orange-500 to-amber-400 mb-4",children:e.jsx(ln,{className:"text-white",size:32})}),e.jsx("h1",{className:"text-3xl font-bold text-orange-900 mb-2",children:"Lead Admin Login"}),e.jsx("p",{className:"text-sm text-orange-600",children:"Access your lead management dashboard"})]}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-700 mb-2",children:"Username"}),e.jsx("input",{type:"text",value:r,onChange:v=>l(v.target.value),className:"w-full rounded-xl border border-orange-200 bg-white px-4 py-3 text-orange-900 placeholder-orange-300 outline-none focus:border-orange-400 focus:ring-2 focus:ring-orange-200",placeholder:"Enter your username",required:!0,disabled:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-700 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:i,onChange:v=>d(v.target.value),className:"w-full rounded-xl border border-orange-200 bg-white px-4 py-3 text-orange-900 placeholder-orange-300 outline-none focus:border-orange-400 focus:ring-2 focus:ring-orange-200",placeholder:"Enter your password",required:!0,disabled:u})]}),e.jsx("button",{type:"submit",disabled:u||!r||!i,className:"w-full rounded-xl bg-gradient-to-r from-orange-500 to-amber-400 px-6 py-3 text-white font-semibold shadow-lg hover:from-orange-600 hover:to-amber-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx(Mr,{className:"w-5 h-5 animate-spin"}),"Logging in..."]}):"Login"})]})]})})})},Iv={},Ra=Iv?.VITE_API_BASE_URL||"/api",al={New:{badge:"bg-orange-100 text-orange-700 border border-orange-200",dot:"bg-orange-500"},Contacted:{badge:"bg-amber-100 text-amber-700 border border-amber-200",dot:"bg-amber-500"},Converted:{badge:"bg-emerald-100 text-emerald-700 border border-emerald-200",dot:"bg-emerald-500"},Lost:{badge:"bg-rose-100 text-rose-600 border border-rose-200",dot:"bg-rose-500"},Available:{badge:"bg-secondary text-primary border border-primary/20",dot:"bg-primary"},"Not connected":{badge:"bg-gray-100 text-gray-700 border border-gray-200",dot:"bg-gray-500"}},il=(r=!1)=>{const l=localStorage.getItem("lead_admin_token"),i={};return l&&(i.Authorization=`Bearer ${l}`),r&&(i["Content-Type"]="application/json"),i},Dv=({lead:r,onClose:l,onUpdate:i})=>{const[d,u]=m.useState(r?.status??"New"),[p,x]=m.useState(r?.notes||""),[g,h]=m.useState(!1);if(m.useEffect(()=>{r&&(u(r.status),x(r.notes||""))},[r]),!r)return null;const v=async()=>{h(!0);try{await i(r.id,{status:d,notes:p}),l()}catch(j){console.error("Error updating lead:",j)}finally{h(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4 py-8",children:e.jsxs("div",{className:"relative w-full max-w-3xl rounded-3xl bg-white shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:l,className:"absolute right-4 top-4 rounded-full bg-orange-100 p-2 text-orange-600 hover:bg-orange-200 transition-colors z-10",children:e.jsx(ut,{size:18})}),e.jsx("div",{className:"rounded-t-3xl bg-gradient-to-r from-orange-500 to-amber-400 px-8 py-6 text-white sticky top-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ln,{size:28}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Lead Details"}),e.jsx("p",{className:"text-sm text-orange-100/90",children:"Update status and add notes"})]})]})}),e.jsxs("div",{className:"grid gap-6 px-8 py-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3 rounded-2xl border border-orange-100 bg-orange-50/40 p-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-2xl bg-white/90 p-3 shadow-sm",children:e.jsx(Nt,{className:"text-orange-500",size:22})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary",children:"User"}),e.jsx("p",{className:"text-lg font-semibold text-orange-900",children:r.owner_name})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-orange-700",children:[e.jsx($r,{size:16}),e.jsx("span",{children:r.email})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-orange-700",children:[e.jsx(dn,{size:16}),e.jsx("span",{children:r.phone})]}),r.location&&e.jsxs("div",{className:"flex items-center gap-3 text-sm text-orange-700",children:[e.jsx(lr,{size:16}),e.jsx("span",{children:r.location})]}),r.scheduled_date&&e.jsxs("div",{className:"flex items-center gap-3 text-sm text-orange-700",children:[e.jsx(Ac,{size:16}),e.jsxs("span",{children:["Scheduled: ",new Date(r.scheduled_date).toLocaleDateString(),r.scheduled_time&&` at ${r.scheduled_time}`]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"rounded-2xl border border-orange-100 p-5",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-orange-500 mb-3",children:"Lead Status"}),e.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:["New","Contacted","Converted","Lost","Available","Not connected"].map(j=>e.jsxs("button",{onClick:()=>u(j),className:`flex items-center justify-between rounded-xl border p-3 text-sm font-medium transition-all ${d===j?"border-orange-500 bg-orange-50 text-orange-700 shadow-sm":"border-orange-100 bg-white text-orange-500 hover:border-orange-200"}`,children:[e.jsx("span",{children:j}),j==="Converted"?e.jsx(Vn,{size:18}):j==="Lost"?e.jsx(_s,{size:18}):e.jsx(xp,{size:18})]},j))})]})})]}),e.jsxs("div",{className:"px-8 pb-8",children:[e.jsxs("div",{className:"rounded-2xl border border-orange-100 bg-orange-50/40 p-5",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-orange-500 mb-3",children:"Notes"}),e.jsx("textarea",{value:p,onChange:j=>x(j.target.value),rows:4,className:"w-full rounded-xl border border-orange-200 bg-white px-4 py-2 text-sm text-orange-900 outline-none focus:border-orange-400",placeholder:"Add notes about this lead..."})]}),e.jsxs("div",{className:"mt-6 flex flex-col gap-3 sm:flex-row sm:justify-end",children:[e.jsx("button",{onClick:l,disabled:g,className:"rounded-xl border border-orange-200 px-5 py-2 text-sm font-medium text-orange-500 hover:bg-orange-50 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:v,disabled:g,className:"rounded-xl bg-gradient-to-r from-orange-500 to-amber-400 px-5 py-2 text-sm font-semibold text-white shadow-sm hover:from-orange-600 hover:to-amber-500 transition-colors disabled:opacity-50 flex items-center gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx(Mr,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})})},Rv=({leads:r,onClose:l,onViewLead:i})=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4 py-8",children:e.jsxs("div",{className:"relative w-full max-w-2xl rounded-3xl bg-white shadow-2xl",children:[e.jsx("button",{onClick:l,className:"absolute right-4 top-4 rounded-full bg-red-100 p-2 text-red-600 hover:bg-red-200 transition-colors",children:e.jsx(ut,{size:18})}),e.jsx("div",{className:"rounded-t-3xl bg-gradient-to-r from-red-500 to-orange-500 px-8 py-6 text-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oa,{size:28,className:"animate-pulse"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Alarm: Upcoming Calls"}),e.jsxs("p",{className:"text-sm text-red-100/90",children:["You have ",r.length," lead(s) scheduled within 10 minutes"]})]})]})}),e.jsx("div",{className:"px-8 py-6 max-h-96 overflow-y-auto",children:r.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No upcoming calls"}):e.jsx("div",{className:"space-y-3",children:r.map(d=>e.jsx("div",{className:"rounded-xl border border-red-100 bg-red-50/50 p-4 hover:bg-red-50 transition-colors cursor-pointer",onClick:()=>{i(d),l()},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-red-900",children:d.owner_name}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:d.phone}),d.scheduled_date&&d.scheduled_time&&e.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[e.jsx(as,{size:12}),new Date(d.scheduled_date).toLocaleDateString()," at ",d.scheduled_time]})]}),e.jsx(Js,{className:"text-red-500",size:20})]})},d.id))})})]})}),Fv=()=>{const r=Is(),{addToast:l}=_t(),[i,d]=m.useState([]),[u,p]=m.useState(null),[x,g]=m.useState(""),[h,v]=m.useState("All"),[j,y]=m.useState(!1),[_,N]=m.useState(""),[B,P]=m.useState([]),[b,k]=m.useState(!1);m.useEffect(()=>{if(!localStorage.getItem("lead_admin_token")){r("/lead-admin/login",{replace:!0});return}T(),U();const I=setInterval(U,6e4);return()=>clearInterval(I)},[r]);const T=async()=>{y(!0);try{const K=_?`${Ra}/lead-admin/leads/by-date?date=${_}`:`${Ra}/lead-admin/leads${h!=="All"?`?status=${h}`:""}`,X=await(await fetch(K,{headers:il()})).json();X.success&&Array.isArray(X.leads)?d(X.leads):l("Failed to load leads","error")}catch(K){console.error("Error fetching leads:",K),l("Error loading leads","error")}finally{y(!1)}},U=async()=>{try{const I=await(await fetch(`${Ra}/lead-admin/alarms`,{headers:il()})).json();I.success&&Array.isArray(I.leads)&&I.leads.length>0&&(P(I.leads),k(!0))}catch(K){console.error("Error checking alarms:",K)}};m.useEffect(()=>{T()},[h,_]);const O=()=>{localStorage.removeItem("lead_admin_token"),localStorage.removeItem("lead_admin_user"),r("/lead-admin/login",{replace:!0})},A=async(K,I)=>{try{const X=await fetch(`${Ra}/lead-admin/leads/${K}/update-status`,{method:"PUT",headers:il(!0),body:JSON.stringify(I)}),z=await X.json();if(X.ok&&z.success)await T(),l("Lead updated successfully","success");else throw l(z.error?.message||"Failed to update lead","error"),new Error(z.error?.message||"Failed to update lead")}catch(X){throw console.error("Error updating lead:",X),l("Error updating lead","error"),X}},me=async K=>{try{const I=await fetch(`${Ra}/lead-admin/leads/${K}/set-available`,{method:"PUT",headers:il()}),X=await I.json();I.ok&&X.success?(await T(),l("Lead marked as available","success")):l(X.error?.message||"Failed to update lead","error")}catch(I){console.error("Error updating lead:",I),l("Error updating lead","error")}},se=m.useMemo(()=>{i.length;const K=i.filter(E=>E.status==="New").length,I=i.filter(E=>E.status==="Contacted").length,X=i.filter(E=>E.status==="Converted").length,z=i.filter(E=>E.status==="Available").length;return[{label:"New Leads",value:K,icon:e.jsx(yp,{className:"text-white",size:22}),gradient:"from-orange-500 to-amber-400"},{label:"Contacted",value:I,icon:e.jsx(gp,{className:"text-orange-500",size:22}),gradient:"from-orange-100 to-amber-100"},{label:"Converted",value:X,icon:e.jsx(Vn,{className:"text-emerald-600",size:22}),gradient:"from-emerald-100 to-emerald-50"},{label:"Available",value:z,icon:e.jsx(Ec,{className:"text-primary",size:22}),gradient:"bg-secondary"}]},[i]),re=i.filter(K=>K.owner_name.toLowerCase().includes(x.toLowerCase())||K.email.toLowerCase().includes(x.toLowerCase())||K.phone.toLowerCase().includes(x.toLowerCase())),H=JSON.parse(localStorage.getItem("lead_admin_user")||"{}");return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-amber-50 to-orange-100",children:[e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("div",{className:"rounded-3xl bg-gradient-to-r from-orange-500 to-amber-400 px-6 py-8 text-white shadow-lg",children:e.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm uppercase tracking-wider text-orange-100/80",children:"Lead Management"}),e.jsx("h1",{className:"mt-2 text-3xl font-bold",children:"My Leads Dashboard"}),e.jsxs("p",{className:"mt-3 max-w-2xl text-sm text-orange-50/80",children:["Welcome, ",H.full_name||H.username]})]}),e.jsxs("button",{onClick:O,className:"flex items-center gap-2 rounded-xl bg-white px-5 py-2 text-sm font-semibold text-orange-600 shadow-sm hover:bg-orange-50 transition-colors",children:[e.jsx(Tc,{size:16}),"Logout"]})]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:se.map(K=>e.jsx("div",{className:"overflow-hidden rounded-3xl border border-orange-100/60 bg-white/95 shadow-md",children:e.jsxs("div",{className:"relative flex items-center gap-4 p-6",children:[e.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br ${K.gradient} shadow-sm`,children:K.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium uppercase tracking-wide text-orange-500",children:K.label}),e.jsx("p",{className:"mt-1 text-2xl font-semibold text-orange-900",children:K.value})]})]})},K.label))}),e.jsx("div",{className:"rounded-3xl border border-orange-100/60 bg-white/95 shadow-lg p-6",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex flex-1 items-center gap-3 rounded-2xl border border-orange-100 bg-orange-50/60 px-4 py-2",children:[e.jsx(is,{size:18,className:"text-orange-400"}),e.jsx("input",{value:x,onChange:K=>g(K.target.value),placeholder:"Search leads...",className:"flex-1 border-none bg-transparent text-sm text-orange-900 placeholder-orange-300 outline-none"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-orange-100 bg-white px-4 py-2",children:[e.jsx(fs,{size:16,className:"text-orange-500"}),e.jsx("input",{type:"date",value:_,onChange:K=>N(K.target.value),className:"text-sm text-orange-900 outline-none"}),_&&e.jsx("button",{onClick:()=>N(""),className:"text-orange-400 hover:text-orange-600",children:e.jsx(ut,{size:14})})]}),["All","New","Contacted","Converted","Lost","Available","Not connected"].map(K=>e.jsxs("button",{onClick:()=>v(K),className:`flex items-center gap-2 rounded-full border px-4 py-2 text-xs font-semibold uppercase tracking-wide transition-all ${h===K?"border-orange-500 bg-orange-50 text-orange-600 shadow-sm":"border-orange-100 bg-white text-orange-400 hover:border-orange-200"}`,children:[e.jsx(Ua,{size:14}),K]},K))]})]})}),e.jsx("div",{className:"rounded-3xl border border-orange-100/60 bg-white/95 shadow-lg",children:e.jsx("div",{className:"overflow-hidden rounded-2xl border border-orange-100",children:e.jsxs("table",{className:"min-w-full divide-y divide-orange-100",children:[e.jsx("thead",{className:"bg-orange-50/70",children:e.jsxs("tr",{className:"text-left text-xs font-semibold uppercase tracking-wider text-orange-500",children:[e.jsx("th",{className:"px-6 py-4",children:"User"}),e.jsx("th",{className:"px-6 py-4",children:"Pet Type"}),e.jsx("th",{className:"px-6 py-4",children:"Service Interest"}),e.jsx("th",{className:"px-6 py-4",children:"Scheduled"}),e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-orange-50 bg-white/95",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Mr,{className:"w-8 h-8 animate-spin text-orange-400"})})})}):re.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-sm text-orange-400",children:"No leads found for the current filters."})}):re.map(K=>e.jsxs("tr",{className:"transition-colors hover:bg-orange-50/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-gradient-to-br from-orange-500 to-amber-400 text-white shadow-sm",children:e.jsx(ln,{size:18})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-orange-900",children:K.owner_name}),e.jsx("p",{className:"text-xs text-orange-400",children:K.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center gap-2 rounded-full bg-orange-50 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-orange-500",children:K.pet_type})}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-orange-700",children:K.service_interest}),e.jsx("td",{className:"px-6 py-4 text-sm text-orange-600",children:K.scheduled_date?e.jsxs("div",{children:[e.jsx("div",{children:new Date(K.scheduled_date).toLocaleDateString()}),K.scheduled_time&&e.jsx("div",{className:"text-xs",children:K.scheduled_time})]}):e.jsx("span",{className:"text-orange-300",children:"Not scheduled"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${al[K.status]?.badge||al.New.badge}`,children:[e.jsx("span",{className:`h-2 w-2 rounded-full ${al[K.status]?.dot||al.New.dot}`}),K.status]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[K.scheduled_date&&e.jsx("button",{onClick:()=>me(K.id),className:"inline-flex items-center gap-2 rounded-full bg-primary px-3 py-1 text-xs font-semibold text-white shadow-sm hover:bg-primary-dark transition-colors",children:"Mark Available"}),e.jsxs("button",{onClick:()=>p(K),className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-orange-500 to-amber-400 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-white shadow-sm transition-all hover:from-orange-600 hover:to-amber-500",children:["Manage",e.jsx(Js,{size:14})]})]})})]},K.id))})]})})})]}),e.jsx(Dv,{lead:u,onClose:()=>p(null),onUpdate:A}),b&&e.jsx(Rv,{leads:B,onClose:()=>k(!1),onViewLead:K=>p(K)})]})},Ov="https://kwikmedi.mycartly.in",Uv=()=>{const[r,l]=m.useState(""),[i,d]=m.useState(""),[u,p]=m.useState(!1),x=Is(),{addToast:g}=_t(),{isAuthenticated:h,user:v}=Ut();m.useEffect(()=>{console.log("HelpingStaffLogin component mounted"),console.log("Current path:",window.location.pathname),console.log("isAuthenticated:",h),console.log("user:",v)},[h,v]),m.useEffect(()=>{h&&(v?.role==="helping_staff"||v?.role==="helping_staff_admin")&&x("/admin/helping-staff-panel",{replace:!0})},[h,v,x]);const j=async y=>{y.preventDefault(),p(!0);try{const _=await fetch(`${Ov}/api/helping-staff/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:i})}),N=await _.json();if(_.ok&&N.success){const B=N.staff||N.admin;if(B)B.role="helping_staff";else{const P=N.admin||{};P.role="helping_staff",localStorage.setItem("KwikMedi_user",JSON.stringify(P))}localStorage.setItem("KwikMedi_token",N.token),B&&localStorage.setItem("KwikMedi_user",JSON.stringify(B)),localStorage.setItem("KwikMedi_role","helping_staff"),g("Login successful!","success"),setTimeout(()=>{window.location.href="/admin/helping-staff-panel"},500)}else{const B=N.error?.message||"Login failed. Please check your credentials.";g(B,"error")}}catch(_){console.error("Helping staff login error:",_),g("Login failed. Please try again.","error")}finally{p(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("button",{onClick:()=>x("/"),className:"flex items-center text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(Pc,{className:"h-5 w-5 mr-2"}),"Back to Home"]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"bg-primary/10 p-3 rounded-full",children:e.jsx(Nt,{className:"h-8 w-8 text-primary"})})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Helping Staff Login"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Access the prescription processing panel"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:j,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"sr-only",children:"Email or Phone"}),e.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email or Phone Number",value:r,onChange:y=>l(y.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:i,onChange:y=>d(y.target.value)})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:u?"Logging in...":"Sign in"})})]})]})})},Bv="https://kwikmedi.mycartly.in",Hv=()=>{const[r,l]=m.useState(""),[i,d]=m.useState(""),[u,p]=m.useState(!1),x=Is(),{addToast:g}=_t(),{isAuthenticated:h,user:v}=Ut();m.useEffect(()=>{h&&(v?.role==="finance_admin"||v?.role==="admin")&&x("/admin/finance-panel",{replace:!0})},[h,v,x]);const j=async y=>{y.preventDefault(),p(!0);try{const _=await fetch(`${Bv}/api/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:i})}),N=await _.json();if(_.ok&&N.token){const B=N.admin?.role||"";if(B!=="finance_admin"&&B!=="super_admin"){g("Access denied. This login is for financial staff only.","error"),p(!1);return}const P=N.admin;P&&(P.role=B==="super_admin"?"admin":B),localStorage.setItem("KwikMedi_token",N.token),localStorage.setItem("KwikMedi_user",JSON.stringify(P)),localStorage.setItem("KwikMedi_role",P.role),g("Login successful!","success"),window.location.href="/admin/finance-panel"}else{const B=N.error?.message||"Login failed. Please check your credentials.";g(B,"error")}}catch(_){console.error("Financial staff login error:",_),g("Login failed. Please try again.","error")}finally{p(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("button",{onClick:()=>x("/login"),className:"flex items-center text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(Pc,{className:"h-5 w-5 mr-2"}),"Back to Login Selection"]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(dr,{className:"h-8 w-8 text-green-600"})})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Financial Staff Login"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Access the finance panel and payment management"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:j,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username or Email"}),e.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Username or Email",value:r,onChange:y=>l(y.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Password",value:i,onChange:y=>d(y.target.value)})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:u?"Logging in...":"Sign in"})})]})]})})},Gm=()=>{Is();const r=[{id:"super_admin",title:"Super Admin",description:"Full system access and management",icon:Ks,route:"/admin/login",color:"bg-indigo-600 hover:bg-indigo-700",iconColor:"text-indigo-600"},{id:"helping_staff",title:"Helping Staff",description:"Prescription processing and digitization",icon:ur,route:"/helping-staff/login",color:"bg-blue-600 hover:bg-blue-700",iconColor:"text-blue-600"},{id:"financial_staff",title:"Financial Staff",description:"Finance panel and payment management",icon:dr,route:"/financial-staff/login",color:"bg-green-600 hover:bg-green-700",iconColor:"text-green-600"}];return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl w-full",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-extrabold text-gray-900 mb-2",children:"KwikMedi Admin Portal"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Select your role to continue"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:r.map(l=>{const i=l.icon;return e.jsxs(Sc,{to:l.route,onClick:()=>{console.log("Navigating to:",l.route,"from LoginSelection")},className:`${l.color} text-white rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 p-8 flex flex-col items-center space-y-4 no-underline`,children:[e.jsx("div",{className:"bg-white/20 rounded-full p-4",children:e.jsx(i,{className:"h-10 w-10"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:l.title}),e.jsx("p",{className:"text-sm text-white/90",children:l.description})]})]},l.id)})}),e.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:e.jsx("p",{children:"Choose the appropriate login option based on your role"})})]})})},Vv=({children:r,allowedRoles:l=[]})=>{const{user:i,isAuthenticated:d,isLoading:u}=Ut();if(u)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});const p=localStorage.getItem("KwikMedi_token"),x=localStorage.getItem("KwikMedi_role"),g=p&&!p.startsWith("mock_token_"),h=i?.role||x||"",v=l.length===0||l.includes(h)||x&&l.includes(x);return!d&&!g?e.jsx(Bn,{to:"/",replace:!0}):g&&v&&!d&&u?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):!d&&g&&u?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):l.length>0&&!v?(console.log("ProtectedRoute: Role mismatch",{user:i,allowedRole:i?.role,allowedRoles:l,storedRole:x,currentPath:window.location.pathname}),h==="helping_staff"||h==="helping_staff_admin"||x==="helping_staff"?e.jsx(Bn,{to:"/admin/helping-staff-panel",replace:!0}):h==="finance_admin"||x==="finance_admin"?e.jsx(Bn,{to:"/admin/finance-panel",replace:!0}):e.jsx(Bn,{to:"/admin/dashboard",replace:!0})):e.jsx(e.Fragment,{children:r})},Kv=()=>e.jsxs(Pm,{children:[e.jsx(dt,{path:"/",element:e.jsx(Gm,{})}),e.jsx(dt,{path:"/login",element:e.jsx(Gm,{})}),e.jsx(dt,{path:"/admin/login",element:e.jsx(Wg,{})}),e.jsx(dt,{path:"/lead-admin/login",element:e.jsx($v,{})}),e.jsx(dt,{path:"/lead-admin/dashboard",element:e.jsx(Fv,{})}),e.jsx(dt,{path:"/helping-staff/login",element:e.jsx(Uv,{})}),e.jsx(dt,{path:"/financial-staff/login",element:e.jsx(Hv,{})}),e.jsx(dt,{path:"/admin/*",element:e.jsx(Vv,{allowedRoles:["admin","helping_staff","helping_staff_admin","finance_admin"],children:e.jsxs(Pm,{children:[e.jsx(dt,{path:"/dashboard",element:e.jsx(x0,{})}),e.jsx(dt,{path:"/providers",element:e.jsx(ky,{})}),e.jsx(dt,{path:"/users",element:e.jsx(Ly,{})}),e.jsx(dt,{path:"/categories",element:e.jsx(Oy,{})}),e.jsx(dt,{path:"/prescriptions",element:e.jsx(fv,{})}),e.jsx(dt,{path:"/leads",element:e.jsx(dv,{})}),e.jsx(dt,{path:"/finance-panel",element:e.jsx(uv,{})}),e.jsx(dt,{path:"/finance",element:e.jsx(mv,{})}),e.jsx(dt,{path:"/helping-staff-panel",element:e.jsx(hv,{})}),e.jsx(dt,{path:"/commission",element:e.jsx(Vy,{})}),e.jsx(dt,{path:"/disputes",element:e.jsx(Gy,{})}),e.jsx(dt,{path:"/bookings",element:e.jsx(Xy,{})}),e.jsx(dt,{path:"/orders",element:e.jsx(rv,{})}),e.jsx(dt,{path:"/transactions",element:e.jsx(wv,{})}),e.jsx(dt,{path:"/coupons",element:e.jsx(Ev,{})}),e.jsx(dt,{path:"/helpdesk",element:e.jsx(Av,{})}),e.jsx(dt,{path:"/complaints",element:e.jsx(iv,{})}),e.jsx(dt,{path:"/bills",element:e.jsx(zv,{})}),e.jsx(dt,{path:"*",element:e.jsx(Bn,{to:"/admin/dashboard",replace:!0})})]})})}),e.jsx(dt,{path:"*",element:e.jsx(Bn,{to:"/",replace:!0})})]});function qv(){return e.jsx(tg,{children:e.jsx(xg,{children:e.jsxs(hg,{children:[" ",e.jsx(Kv,{}),e.jsx(fg,{})]})})})}Oh.createRoot(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(qv,{})}));
